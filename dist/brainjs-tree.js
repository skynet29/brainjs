/*! jQuery Fancytree Plugin - 2.21.0 - 2017-01-15T17:21:28Z
  * https://github.com/mar10/fancytree
  * Copyright (c) 2017 Martin Wendt; Licensed MIT */
(function( factory ) {
	if ( typeof define === "function" && define.amd ) {
		define( [ "jquery" ], factory );
	} else {
		factory( jQuery );
	}
}(function( $ ) {

!function(a,b,c,d){"use strict";function e(b,c){b||(c=c?": "+c:"",a.error("Fancytree assertion failed"+c))}function f(a,c){var d,e,f=b.console?b.console[a]:null;if(f)try{f.apply(b.console,c)}catch(g){for(e="",d=0;d<c.length;d++)e+=c[d];f(e)}}function g(a){return!(!a.tree||a.statusNodeType===d)}function h(b,c,d,e){var f,g,h,i=a.map(a.trim(b).split("."),function(a){return parseInt(a,10)}),j=a.map(Array.prototype.slice.call(arguments,1),function(a){return parseInt(a,10)});for(f=0;f<j.length;f++)if(g=i[f]||0,h=j[f]||0,g!==h)return g>h;return!0}function i(a,b,c,d,e){var f=function(){var c=b[a],f=d[a],g=b.ext[e],h=function(){return c.apply(b,arguments)},i=function(a){return c.apply(b,a)};return function(){var a=b._local,c=b._super,d=b._superApply;try{return b._local=g,b._super=h,b._superApply=i,f.apply(b,arguments)}finally{b._local=a,b._super=c,b._superApply=d}}}();return f}function j(b,c,d,e){for(var f in d)"function"==typeof d[f]?"function"==typeof b[f]?b[f]=i(f,b,c,d,e):"_"===f.charAt(0)?b.ext[e][f]=i(f,b,c,d,e):a.error("Could not override tree."+f+". Use prefix '_' to create tree."+e+"._"+f):"options"!==f&&(b.ext[e][f]=d[f])}function k(b,c){return b===d?a.Deferred(function(){this.resolve()}).promise():a.Deferred(function(){this.resolveWith(b,c)}).promise()}function l(b,c){return b===d?a.Deferred(function(){this.reject()}).promise():a.Deferred(function(){this.rejectWith(b,c)}).promise()}function m(a,b){return function(){a.resolveWith(b)}}function n(b){var c=a.extend({},b.data()),d=c.json;return delete c.fancytree,delete c.uiFancytree,d&&(delete c.json,c=a.extend(c,d)),c}function o(a){return(""+a).replace(y,function(a){return B[a]})}function p(a){return(""+a).replace(z,function(a){return B[a]})}function q(a){return a=a.toLowerCase(),function(b){return b.title.toLowerCase().indexOf(a)>=0}}function r(a){var b=new RegExp("^"+a,"i");return function(a){return b.test(a.title)}}function s(b,c){var d,f,g,h;for(this.parent=b,this.tree=b.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},d=0,f=H.length;d<f;d++)g=H[d],this[g]=c[g];c.data&&a.extend(this.data,c.data);for(g in c)I[g]||a.isFunction(c[g])||K[g]||(this.data[g]=c[g]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),e(this.key,"defaultKey() must return a unique key")):this.key="_"+w._nextNodeKey++:this.key=""+this.key,c.active&&(e(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),c.selected&&(this.tree.lastSelectedNode=this),h=c.children,h?h.length?this._setChildren(h):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function t(b){this.widget=b,this.$div=b.element,this.options=b.options,this.options&&(a.isFunction(this.options.lazyload)&&!a.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return w.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),b.options.lazyload.apply(this,arguments)}),a.isFunction(this.options.loaderror)&&a.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),this.options.fx!==d&&w.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),this.options.removeNode!==d&&a.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.data=n(this.$div),this._id=a.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var c,e={tree:this};this.rootNode=new s(e,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,c=a("<ul>",{"class":"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=c,this.rootNode.ul=c[0],null==this.options.debugLevel&&(this.options.debugLevel=w.debugLevel),this.$container.attr("tabindex",this.options.tabindex),this.options.rtl&&this.$container.attr("DIR","RTL").addClass("fancytree-rtl"),this.options.aria&&(this.$container.attr("role","tree"),1!==this.options.selectMode&&this.$container.attr("aria-multiselectable",!0))}if(a.ui&&a.ui.fancytree)return void a.ui.fancytree.warn("Fancytree: ignored duplicate include");var u,v,w=null,x=new RegExp(/\.|\//),y=/[&<>"'\/]/g,z=/[<>"'\/]/g,A="$recursive_request",B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},C={16:!0,17:!0,18:!0},D={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={0:"",1:"left",2:"middle",3:"right"},F="active expanded focus folder hideCheckbox lazy selected unselectable".split(" "),G={},H="expanded extraClasses folder hideCheckbox icon key lazy refKey selected statusNodeType title tooltip unselectable".split(" "),I={},J={},K={active:!0,children:!0,data:!0,focus:!0};for(u=0;u<F.length;u++)G[F[u]]=!0;for(u=0;u<H.length;u++)v=H[u],I[v]=!0,v!==v.toLowerCase()&&(J[v.toLowerCase()]=v);e(a.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),s.prototype={_findDirectChild:function(a){var b,c,d=this.children;if(d)if("string"==typeof a){for(b=0,c=d.length;b<c;b++)if(d[b].key===a)return d[b]}else{if("number"==typeof a)return this.children[a];if(a.parent===this)return a}return null},_setChildren:function(a){e(a&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var b=0,c=a.length;b<c;b++)this.children.push(new s(this,a[b]))},addChildren:function(b,c){var d,f,g,h=null,i=[];for(a.isPlainObject(b)&&(b=[b]),this.children||(this.children=[]),d=0,f=b.length;d<f;d++)i.push(new s(this,b[d]));return h=i[0],null==c?this.children=this.children.concat(i):(c=this._findDirectChild(c),g=a.inArray(c,this.children),e(g>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[g,0].concat(i))),(!this.parent||this.parent.ul||this.tr)&&this.render(),3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===i.length?i[0]:null),h},addClass:function(a){return this.toggleClass(a,!0)},addNode:function(a,b){switch(b!==d&&"over"!==b||(b="child"),b){case"after":return this.getParent().addChildren(a,this.getNextSibling());case"before":return this.getParent().addChildren(a,this);case"firstChild":var c=this.children?this.children[0]:null;return this.addChildren(a,c);case"child":case"over":return this.addChildren(a)}e(!1,"Invalid mode: "+b)},addPagingNode:function(b,c){var d,e;if(c=c||"child",b===!1){for(d=this.children.length-1;d>=0;d--)e=this.children[d],"paging"===e.statusNodeType&&this.removeChild(e);return void(this.partload=!1)}return b=a.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},b),this.partload=!0,this.addNode(b,c)},appendSibling:function(a){return this.addNode(a,"after")},applyPatch:function(b){if(null===b)return this.remove(),k(this);var c,d,e,f={children:!0,expanded:!0,parent:!0};for(c in b)e=b[c],f[c]||a.isFunction(e)||(I[c]?this[c]=e:this.data[c]=e);return b.hasOwnProperty("children")&&(this.removeChildren(),b.children&&this._setChildren(b.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),d=b.hasOwnProperty("expanded")?this.setExpanded(b.expanded):k(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(a,b,c){return a.addNode(this.toDict(!0,c),b)},countChildren:function(a){var b,c,d,e=this.children;if(!e)return 0;if(d=e.length,a!==!1)for(b=0,c=d;b<c;b++)d+=e[b].countChildren();return d},debug:function(a){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),f("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(a){var b=a?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(b,this)},findAll:function(b){b=a.isFunction(b)?b:q(b);var c=[];return this.visit(function(a){b(a)&&c.push(a)}),c},findFirst:function(b){b=a.isFunction(b)?b:q(b);var c=null;return this.visit(function(a){if(b(a))return c=a,!1}),c},_changeSelectStatusAttrs:function(a){var b=!1;switch(a){case!1:b=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:b=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case d:b=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:e(!1,"invalid state: "+a)}return b&&this.renderStatus(),b},fixSelection3AfterClick:function(){var a=this.isSelected();this.visit(function(b){b._changeSelectStatusAttrs(a)}),this.fixSelection3FromEndNodes()},fixSelection3FromEndNodes:function(){function a(b){var c,e,f,g,h,i,j,k=b.children;if(k&&k.length){for(i=!0,j=!1,c=0,e=k.length;c<e;c++)f=k[c],g=a(f),g!==!1&&(j=!0),g!==!0&&(i=!1);h=!!i||!!j&&d}else h=!!b.selected;return b._changeSelectStatusAttrs(h),h}e(3===this.tree.options.selectMode,"expected selectMode 3"),a(this),this.visitParents(function(a){var b,c,e,f,g=a.children,h=!0,i=!1;for(b=0,c=g.length;b<c;b++)e=g[b],(e.selected||e.partsel)&&(i=!0),e.unselectable||e.selected||(h=!1);f=!!h||!!i&&d,a._changeSelectStatusAttrs(f)})},fromDict:function(b){for(var c in b)I[c]?this[c]=b[c]:"data"===c?a.extend(this.data,b.data):a.isFunction(b[c])||K[c]||(this.data[c]=b[c]);b.children&&(this.removeChildren(),this.addChildren(b.children)),this.renderTitle()},getChildren:function(){return this.hasChildren()===d?d:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return a.inArray(this,this.parent.children)},getIndexHier:function(b,c){b=b||".";var d,e=[];return a.each(this.getParentList(!1,!0),function(a,b){d=""+(b.getIndex()+1),c&&(d=("0000000"+d).substr(-c)),e.push(d)}),e.join(b)},getKeyPath:function(a){var b=[],c=this.tree.options.keyPathSeparator;return this.visitParents(function(a){a.parent&&b.unshift(a.key)},!a),c+b.join(c)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},getNextSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=0,b=c.length-1;a<b;a++)if(c[a]===this)return c[a+1]}return null},getParent:function(){return this.parent},getParentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getPrevSibling:function(){if(this.parent){var a,b,c=this.parent.children;for(a=1,b=c.length;a<b;a++)if(c[a]===this)return c[a-1]}return null},getSelectedNodes:function(a){var b=[];return this.visit(function(c){if(c.selected&&(b.push(c),a===!0))return"skip"}),b},hasChildren:function(){return this.lazy?null==this.children?d:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||d):!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(a){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),f("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a||a.tree!==this.tree)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var a=this.parent;return!a||a.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var a=this.parent;return!a||a.children[a.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||this.hasChildren()!==d},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return this.hasChildren()===d},isVisible:function(){var a,b,c=this.getParentList(!1,!1);for(a=0,b=c.length;a<b;a++)if(!c[a].expanded)return!1;return!0},lazyLoad:function(a){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(a)},load:function(a){var b,c,d=this,f=this.isExpanded();return e(this.isLazy(),"load() requires a lazy node"),a||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),c=this.tree._triggerNodeEvent("lazyLoad",this),c===!1?k(this):(e("boolean"!=typeof c,"lazyLoad event must return source in data.result"),b=this.tree._callHook("nodeLoadChildren",this,c),f?(this.expanded=!0,b.always(function(){d.render()})):b.always(function(){d.renderStatus()}),b)):k(this)},makeVisible:function(b){var c,d=this,e=[],f=new a.Deferred,g=this.getParentList(!1,!1),h=g.length,i=!(b&&b.noAnimation===!0),j=!(b&&b.scrollIntoView===!1);for(c=h-1;c>=0;c--)e.push(g[c].setExpanded(!0,b));return a.when.apply(a,e).done(function(){j?d.scrollIntoView(i).done(function(){f.resolve()}):f.resolve()}),f.promise()},moveTo:function(b,c,f){c===d||"over"===c?c="child":"firstChild"===c&&(b.children&&b.children.length?(c="before",b=b.children[0]):c="child");var g,h=this.parent,i="child"===c?b:b.parent;if(this!==b){if(this.parent?i.isDescendantOf(this)&&a.error("Cannot move a node to its own descendant"):a.error("Cannot move system root"),i!==h&&h.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===i)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else g=a.inArray(this,this.parent.children),e(g>=0,"invalid source parent"),this.parent.children.splice(g,1);if(this.parent=i,i.hasChildren())switch(c){case"child":i.children.push(this);break;case"before":g=a.inArray(b,i.children),e(g>=0,"invalid target parent"),i.children.splice(g,0,this);break;case"after":g=a.inArray(b,i.children),e(g>=0,"invalid target parent"),i.children.splice(g+1,0,this);break;default:a.error("Invalid mode "+c)}else i.children=[this];f&&b.visit(f,!0),i===h?i.triggerModifyChild("move",this):i.triggerModifyChild("add",this),this.tree!==b.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(a){a.tree=b.tree},!0)),h.isDescendantOf(i)||h.render(),i.isDescendantOf(h)||i===h||i.render()}},navigate:function(b,c){function d(d){if(d){try{d.makeVisible({scrollIntoView:!1})}catch(e){}return a(d.span).is(":visible")?c===!1?d.setFocus():d.setActive():(d.debug("Navigate: skipping hidden node"),void d.navigate(b,c))}}var e,f,g,h=!0,i=a.ui.keyCode,j=null;switch(b){case i.BACKSPACE:this.parent&&this.parent.parent&&(g=d(this.parent));break;case i.HOME:this.tree.visit(function(b){if(a(b.span).is(":visible"))return g=d(b),!1});break;case i.END:this.tree.visit(function(b){a(b.span).is(":visible")&&(g=b)}),g&&(g=d(g));break;case i.LEFT:this.expanded?(this.setExpanded(!1),g=d(this)):this.parent&&this.parent.parent&&(g=d(this.parent));break;case i.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(g=d(this.children[0])):(this.setExpanded(),g=d(this));break;case i.UP:for(j=this.getPrevSibling();j&&!a(j.span).is(":visible");)j=j.getPrevSibling();for(;j&&j.expanded&&j.children&&j.children.length;)j=j.children[j.children.length-1];!j&&this.parent&&this.parent.parent&&(j=this.parent),g=d(j);break;case i.DOWN:if(this.expanded&&this.children&&this.children.length)j=this.children[0];else for(f=this.getParentList(!1,!0),e=f.length-1;e>=0;e--){for(j=f[e].getNextSibling();j&&!a(j.span).is(":visible");)j=j.getNextSibling();if(j)break}g=d(j);break;default:h=!1}return g||k()},remove:function(){return this.parent.removeChild(this)},removeChild:function(a){return this.tree._callHook("nodeRemoveChild",this,a)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(a){return this.toggleClass(a,!1)},render:function(a,b){return this.tree._callHook("nodeRender",this,a,b)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(b){var c,d=this.parent,f=a.inArray(this,d.children),g=this;return e(this.isPagingNode(),"replaceWith() currently requires a paging status node"),c=this.tree._callHook("nodeLoadChildren",this,b),c.done(function(a){var b=g.children;for(u=0;u<b.length;u++)b[u].parent=d;d.children.splice.apply(d.children,[f+1,0].concat(b)),g.children=null,g.remove(),d.render()}).fail(function(){g.setExpanded()}),c},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=d,this.renderStatus()},scheduleAction:function(b,c){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var d=this;switch(b){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){d.tree.debug("setTimeout: trigger expand"),d.setExpanded(!0)},c);break;case"activate":this.tree.timer=setTimeout(function(){d.tree.debug("setTimeout: trigger activate"),d.setActive(!0)},c);break;default:a.error("Invalid mode "+b)}},scrollIntoView:function(f,h){h!==d&&g(h)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),h={topNode:h});var i,j,l,m,n=a.extend({effects:f===!0?{duration:200,queue:!1}:f,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},h),o=new a.Deferred,p=this,q=a(this.span).height(),r=a(n.scrollParent),s=n.scrollOfs.top||0,t=n.scrollOfs.bottom||0,u=r.height(),v=r.scrollTop(),w=r,x=r[0]===b,y=n.topNode||null,z=null;return a(this.span).is(":visible")?(x?(j=a(this.span).offset().top,i=y&&y.span?a(y.span).offset().top:0,w=a("html,body")):(e(r[0]!==c&&r[0]!==c.body,"scrollParent should be a simple element or `window`, not document or body."),m=r.offset().top,j=a(this.span).offset().top-m+v,i=y?a(y.span).offset().top-m+v:0,l=Math.max(0,r.innerHeight()-r[0].clientHeight),u-=l),j<v+s?z=j-s:j+q>v+u-t&&(z=j+q-u+t,y&&(e(y.isRootNode()||a(y.span).is(":visible"),"topNode must be visible"),i<z&&(z=i-s))),null!==z?n.effects?(n.effects.complete=function(){o.resolveWith(p)},w.stop(!0).animate({scrollTop:z},n.effects)):(w[0].scrollTop=z,o.resolveWith(this)):o.resolveWith(this),o.promise()):(this.warn("scrollIntoView(): node is invisible."),k())},setActive:function(a,b){return this.tree._callHook("nodeSetActive",this,a,b)},setExpanded:function(a,b){return this.tree._callHook("nodeSetExpanded",this,a,b)},setFocus:function(a){return this.tree._callHook("nodeSetFocus",this,a)},setSelected:function(a){return this.tree._callHook("nodeSetSelected",this,a)},setStatus:function(a,b,c){return this.tree._callHook("nodeSetStatus",this,a,b,c)},setTitle:function(a){this.title=a,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(a,b){var c,d,e=this.children;if(e){if(a=a||function(a,b){var c=a.title.toLowerCase(),d=b.title.toLowerCase();return c===d?0:c>d?1:-1},e.sort(a),b)for(c=0,d=e.length;c<d;c++)e[c].children&&e[c].sortChildren(a,"$norender$");"$norender$"!==b&&this.render(),this.triggerModifyChild("sort")}},toDict:function(b,c){var d,e,f,g={},h=this;if(a.each(H,function(a,b){(h[b]||h[b]===!1)&&(g[b]=h[b])}),a.isEmptyObject(this.data)||(g.data=a.extend({},this.data),a.isEmptyObject(g.data)&&delete g.data),c&&c(g,h),b&&this.hasChildren())for(g.children=[],d=0,e=this.children.length;d<e;d++)f=this.children[d],f.isStatusNode()||g.children.push(f.toDict(!0,c));return g},toggleClass:function(b,c){var e,f,g=/\S+/g,h=b.match(g)||[],i=0,j=!1,k=this[this.tree.statusClassPropName],l=" "+(this.extraClasses||"")+" ";for(k&&a(k).toggleClass(b,c);e=h[i++];)if(f=l.indexOf(" "+e+" ")>=0,c=c===d?!f:!!c)f||(l+=e+" ",j=!0);else for(;l.indexOf(" "+e+" ")>-1;)l=l.replace(" "+e+" "," ");return this.extraClasses=a.trim(l),j},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},triggerModifyChild:function(b,c,d){var e,f=this.tree.options.modifyChild;f&&(c&&c.parent!==this&&a.error("childNode "+c+" is not a child of "+this),e={node:this,tree:this.tree,operation:b,childNode:c||null},d&&a.extend(e,d),f({type:"modifyChild"},e))},triggerModify:function(a,b){this.parent.triggerModifyChild(a,this,b)},visit:function(a,b){var c,d,e=!0,f=this.children;if(b===!0&&(e=a(this),e===!1||"skip"===e))return e;if(f)for(c=0,d=f.length;c<d&&(e=f[c].visit(a,!0),e!==!1);c++);return e},visitAndLoad:function(b,c,d){var e,f,g,h=this;return b&&c===!0&&(f=b(h),f===!1||"skip"===f)?d?f:k():h.children||h.lazy?(e=new a.Deferred,g=[],h.load().done(function(){for(var c=0,d=h.children.length;c<d;c++){if(f=h.children[c].visitAndLoad(b,!0,!0),f===!1){e.reject();break}"skip"!==f&&g.push(f)}a.when.apply(this,g).then(function(){e.resolve()})}),e.promise()):k()},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},warn:function(a){Array.prototype.unshift.call(arguments,this.toString()),f("warn",arguments)}},t.prototype={_makeHookContext:function(b,c,e){var f,g;return b.node!==d?(c&&b.originalEvent!==c&&a.error("invalid args"),f=b):b.tree?(g=b.tree,f={node:b,tree:g,widget:g.widget,options:g.widget.options,originalEvent:c}):b.widget?f={node:null,tree:b,widget:b.widget,options:b.widget.options,originalEvent:c}:a.error("invalid args"),e&&a.extend(f,e),f},_callHook:function(b,c,d){var e=this._makeHookContext(c),f=this[b],g=Array.prototype.slice.call(arguments,2);return a.isFunction(f)||a.error("_callHook('"+b+"') is not a function"),g.unshift(e),f.apply(this,g)},_requireExtension:function(b,c,d,f){d=!!d;var g=this._local.name,h=this.options.extensions,i=a.inArray(b,h)<a.inArray(g,h),j=c&&null==this.ext[b],k=!j&&null!=d&&d!==i;return e(g&&g!==b,"invalid or same name"),!j&&!k||(f||(j||c?(f="'"+g+"' extension requires '"+b+"'",k&&(f+=" to be registered "+(d?"before":"after")+" itself")):f="If used together, `"+b+"` must be registered "+(d?"before":"after")+" `"+g+"`"),a.error(f),!1)},activateKey:function(a){var b=this.getNodeByKey(a);return b?b.setActive():this.activeNode&&this.activeNode.setActive(!1),b},addPagingNode:function(a,b){return this.rootNode.addPagingNode(a,b)},applyPatch:function(b){var c,d,f,g,h,i,j=b.length,k=[];for(d=0;d<j;d++)f=b[d],e(2===f.length,"patchList must be an array of length-2-arrays"),g=f[0],h=f[1],i=null===g?this.rootNode:this.getNodeByKey(g),i?(c=new a.Deferred,k.push(c),i.applyPatch(h).always(m(c,i))):this.warn("could not find node with key '"+g+"'");return a.when.apply(a,k).promise()},clear:function(a){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(a){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),f("log",arguments))},enableUpdate:function(a){return a=a!==!1,!!this._enableUpdate==!!a?a:(this._enableUpdate=a,a?(this.debug("enableUpdate(true): redraw ",this._dirtyRoots),this.render()):this.debug("enableUpdate(false)..."),!a)},findAll:function(a){return this.rootNode.findAll(a)},findFirst:function(a){return this.rootNode.findFirst(a)},findNextNode:function(b,c,d){var e=null,f=c.parent.children,g=null,h=function(a,b,c){var d,e,f=a.children,g=f.length,i=f[b];if(i&&c(i)===!1)return!1;if(i&&i.children&&i.expanded&&h(i,0,c)===!1)return!1;for(d=b+1;d<g;d++)if(h(a,d,c)===!1)return!1;return e=a.parent,e?h(e,e.children.indexOf(a)+1,c):h(a,0,c)};return b="string"==typeof b?r(b):b,c=c||this.getFirstChild(),h(c.parent,f.indexOf(c),function(d){return d!==e&&(e=e||d,a(d.span).is(":visible")?(!b(d)||(g=d,g===c))&&void 0:void d.debug("quicksearch: skipping hidden node"))}),g},generateFormElements:function(b,c,d){function e(b){j.append(a("<input>",{type:"checkbox",name:g,value:b.key,checked:!0}))}d=d||{};var f,g="string"==typeof b?b:"ft_"+this._id+"[]",h="string"==typeof c?c:"ft_"+this._id+"_active",i="fancytree_result_"+this._id,j=a("#"+i),k=3===this.options.selectMode&&d.stopOnParents!==!1;j.length?j.empty():j=a("<div>",{id:i}).hide().insertAfter(this.$container),c!==!1&&this.activeNode&&j.append(a("<input>",{type:"radio",name:h,value:this.activeNode.key,checked:!0})),d.filter?this.visit(function(a){var b=d.filter(a);return"skip"===b?b:void(b!==!1&&e(a))}):b!==!1&&(f=this.getSelectedNodes(k),a.each(f,function(a,b){e(b)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(a,b){var d,e;return!b&&(d=c.getElementById(this.options.idPrefix+a))?d.ftnode?d.ftnode:null:(b=b||this.rootNode,e=null,b.visit(function(b){if(b.key===a)return e=b,!1},!0),e)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(a){return this.rootNode.getSelectedNodes(a)},hasFocus:function(){return!!this._hasFocus},info:function(a){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),f("info",arguments))},loadKeyPath:function(b,c,e){function f(a,b,d){c.call(r,b,"loading"),b.load().done(function(){r.loadKeyPath.call(r,l[a],c,b).always(m(d,r))}).fail(function(e){r.warn("loadKeyPath: error loading: "+a+" (parent: "+o+")"),c.call(r,b,"error"),d.reject()})}var g,h,i,j,k,l,n,o,p,q=this.options.keyPathSeparator,r=this;for(c=c||a.noop,a.isArray(b)||(b=[b]),l={},i=0;i<b.length;i++)for(o=e||this.rootNode,j=b[i],j.charAt(0)===q&&(j=j.substr(1)),p=j.split(q);p.length;){if(k=p.shift(),n=o._findDirectChild(k),!n){this.warn("loadKeyPath: key not found: "+k+" (parent: "+o+")"),c.call(this,k,"error");break}if(0===p.length){c.call(this,n,"ok");break}if(n.lazy&&n.hasChildren()===d){c.call(this,n,"loaded"),l[k]?l[k].push(p.join(q)):l[k]=[p.join(q)];break}c.call(this,n,"loaded"),o=n}g=[];for(k in l)n=o._findDirectChild(k),null==n&&(n=r.getNodeByKey(k)),h=new a.Deferred,g.push(h),f(k,n,h);return a.when.apply(a,g).promise()},reactivate:function(a){var b,c=this.activeNode;return c?(this.activeNode=null,b=c.setActive(!0,{noFocus:!0}),a&&c.setFocus(),b):k()},reload:function(a){return this._callHook("treeClear",this),this._callHook("treeLoad",this,a)},render:function(a,b){return this.rootNode.render(a,b)},setFocus:function(a){return this._callHook("treeSetFocus",this,a)},toDict:function(a,b){var c=this.rootNode.toDict(!0,b);return a?c:c.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(a,b,c,e){var f=this._makeHookContext(b,c,e),g=this.widget._trigger(a,c,f);return g!==!1&&f.result!==d?f.result:g},_triggerTreeEvent:function(a,b,c){var e=this._makeHookContext(this,b,c),f=this.widget._trigger(a,b,e);return f!==!1&&e.result!==d?e.result:f},visit:function(a){return this.rootNode.visit(a,!1)},warn:function(a){Array.prototype.unshift.call(arguments,this.toString()),f("warn",arguments)}},a.extend(t.prototype,{nodeClick:function(a){var b,c,d=a.targetType,e=a.node;if("expander"===d){if(e.isLoading())return void e.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",a)}else if("checkbox"===d)this._callHook("nodeToggleSelected",a),a.options.focusOnSelect&&this._callHook("nodeSetFocus",a,!0);else{if(c=!1,b=!0,e.folder)switch(a.options.clickFolderMode){case 2:c=!0,b=!1;break;case 3:b=!0,c=!0}b&&(this.nodeSetFocus(a),this._callHook("nodeSetActive",a,!0)),c&&this._callHook("nodeToggleExpanded",a)}},nodeCollapseSiblings:function(a,b){var c,d,e,f=a.node;if(f.parent)for(c=f.parent.children,d=0,e=c.length;d<e;d++)c[d]!==f&&c[d].expanded&&this._callHook("nodeSetExpanded",c[d],!1,b)},nodeDblclick:function(a){"title"===a.targetType&&4===a.options.clickFolderMode&&this._callHook("nodeToggleExpanded",a),"title"===a.targetType&&a.originalEvent.preventDefault()},nodeKeydown:function(b){var c,d,e,f,g=b.originalEvent,h=b.node,i=b.tree,j=b.options,k=g.which,l=String.fromCharCode(k),m=!(g.altKey||g.ctrlKey||g.metaKey||g.shiftKey),n=a(g.target),o=!0,p=!(g.ctrlKey||!j.autoActivate);if(h||(f=this.getActiveNode()||this.getFirstChild(),f&&(f.setFocus(),h=b.node=this.focusNode,h.debug("Keydown force focus on active node"))),j.quicksearch&&m&&/\w/.test(l)&&!D[k]&&!n.is(":input:enabled"))return d=(new Date).getTime(),d-i.lastQuicksearchTime>500&&(i.lastQuicksearchTerm=""),i.lastQuicksearchTime=d,i.lastQuicksearchTerm+=l,c=i.findNextNode(i.lastQuicksearchTerm,i.getActiveNode()),c&&c.setActive(),void g.preventDefault();switch(w.eventToString(g)){case"+":case"=":i.nodeSetExpanded(b,!0);break;case"-":i.nodeSetExpanded(b,!1);break;case"space":h.isPagingNode()?i._triggerNodeEvent("clickPaging",b,g):j.checkbox?i.nodeToggleSelected(b):i.nodeSetActive(b,!0);break;case"return":i.nodeSetActive(b,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":e=h.navigate(g.which,p,!0);break;default:o=!1}o&&g.preventDefault()},nodeLoadChildren:function(b,c){var d,f,g,h=b.tree,i=b.node,j=(new Date).getTime();return a.isFunction(c)&&(c=c.call(h,{type:"source"},b),e(!a.isFunction(c),"source callback must not return another function")),c.url&&(i._requestId&&i.warn("Recursive load request #"+j+" while #"+i._requestId+" is pending."),d=a.extend({},b.options.ajax,c),i._requestId=j,d.debugDelay?(f=d.debugDelay,a.isArray(f)&&(f=f[0]+Math.random()*(f[1]-f[0])),i.warn("nodeLoadChildren waiting debugDelay "+Math.round(f)+" ms ..."),d.debugDelay=!1,g=a.Deferred(function(b){setTimeout(function(){a.ajax(d).done(function(){b.resolveWith(this,arguments)}).fail(function(){b.rejectWith(this,arguments)})},f)})):g=a.ajax(d),c=new a.Deferred,g.done(function(d,e,f){var g,k;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof d||a.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),i._requestId&&i._requestId>j)return void c.rejectWith(this,[A]);if(b.options.postProcess){try{k=h._triggerNodeEvent("postProcess",b,b.originalEvent,{response:d,error:null,dataType:this.dataType})}catch(l){k={error:l,message:""+l,details:"postProcess failed"}}if(k.error)return g=a.isPlainObject(k.error)?k.error:{message:k.error},g=h._makeHookContext(i,null,g),void c.rejectWith(this,[g]);d=a.isArray(k)?k:d}else d&&d.hasOwnProperty("d")&&b.options.enableAspx&&(d="string"==typeof d.d?a.parseJSON(d.d):d.d);c.resolveWith(this,[d])}).fail(function(a,b,d){var e=h._makeHookContext(i,null,{error:a,args:Array.prototype.slice.call(arguments),message:d,details:a.status+": "+d});c.rejectWith(this,[e])})),a.isFunction(c.then)&&a.isFunction(c["catch"])&&(g=c,c=new a.Deferred,g.then(function(a){c.resolve(a)},function(a){c.reject(a)})),a.isFunction(c.promise)&&(h.nodeSetStatus(b,"loading"),c.done(function(a){h.nodeSetStatus(b,"ok"),i._requestId=null}).fail(function(a){var c;return a===A?void i.warn("Ignored response for obsolete load request #"+j+" (expected #"+i._requestId+")"):(a.node&&a.error&&a.message?c=a:(c=h._makeHookContext(i,null,{error:a,args:Array.prototype.slice.call(arguments),message:a?a.message||a.toString():""}),"[object Object]"===c.message&&(c.message="")),i.warn("Load children failed ("+c.message+")",c),void(h._triggerNodeEvent("loadError",c,null)!==!1&&h.nodeSetStatus(b,"error",c.message,c.details)))})),
a.when(c).done(function(b){var c;a.isPlainObject(b)&&(e(i.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),e(a.isArray(b.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),c=b,b=b.children,delete c.children,a.extend(h.data,c)),e(a.isArray(b),"expected array of children"),i._setChildren(b),h._triggerNodeEvent("loadChildren",i)})},nodeLoadKeyPath:function(a,b){},nodeRemoveChild:function(b,c){var d,f=b.node,g=a.extend({},b,{node:c}),h=f.children;return 1===h.length?(e(c===h[0],"invalid single child"),this.nodeRemoveChildren(b)):(this.activeNode&&(c===this.activeNode||this.activeNode.isDescendantOf(c))&&this.activeNode.setActive(!1),this.focusNode&&(c===this.focusNode||this.focusNode.isDescendantOf(c))&&(this.focusNode=null),this.nodeRemoveMarkup(g),this.nodeRemoveChildren(g),d=a.inArray(c,h),e(d>=0,"invalid child"),f.triggerModifyChild("remove",c),c.visit(function(a){a.parent=null},!0),this._callHook("treeRegisterNode",this,!1,c),void h.splice(d,1))},nodeRemoveChildMarkup:function(b){var c=b.node;c.ul&&(c.isRootNode()?a(c.ul).empty():(a(c.ul).remove(),c.ul=null),c.visit(function(a){a.li=a.ul=null}))},nodeRemoveChildren:function(b){var c,d=b.tree,e=b.node,f=e.children;f&&(this.activeNode&&this.activeNode.isDescendantOf(e)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(e)&&(this.focusNode=null),this.nodeRemoveChildMarkup(b),c=a.extend({},b),e.triggerModifyChild("remove",null),e.visit(function(a){a.parent=null,d._callHook("treeRegisterNode",d,!1,a)}),e.lazy?e.children=[]:e.children=null,e.isRootNode()||(e.expanded=!1),this.nodeRenderStatus(b))},nodeRemoveMarkup:function(b){var c=b.node;c.li&&(a(c.li).remove(),c.li=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,d,f,g,h){var i,j,k,l,m,n,o,p=b.node,q=b.tree,r=b.options,s=r.aria,t=!1,u=p.parent,v=!u,w=p.children,x=null;if(q._enableUpdate!==!1&&(v||u.ul)){if(e(v||u.ul,"parent UL must exist"),v||(p.li&&(d||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?x=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(b)),p.li?this.nodeRenderStatus(b):(t=!0,p.li=c.createElement("li"),p.li.ftnode=p,p.key&&r.generateIds&&(p.li.id=r.idPrefix+p.key),p.span=c.createElement("span"),p.span.className="fancytree-node",s&&a(p.li).attr("aria-labelledby","ftal_"+r.idPrefix+p.key),p.li.appendChild(p.span),this.nodeRenderTitle(b),r.createNode&&r.createNode.call(q,{type:"createNode"},b)),r.renderNode&&r.renderNode.call(q,{type:"renderNode"},b)),w){if(v||p.expanded||f===!0){for(p.ul||(p.ul=c.createElement("ul"),(g!==!0||h)&&p.expanded||(p.ul.style.display="none"),s&&a(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),l=0,m=w.length;l<m;l++)o=a.extend({},b,{node:w[l]}),this.nodeRender(o,d,f,!1,!0);for(i=p.ul.firstChild;i;)k=i.ftnode,k&&k.parent!==p?(p.debug("_fixParent: remove missing "+k,i),n=i.nextSibling,i.parentNode.removeChild(i),i=n):i=i.nextSibling;for(i=p.ul.firstChild,l=0,m=w.length-1;l<m;l++)j=w[l],k=i.ftnode,j!==k?p.ul.insertBefore(j.li,k.li):i=i.nextSibling}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(b));v||t&&u.ul.insertBefore(p.li,x)}},nodeRenderTitle:function(b,c){var e,f,g,h,i,j,k=b.node,l=b.tree,m=b.options,n=m.aria,q=k.getLevel(),r=[];c!==d&&(k.title=c),k.span&&l._enableUpdate!==!1&&(q<m.minExpandLevel?(k.lazy||(k.expanded=!0),q>1&&(n?r.push("<span role='button' class='fancytree-expander fancytree-expander-fixed'></span>"):r.push("<span class='fancytree-expander fancytree-expander-fixed''></span>"))):n?r.push("<span role='button' class='fancytree-expander'></span>"):r.push("<span class='fancytree-expander'></span>"),m.checkbox&&k.hideCheckbox!==!0&&!k.isStatusNode()&&(n?r.push("<span role='checkbox' class='fancytree-checkbox'></span>"):r.push("<span class='fancytree-checkbox'></span>")),k.data.iconClass!==d&&(k.icon?a.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(k.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),k.icon=k.data.iconClass)),a.isFunction(m.icon)?(f=m.icon.call(l,{type:"icon"},b),null==f&&(f=k.icon)):f=null!=k.icon?k.icon:m.icon,null==f?f=!0:"boolean"!=typeof f&&(f=""+f),f!==!1&&(h=n?" role='img'":"","string"==typeof f?x.test(f)?(f="/"===f.charAt(0)?f:(m.imagePath||"")+f,r.push("<img src='"+f+"' class='fancytree-icon' alt='' />")):r.push("<span "+h+" class='fancytree-custom-icon "+f+"'></span>"):r.push("<span "+h+" class='fancytree-icon'></span>")),g="",m.renderTitle&&(g=m.renderTitle.call(l,{type:"renderTitle"},b)||""),g||(k.tooltip?j=k.tooltip:m.tooltip&&(j=m.tooltip===!0?k.title:m.tooltip.call(l,k)),j=j?" title='"+p(j)+"'":"",e=n?" id='ftal_"+m.idPrefix+k.key+"'":"",h=n?" role='treeitem'":"",i=m.titlesTabbable?" tabindex='0'":"",g="<span "+h+" class='fancytree-title'"+e+j+i+">"+(m.escapeTitles?o(k.title):k.title)+"</span>"),r.push(g),k.span.innerHTML=r.join(""),this.nodeRenderStatus(b),m.enhanceTitle&&(b.$title=a(">span.fancytree-title",k.span),g=m.enhanceTitle.call(l,{type:"enhanceTitle"},b)||""))},nodeRenderStatus:function(b){var c=b.node,d=b.tree,e=b.options,f=c.hasChildren(),g=c.isLastSibling(),h=e.aria,i=a(c.span).find(".fancytree-title"),j=e._classNames,k=[],l=c[d.statusClassPropName];l&&d._enableUpdate!==!1&&(k.push(j.node),d.activeNode===c&&k.push(j.active),d.focusNode===c&&k.push(j.focused),c.expanded?(k.push(j.expanded),h&&i.attr("aria-expanded",!0)):h&&(f?i.attr("aria-expanded",!1):i.removeAttr("aria-expanded")),c.folder&&k.push(j.folder),f!==!1&&k.push(j.hasChildren),g&&k.push(j.lastsib),c.lazy&&null==c.children&&k.push(j.lazy),c.partload&&k.push(j.partload),c.partsel&&k.push(j.partsel),c.unselectable&&k.push(j.unselectable),c._isLoading&&k.push(j.loading),c._error&&k.push(j.error),c.statusNodeType&&k.push(j.statusNodePrefix+c.statusNodeType),c.selected?(k.push(j.selected),h&&i.attr("aria-selected",!0)):h&&i.attr("aria-selected",!1),c.extraClasses&&k.push(c.extraClasses),f===!1?k.push(j.combinedExpanderPrefix+"n"+(g?"l":"")):k.push(j.combinedExpanderPrefix+(c.expanded?"e":"c")+(c.lazy&&null==c.children?"d":"")+(g?"l":"")),k.push(j.combinedIconPrefix+(c.expanded?"e":"c")+(c.folder?"f":"")),l.className=k.join(" "),c.li&&(c.li.className=g?j.lastsib:""))},nodeSetActive:function(b,c,d){d=d||{};var f,g=b.node,h=b.tree,i=b.options,j=d.noEvents===!0,m=d.noFocus===!0,n=g===h.activeNode;return c=c!==!1,n===c?k(g):c&&!j&&this._triggerNodeEvent("beforeActivate",g,b.originalEvent)===!1?l(g,["rejected"]):(c?(h.activeNode&&(e(h.activeNode!==g,"node was active (inconsistency)"),f=a.extend({},b,{node:h.activeNode}),h.nodeSetActive(f,!1),e(null===h.activeNode,"deactivate was out of sync?")),i.activeVisible&&g.makeVisible({scrollIntoView:m&&null==h.focusNode}),h.activeNode=g,h.nodeRenderStatus(b),m||h.nodeSetFocus(b),j||h._triggerNodeEvent("activate",g,b.originalEvent)):(e(h.activeNode===g,"node was not active (inconsistency)"),h.activeNode=null,this.nodeRenderStatus(b),j||b.tree._triggerNodeEvent("deactivate",g,b.originalEvent)),k(g))},nodeSetExpanded:function(b,c,e){e=e||{};var f,g,h,i,j,m,n=b.node,o=b.tree,p=b.options,q=e.noAnimation===!0,r=e.noEvents===!0;if(c=c!==!1,n.expanded&&c||!n.expanded&&!c)return k(n);if(c&&!n.lazy&&!n.hasChildren())return k(n);if(!c&&n.getLevel()<p.minExpandLevel)return l(n,["locked"]);if(!r&&this._triggerNodeEvent("beforeExpand",n,b.originalEvent)===!1)return l(n,["rejected"]);if(q||n.isVisible()||(q=e.noAnimation=!0),g=new a.Deferred,c&&!n.expanded&&p.autoCollapse){j=n.getParentList(!1,!0),m=p.autoCollapse;try{for(p.autoCollapse=!1,h=0,i=j.length;h<i;h++)this._callHook("nodeCollapseSiblings",j[h],e)}finally{p.autoCollapse=m}}return g.done(function(){var a=n.getLastChild();c&&p.autoScroll&&!q&&a?a.scrollIntoView(!0,{topNode:n}).always(function(){r||b.tree._triggerNodeEvent(c?"expand":"collapse",b)}):r||b.tree._triggerNodeEvent(c?"expand":"collapse",b)}),f=function(d){var e,f,g=p.toggleEffect;if(n.expanded=c,o._callHook("nodeRender",b,!1,!1,!0),n.ul)if(e="none"!==n.ul.style.display,f=!!n.expanded,e===f)n.warn("nodeSetExpanded: UL.style.display already set");else{if(g&&!q)return void a(n.ul).toggle(g.effect,g.options,g.duration,function(){d()});n.ul.style.display=n.expanded||!parent?"":"none"}d()},c&&n.lazy&&n.hasChildren()===d?n.load().done(function(){g.notifyWith&&g.notifyWith(n,["loaded"]),f(function(){g.resolveWith(n)})}).fail(function(a){f(function(){g.rejectWith(n,["load failed ("+a+")"])})}):f(function(){g.resolveWith(n)}),g.promise()},nodeSetFocus:function(b,d){var e,f=b.tree,g=b.node,h=f.options,i=!!b.originalEvent&&a(b.originalEvent.target).is(":input");if(d=d!==!1,f.focusNode){if(f.focusNode===g&&d)return;e=a.extend({},b,{node:f.focusNode}),f.focusNode=null,this._triggerNodeEvent("blur",e),this._callHook("nodeRenderStatus",e)}d&&(this.hasFocus()||(g.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",b,!0,{calledByNode:!0})),g.makeVisible({scrollIntoView:!1}),f.focusNode=g,h.titlesTabbable?i||a(g.span).find(".fancytree-title").focus():0===a(c.activeElement).closest(".fancytree-container").length&&a(f.$container).focus(),h.aria&&a(f.$container).attr("aria-activedescendant","ftal_"+h.idPrefix+g.key),this._triggerNodeEvent("focus",b),h.autoScroll&&g.scrollIntoView(),this._callHook("nodeRenderStatus",b))},nodeSetSelected:function(a,b){var c=a.node,d=a.tree,e=a.options;if(b=b!==!1,!c.unselectable){if(c.selected&&b||!c.selected&&!b)return!!c.selected;if(this._triggerNodeEvent("beforeSelect",c,a.originalEvent)===!1)return!!c.selected;b&&1===e.selectMode?d.lastSelectedNode&&d.lastSelectedNode.setSelected(!1):3===e.selectMode&&(c.selected=b,c.fixSelection3AfterClick()),c.selected=b,this.nodeRenderStatus(a),d.lastSelectedNode=b?c:null,d._triggerNodeEvent("select",a)}},nodeSetStatus:function(b,c,d,e){function f(){var a=h.children?h.children[0]:null;if(a&&a.isStatusNode()){try{h.ul&&(h.ul.removeChild(a.li),a.li=null)}catch(b){}1===h.children.length?h.children=[]:h.children.shift()}}function g(b,c){var d=h.children?h.children[0]:null;return d&&d.isStatusNode()?(a.extend(d,b),d.statusNodeType=c,i._callHook("nodeRenderTitle",d)):(h._setChildren([b]),h.children[0].statusNodeType=c,i.render()),h.children[0]}var h=b.node,i=b.tree;switch(c){case"ok":f(),h._isLoading=!1,h._error=null,h.renderStatus();break;case"loading":h.parent||g({title:i.options.strings.loading+(d?" ("+d+")":""),checkbox:!1,tooltip:e},c),h._isLoading=!0,h._error=null,h.renderStatus();break;case"error":g({title:i.options.strings.loadError+(d?" ("+d+")":""),checkbox:!1,tooltip:e},c),h._isLoading=!1,h._error={message:d,details:e},h.renderStatus();break;case"nodata":g({title:i.options.strings.noData,checkbox:!1,tooltip:e},c),h._isLoading=!1,h._error=null,h.renderStatus();break;default:a.error("invalid node status "+c)}},nodeToggleExpanded:function(a){return this.nodeSetExpanded(a,!a.node.expanded)},nodeToggleSelected:function(a){return this.nodeSetSelected(a,!a.node.selected)},treeClear:function(a){var b=a.tree;b.activeNode=null,b.focusNode=null,b.$div.find(">ul.fancytree-container").empty(),b.rootNode.children=null},treeCreate:function(a){},treeDestroy:function(a){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(a){this.treeLoad(a)},treeLoad:function(b,c){var d,f,g,h,i=b.tree,j=b.widget.element,k=a.extend({},b,{node:this.rootNode});if(i.rootNode.children&&this.treeClear(b),c=c||this.options.source)"string"==typeof c&&a.error("Not implemented");else switch(f=j.data("type")||"html"){case"html":g=j.find(">ul:first"),g.addClass("ui-fancytree-source ui-helper-hidden"),c=a.ui.fancytree.parseHtml(g),this.data=a.extend(this.data,n(g));break;case"json":c=a.parseJSON(j.text()),j.contents().filter(function(){return 3===this.nodeType}).remove(),a.isPlainObject(c)&&(e(a.isArray(c.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),d=c,c=c.children,delete d.children,a.extend(i.data,d));break;default:a.error("Invalid data-type: "+f)}return h=this.nodeLoadChildren(k,c).done(function(){i.render(),3===b.options.selectMode&&i.rootNode.fixSelection3FromEndNodes(),i.activeNode&&i.options.activeVisible&&i.activeNode.makeVisible(),i._triggerTreeEvent("init",null,{status:!0})}).fail(function(){i.render(),i._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(a,b,c){},treeSetFocus:function(b,c,d){c=c!==!1,c!==this.hasFocus()&&(this._hasFocus=c,!c&&this.focusNode?this.focusNode.setFocus(!1):!c||d&&d.calledByNode||a(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",c),this._triggerTreeEvent(c?"focusTree":"blurTree"),c&&!this.activeNode&&this.getFirstChild()&&this.getFirstChild().setFocus())},treeSetOption:function(b,c,d){var e=b.tree,f=!0,g=!1;switch(c){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":e._callHook("treeCreate",e),g=!0;break;case"escapeTitles":case"tooltip":g=!0;break;case"rtl":d===!1?e.$container.attr("DIR",null).removeClass("fancytree-rtl"):e.$container.attr("DIR","RTL").addClass("fancytree-rtl"),g=!0;break;case"source":f=!1,e._callHook("treeLoad",e,d),g=!0}e.debug("set option "+c+"="+d+" <"+typeof d+">"),f&&(this.widget._super?this.widget._super.call(this.widget,c,d):a.Widget.prototype._setOption.call(this.widget,c,d)),g&&e.render(!0,!1)}}),a.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!1,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!",moreData:"More&#8230;",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new t(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var b,c,f,g=this.options,h=g.extensions,i=this.tree;for(f=0;f<h.length;f++)c=h[f],b=a.ui.fancytree._extensions[c],b||a.error("Could not apply extension '"+c+"' (it is not registered, did you forget to include it?)"),this.tree.options[c]=a.extend(!0,{},b.options,this.tree.options[c]),e(this.tree.ext[c]===d,"Extension name must not exist as Fancytree.ext attribute: '"+c+"'"),this.tree.ext[c]={},j(this.tree,i,b,c),i=b;g.icons!==d&&(g.icon!==!0?a.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),g.icon=g.icons)),g.iconClass!==d&&(g.icon?a.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),g.icon=g.iconClass)),g.tabbable!==d&&(g.tabindex=g.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+g.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(a,b){return this.tree._callHook("treeSetOption",this.tree,a,b)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),a.Widget.prototype.destroy.call(this)},_unbind:function(){var b=this.tree._ns;this.element.unbind(b),this.tree.$container.unbind(b),a(c).unbind(b)},_bind:function(){var a=this,b=this.options,c=this.tree,d=c._ns;this._unbind(),c.$container.on("focusin"+d+" focusout"+d,function(a){var b=w.getNode(a),d="focusin"===a.type;b?c._callHook("nodeSetFocus",c._makeHookContext(b,a),d):c._callHook("treeSetFocus",c,d)}).on("selectstart"+d,"span.fancytree-title",function(a){a.preventDefault()}).on("keydown"+d,function(a){if(b.disabled||b.keyboard===!1)return!0;var d,e=c.focusNode,f=c._makeHookContext(e||c,a),g=c.phase;try{return c.phase="userEvent",d=e?c._triggerNodeEvent("keydown",e,a):c._triggerTreeEvent("keydown",a),"preventNav"===d?d=!0:d!==!1&&(d=c._callHook("nodeKeydown",f)),d}finally{c.phase=g}}).on("click"+d+" dblclick"+d,function(c){if(b.disabled)return!0;var d,e=w.getEventTarget(c),f=e.node,g=a.tree,h=g.phase;if(!f)return!0;d=g._makeHookContext(f,c);try{switch(g.phase="userEvent",c.type){case"click":return d.targetType=e.type,f.isPagingNode()?g._triggerNodeEvent("clickPaging",d,c)===!0:g._triggerNodeEvent("click",d,c)!==!1&&g._callHook("nodeClick",d);case"dblclick":return d.targetType=e.type,g._triggerNodeEvent("dblclick",d,c)!==!1&&g._callHook("nodeDblclick",d)}}finally{g.phase=h}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(a){return this.tree.getNodeByKey(a)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),w=a.ui.fancytree,a.extend(a.ui.fancytree,{version:"2.21.0",buildType: "production",debugLevel: 1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:t,_FancytreeNodeClass:s,jquerySupports:{positionMyOfs:h(a.ui.version,1,9)},assert:function(a,b){return e(a,b)},debounce:function(a,b,c,d){var e;return 3===arguments.length&&"boolean"!=typeof c&&(d=c,c=!1),function(){var f=arguments;d=d||this,c&&!e&&b.apply(d,f),clearTimeout(e),e=setTimeout(function(){c||b.apply(d,f),e=null},a)}},debug:function(b){a.ui.fancytree.debugLevel>=2&&f("log",arguments)},error:function(a){f("error",arguments)},escapeHtml:o,fixPositionOptions:function(b){if((b.offset||(""+b.my+b.at).indexOf("%")>=0)&&a.error("expected new position syntax (but '%' is not supported)"),!a.ui.fancytree.jquerySupports.positionMyOfs){var c=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(b.my),d=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(b.at),e=(c[2]?+c[2]:0)+(d[2]?+d[2]:0),f=(c[4]?+c[4]:0)+(d[4]?+d[4]:0);b=a.extend({},b,{my:c[1]+" "+c[3],at:d[1]+" "+d[3]}),(e||f)&&(b.offset=""+e+" "+f)}return b},getEventTargetType:function(a){return this.getEventTarget(a).type},getEventTarget:function(b){var c=b&&b.target?b.target.className:"",e={node:this.getNode(b.target),type:d};return/\bfancytree-title\b/.test(c)?e.type="title":/\bfancytree-expander\b/.test(c)?e.type=e.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(c)||/\bfancytree-radio\b/.test(c)?e.type="checkbox":/\bfancytree-icon\b/.test(c)?e.type="icon":/\bfancytree-node\b/.test(c)?e.type="title":b&&b.target&&a(b.target).closest(".fancytree-title").length&&(e.type="title"),e},getNode:function(a){if(a instanceof s)return a;for(a.selector!==d?a=a[0]:a.originalEvent!==d&&(a=a.target);a;){if(a.ftnode)return a.ftnode;a=a.parentNode}return null},getTree:function(b){var c;return b instanceof t?b:(b===d&&(b=0),"number"==typeof b?b=a(".fancytree-container").eq(b):"string"==typeof b?b=a(b).eq(0):b.selector!==d?b=b.eq(0):b.originalEvent!==d&&(b=a(b.target)),b=b.closest(":ui-fancytree"),c=b.data("ui-fancytree")||b.data("fancytree"),c?c.tree:null)},eventToString:function(a){var b=a.which,c=a.type,d=[];return a.altKey&&d.push("alt"),a.ctrlKey&&d.push("ctrl"),a.metaKey&&d.push("meta"),a.shiftKey&&d.push("shift"),"click"===c||"dblclick"===c?d.push(E[a.button]+c):C[b]||d.push(D[b]||String.fromCharCode(b).toLowerCase()),d.join("+")},info:function(b){a.ui.fancytree.debugLevel>=1&&f("info",arguments)},keyEventToString:function(a){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(a)},overrideMethod:function(b,c,d){var e,f=b[c]||a.noop;b[c]=function(){try{return e=this._super,this._super=f,d.apply(this,arguments)}finally{this._super=e}}},parseHtml:function(b){var c,e,f,g,h,i,j,k,l=b.find(">li"),m=[];return l.each(function(){var l,o,p=a(this),q=p.find(">span:first",this),r=q.length?null:p.find(">a:first"),s={tooltip:null,data:{}};for(q.length?s.title=q.html():r&&r.length?(s.title=r.html(),s.data.href=r.attr("href"),s.data.target=r.attr("target"),s.tooltip=r.attr("title")):(s.title=p.html(),h=s.title.search(/<ul/i),h>=0&&(s.title=s.title.substring(0,h))),s.title=a.trim(s.title),g=0,i=F.length;g<i;g++)s[F[g]]=d;for(c=this.className.split(" "),f=[],g=0,i=c.length;g<i;g++)e=c[g],G[e]?s[e]=!0:f.push(e);if(s.extraClasses=f.join(" "),j=p.attr("title"),j&&(s.tooltip=j),j=p.attr("id"),j&&(s.key=j),l=n(p),l&&!a.isEmptyObject(l)){for(o in J)l.hasOwnProperty(o)&&(l[J[o]]=l[o],delete l[o]);for(g=0,i=H.length;g<i;g++)j=H[g],k=l[j],null!=k&&(delete l[j],s[j]=k);a.extend(s.data,l)}b=p.find(">ul:first"),b.length?s.children=a.ui.fancytree.parseHtml(b):s.children=s.lazy?d:null,m.push(s)}),m},registerExtension:function(b){e(null!=b.name,"extensions must have a `name` property."),e(null!=b.version,"extensions must have a `version` property."),a.ui.fancytree._extensions[b.name]=b},unescapeHtml:function(a){var b=c.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].nodeValue},warn:function(a){f("warn",arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.childcounter.min.js' */
!function(a,b){"use strict";a.ui.fancytree._FancytreeClass.prototype.countSelected=function(a){var b=this;b.options;return b.getSelectedNodes(a).length},a.ui.fancytree._FancytreeNodeClass.prototype.updateCounters=function(){var b=this,c=a("span.fancytree-childcounter",b.span),d=b.tree.options.childcounter,e=b.countChildren(d.deep);b.data.childCounter=e,!e&&d.hideZeros||b.isExpanded()&&d.hideExpanded?c.remove():(c.length||(c=a("<span class='fancytree-childcounter'/>").appendTo(a("span.fancytree-icon",b.span))),c.text(e)),!d.deep||b.isTopLevel()||b.isRoot()||b.parent.updateCounters()},a.ui.fancytree.prototype.widgetMethod1=function(a){this.tree;return a},a.ui.fancytree.registerExtension({name:"childcounter",version:"2.21.0",options:{deep:!0,hideZeros:!0,hideExpanded:!1},foo:42,_appendCounter:function(a){},treeInit:function(a){a.options,a.options.childcounter;this._superApply(arguments),this.$container.addClass("fancytree-ext-childcounter")},treeDestroy:function(a){this._superApply(arguments)},nodeRenderTitle:function(b,c){var d=b.node,e=b.options.childcounter,f=null==d.data.childCounter?d.countChildren(e.deep):+d.data.childCounter;this._superApply(arguments),!f&&e.hideZeros||d.isExpanded()&&e.hideExpanded||a("span.fancytree-icon",d.span).append(a("<span class='fancytree-childcounter'/>").text(f))},nodeSetExpanded:function(a,b,c){var d=a.tree;a.node;return this._superApply(arguments).always(function(){d.nodeRenderTitle(a)})}})}(jQuery);

/*! Extension 'jquery.fancytree.clones.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){b||(c=c?": "+c:"",a.error("Assertion failed"+c))}function f(a,b){var c;for(c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0;return!1}function g(a,b,c){for(var d,e,f=3&a.length,g=a.length-f,h=c,i=3432918353,j=461845907,k=0;k<g;)e=255&a.charCodeAt(k)|(255&a.charCodeAt(++k))<<8|(255&a.charCodeAt(++k))<<16|(255&a.charCodeAt(++k))<<24,++k,e=(65535&e)*i+(((e>>>16)*i&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*j+(((e>>>16)*j&65535)<<16)&4294967295,h^=e,h=h<<13|h>>>19,d=5*(65535&h)+((5*(h>>>16)&65535)<<16)&4294967295,h=(65535&d)+27492+(((d>>>16)+58964&65535)<<16);switch(e=0,f){case 3:e^=(255&a.charCodeAt(k+2))<<16;case 2:e^=(255&a.charCodeAt(k+1))<<8;case 1:e^=255&a.charCodeAt(k),e=(65535&e)*i+(((e>>>16)*i&65535)<<16)&4294967295,e=e<<15|e>>>17,e=(65535&e)*j+(((e>>>16)*j&65535)<<16)&4294967295,h^=e}return h^=a.length,h^=h>>>16,h=2246822507*(65535&h)+((2246822507*(h>>>16)&65535)<<16)&4294967295,h^=h>>>13,h=3266489909*(65535&h)+((3266489909*(h>>>16)&65535)<<16)&4294967295,h^=h>>>16,b?("0000000"+(h>>>0).toString(16)).substr(-8):h>>>0}function h(b){var c,d=a.map(b.getParentList(!1,!0),function(a){return a.refKey||a.key});return d=d.join("/"),c="id_"+g(d,!0)}a.ui.fancytree._FancytreeNodeClass.prototype.getCloneList=function(b){var c,d=this.tree,e=d.refMap[this.refKey]||null,f=d.keyMap;return e&&(c=this.key,b?e=a.map(e,function(a){return f[a]}):(e=a.map(e,function(a){return a===c?null:f[a]}),e.length<1&&(e=null))),e},a.ui.fancytree._FancytreeNodeClass.prototype.isClone=function(){var a=this.refKey||null,b=a&&this.tree.refMap[a]||null;return!!(b&&b.length>1)},a.ui.fancytree._FancytreeNodeClass.prototype.reRegister=function(b,c){b=null==b?null:""+b,c=null==c?null:""+c;var d=this.tree,e=this.key,f=this.refKey,g=d.keyMap,h=d.refMap,i=h[f]||null,j=!1;return null!=b&&b!==this.key&&(g[b]&&a.error("[ext-clones] reRegister("+b+"): already exists: "+this),delete g[e],g[b]=this,i&&(h[f]=a.map(i,function(a){return a===e?b:a})),this.key=b,j=!0),null!=c&&c!==this.refKey&&(i&&(1===i.length?delete h[f]:h[f]=a.map(i,function(a){return a===e?null:a})),h[c]?h[c].append(b):h[c]=[this.key],this.refKey=c,j=!0),j},a.ui.fancytree._FancytreeNodeClass.prototype.setRefKey=function(a){return this.reRegister(null,a)},a.ui.fancytree._FancytreeClass.prototype.getNodesByRef=function(b,c){var d=this.keyMap,e=this.refMap[b]||null;return e&&(e=c?a.map(e,function(a){var b=d[a];return b.isDescendantOf(c)?b:null}):a.map(e,function(a){return d[a]}),e.length<1&&(e=null)),e},a.ui.fancytree._FancytreeClass.prototype.changeRefKey=function(a,b){var c,d,e=this.keyMap,f=this.refMap[a]||null;if(f){for(c=0;c<f.length;c++)d=e[f[c]],d.refKey=b;delete this.refMap[a],this.refMap[b]=f}},a.ui.fancytree.registerExtension({name:"clones",version:"2.21.0",options:{highlightActiveClones:!0,highlightClones:!1},treeCreate:function(a){this._superApply(arguments),a.tree.refMap={},a.tree.keyMap={}},treeInit:function(a){this.$container.addClass("fancytree-ext-clones"),e(null==a.options.defaultKey),a.options.defaultKey=function(a){return h(a)},this._superApply(arguments)},treeClear:function(a){return a.tree.refMap={},a.tree.keyMap={},this._superApply(arguments)},treeRegisterNode:function(b,c,d){var g,h,i=b.tree,j=i.keyMap,k=i.refMap,l=d.key,m=d&&null!=d.refKey?""+d.refKey:null;return d.isStatusNode()?this._superApply(arguments):(c?(null!=j[d.key]&&a.error("clones.treeRegisterNode: node.key already exists: "+d),j[l]=d,m&&(g=k[m],g?(g.push(l),2===g.length&&b.options.clones.highlightClones&&j[g[0]].renderStatus()):k[m]=[l])):(null==j[l]&&a.error("clones.treeRegisterNode: node.key not registered: "+d.key),delete j[l],m&&(g=k[m],g&&(h=g.length,h<=1?(e(1===h),e(g[0]===l),delete k[m]):(f(g,l),2===h&&b.options.clones.highlightClones&&j[g[0]].renderStatus())))),this._superApply(arguments))},nodeRenderStatus:function(b){var c,d,e=b.node;return d=this._superApply(arguments),b.options.clones.highlightClones&&(c=a(e[b.tree.statusClassPropName]),c.length&&e.isClone()&&c.addClass("fancytree-clone")),d},nodeSetActive:function(b,c){var d,e=b.tree.statusClassPropName,f=b.node;return d=this._superApply(arguments),b.options.clones.highlightActiveClones&&f.isClone()&&a.each(f.getCloneList(!0),function(b,d){a(d[e]).toggleClass("fancytree-active-clone",c!==!1)}),d}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.dnd.min.js' */
!function(a,b,c,d){"use strict";function e(a){return 0===a?"":a>0?"+"+a:""+a}function f(){h||(a.ui.plugin.add("draggable","connectToFancytree",{start:function(b,c){var d=a(this).data("ui-draggable")||a(this).data("draggable"),e=c.helper.data("ftSourceNode")||null;if(e)return d.offset.click.top=-2,d.offset.click.left=16,e.tree.ext.dnd._onDragEvent("start",e,null,b,c,d)},drag:function(b,c){var d,e,f,g=a(this).data("ui-draggable")||a(this).data("draggable"),h=c.helper.data("ftSourceNode")||null,i=c.helper.data("ftTargetNode")||null,j=a.ui.fancytree.getNode(b.target),k=h&&h.tree.options.dnd;return b.target&&!j&&(e=a(b.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0)?(f=h||i||a.ui.fancytree,void f.debug("Drag event over helper: ignored.")):(c.helper.data("ftTargetNode",j),k&&k.updateHelper&&(d=h.tree._makeHookContext(h,b,{otherNode:j,ui:c,draggable:g,dropMarker:a("#fancytree-drop-marker")}),k.updateHelper.call(h.tree,h,d)),i&&i!==j&&i.tree.ext.dnd._onDragEvent("leave",i,h,b,c,g),void(j&&j.tree.options.dnd.dragDrop&&(j===i?j.tree.ext.dnd._onDragEvent("over",j,h,b,c,g):(j.tree.ext.dnd._onDragEvent("enter",j,h,b,c,g),j.tree.ext.dnd._onDragEvent("over",j,h,b,c,g)))))},stop:function(b,c){var d,e=a(this).data("ui-draggable")||a(this).data("draggable"),f=c.helper.data("ftSourceNode")||null,g=c.helper.data("ftTargetNode")||null,h="mouseup"===b.type&&1===b.which;h||(d=f||g||a.ui.fancytree,d.debug("Drag was cancelled")),g&&(h&&g.tree.ext.dnd._onDragEvent("drop",g,f,b,c,e),g.tree.ext.dnd._onDragEvent("leave",g,f,b,c,e)),f&&f.tree.ext.dnd._onDragEvent("stop",f,null,b,c,e)}}),h=!0)}function g(b){var c=b.options.dnd||null,d=b.options.glyph||null;c&&f(),c&&c.dragStart&&b.widget.element.draggable(a.extend({addClasses:!1,appendTo:b.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(b){var c,e,f,g=a.ui.fancytree.getNode(b.target);return g?(f=g.tree.options.dnd,e=a(g.span),c=a("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(e.find("span.fancytree-title").clone()),c.data("ftSourceNode",g),d&&c.find(".fancytree-drag-helper-img").addClass(d.map.dragHelper),f.initHelper&&f.initHelper.call(g.tree,g,{node:g,tree:g.tree,originalEvent:b,ui:{helper:c}}),c):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(a,b){var c=b.helper.data("ftSourceNode");return!!c}},b.options.dnd.draggable)),c&&c.dragDrop&&b.widget.element.droppable(a.extend({addClasses:!1,tolerance:"intersect",greedy:!1},b.options.dnd.droppable))}var h=!1,i="fancytree-drop-accept",j="fancytree-drop-after",k="fancytree-drop-before",l="fancytree-drop-over",m="fancytree-drop-reject",n="fancytree-drop-target";a.ui.fancytree.registerExtension({name:"dnd",version:"2.21.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(b){var c=b.tree;this._superApply(arguments),c.options.dnd.dragStart&&c.$container.on("mousedown",function(c){if(b.options.dnd.focusOnClick){var d=a.ui.fancytree.getNode(c);d&&d.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){a(c.target).closest(":tabbable").focus()},10)}}),g(c)},_setDndStatus:function(b,c,d,f,g){var h,o="center",p=this._local,q=this.options.glyph||null,r=b?a(b.span):null,s=a(c.span),t=s.find(">span.fancytree-title");if(p.$dropMarker||(p.$dropMarker=a("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(a(this.$div).parent()),q&&p.$dropMarker.addClass(q.map.dropMarker)),"after"===f||"before"===f||"over"===f){switch(h=-24,f){case"before":o="top",h-=16;break;case"after":o="bottom",h-=16}p.$dropMarker.toggleClass(j,"after"===f).toggleClass(l,"over"===f).toggleClass(k,"before"===f).show().position(a.ui.fancytree.fixPositionOptions({my:"left"+e(h)+" center",at:"left "+o,of:t}))}else p.$dropMarker.hide();r&&r.toggleClass(i,g===!0).toggleClass(m,g===!1),s.toggleClass(n,"after"===f||"before"===f||"over"===f).toggleClass(j,"after"===f).toggleClass(k,"before"===f).toggleClass(i,g===!0).toggleClass(m,g===!1),d.toggleClass(i,g===!0).toggleClass(m,g===!1)},_onDragEvent:function(b,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=this.options,t=s.dnd,u=this._makeHookContext(e,g,{otherNode:f,ui:h,draggable:i}),v=null,w=this,x=a(e.span);switch(t.smartRevert&&(i.options.revert="invalid"),b){case"start":e.isStatusNode()?v=!1:t.dragStart&&(v=t.dragStart(e,u)),v===!1?(this.debug("tree.dragStart() cancelled"),h.helper.trigger("mouseup").hide()):(t.smartRevert&&(m=e[u.tree.nodeContainerAttrName].getBoundingClientRect(),l=a(i.options.appendTo)[0].getBoundingClientRect(),i.originalPosition.left=Math.max(0,m.left-l.left),i.originalPosition.top=Math.max(0,m.top-l.top)),x.addClass("fancytree-drag-source"),a(c).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",function(b){"keydown"===b.type&&b.which===a.ui.keyCode.ESCAPE?w.ext.dnd._cancelDrag():"mousedown"===b.type&&w.ext.dnd._cancelDrag()}));break;case"enter":r=(!t.preventRecursiveMoves||!e.isDescendantOf(f))&&(t.dragEnter?t.dragEnter(e,u):null),v=!!r&&(a.isArray(r)?{over:a.inArray("over",r)>=0,before:a.inArray("before",r)>=0,after:a.inArray("after",r)>=0}:{over:r===!0||"over"===r,before:r===!0||"before"===r,after:r===!0||"after"===r}),h.helper.data("enterResponse",v);break;case"over":p=h.helper.data("enterResponse"),q=null,p===!1||("string"==typeof p?q=p:(k=x.offset(),n={x:g.pageX-k.left,y:g.pageY-k.top},o={x:n.x/x.width(),y:n.y/x.height()},p.after&&o.y>.75?q="after":!p.over&&p.after&&o.y>.5?q="after":p.before&&o.y<=.25?q="before":!p.over&&p.before&&o.y<=.5?q="before":p.over&&(q="over"),t.preventVoidMoves&&(e===f?(this.debug("    drop over source node prevented"),q=null):"before"===q&&f&&e===f.getNextSibling()?(this.debug("    drop after source node prevented"),q=null):"after"===q&&f&&e===f.getPrevSibling()?(this.debug("    drop before source node prevented"),q=null):"over"===q&&f&&f.parent===e&&f.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),q=null)),h.helper.data("hitMode",q))),"before"===q||"after"===q||!t.autoExpandMS||e.hasChildren()===!1||e.expanded||t.dragExpand&&t.dragExpand(e,u)===!1||e.scheduleAction("expand",t.autoExpandMS),q&&t.dragOver&&(u.hitMode=q,v=t.dragOver(e,u)),j=v!==!1&&null!==q,t.smartRevert&&(i.options.revert=!j),this._local._setDndStatus(f,e,h.helper,q,j);break;case"drop":q=h.helper.data("hitMode"),q&&t.dragDrop&&(u.hitMode=q,t.dragDrop(e,u));break;case"leave":e.scheduleAction("cancel"),h.helper.data("enterResponse",null),h.helper.data("hitMode",null),this._local._setDndStatus(f,e,h.helper,"out",d),t.dragLeave&&t.dragLeave(e,u);break;case"stop":x.removeClass("fancytree-drag-source"),a(c).off(".fancytree-dnd"),t.dragStop&&t.dragStop(e,u);break;default:a.error("Unsupported drag event: "+b)}return v},_cancelDrag:function(){var b=a.ui.ddmanager.current;b&&b.cancel()}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.edit.min.js' */
!function(a,b,c,d){"use strict";var e=/Mac/.test(navigator.platform),f=a.ui.fancytree.escapeHtml,g=a.ui.fancytree.unescapeHtml;a.ui.fancytree._FancytreeNodeClass.prototype.editStart=function(){var b,d=this,e=this.tree,f=e.ext.edit,h=e.options.edit,i=a(".fancytree-title",d.span),j={node:d,tree:e,options:e.options,isNew:a(d[e.statusClassPropName]).hasClass("fancytree-edit-new"),orgTitle:d.title,input:null,dirty:!1};return h.beforeEdit.call(d,{type:"beforeEdit"},j)!==!1&&(a.ui.fancytree.assert(!f.currentNode,"recursive edit"),f.currentNode=this,f.eventData=j,e.widget._unbind(),a(c).on("mousedown.fancytree-edit",function(b){a(b.target).hasClass("fancytree-edit-input")||d.editEnd(!0,b)}),b=a("<input />",{"class":"fancytree-edit-input",type:"text",value:e.options.escapeTitles?j.orgTitle:g(j.orgTitle)}),f.eventData.input=b,null!=h.adjustWidthOfs&&b.width(i.width()+h.adjustWidthOfs),null!=h.inputCss&&b.css(h.inputCss),i.html(b),b.focus().change(function(a){b.addClass("fancytree-edit-dirty")}).keydown(function(b){switch(b.which){case a.ui.keyCode.ESCAPE:d.editEnd(!1,b);break;case a.ui.keyCode.ENTER:return d.editEnd(!0,b),!1}b.stopPropagation()}).blur(function(a){return d.editEnd(!0,a)}),void h.edit.call(d,{type:"edit"},j))},a.ui.fancytree._FancytreeNodeClass.prototype.editEnd=function(b,d){var e,g=this,h=this.tree,i=h.ext.edit,j=i.eventData,k=h.options.edit,l=a(".fancytree-title",g.span),m=l.find("input.fancytree-edit-input");return k.trim&&m.val(a.trim(m.val())),e=m.val(),j.dirty=e!==g.title,j.originalEvent=d,b===!1?j.save=!1:j.isNew?j.save=""!==e:j.save=j.dirty&&""!==e,k.beforeClose.call(g,{type:"beforeClose"},j)!==!1&&((!j.save||k.save.call(g,{type:"save"},j)!==!1)&&(m.removeClass("fancytree-edit-dirty").unbind(),a(c).off(".fancytree-edit"),j.save?(g.setTitle(h.options.escapeTitles?e:f(e)),g.setFocus()):j.isNew?(g.remove(),g=j.node=null,i.relatedNode.setFocus()):(g.renderTitle(),g.setFocus()),i.eventData=null,i.currentNode=null,i.relatedNode=null,h.widget._bind(),a(h.$container).focus(),j.input=null,k.close.call(g,{type:"close"},j),!0))},a.ui.fancytree._FancytreeNodeClass.prototype.editCreateNode=function(b,c){var d,e=this.tree,f=this;return b=b||"child",null==c?c={title:""}:"string"==typeof c?c={title:c}:a.ui.fancytree.assert(a.isPlainObject(c)),"child"!==b||this.isExpanded()||this.hasChildren()===!1?(d=this.addNode(c,b),d.match=!0,a(d[e.statusClassPropName]).removeClass("fancytree-hide").addClass("fancytree-match"),void d.makeVisible().done(function(){a(d[e.statusClassPropName]).addClass("fancytree-edit-new"),f.tree.ext.edit.relatedNode=f,d.editStart()})):void this.setExpanded().done(function(){f.editCreateNode(b,c)})},a.ui.fancytree._FancytreeClass.prototype.isEditing=function(){return this.ext.edit?this.ext.edit.currentNode:null},a.ui.fancytree._FancytreeNodeClass.prototype.isEditing=function(){return!!this.tree.ext.edit&&this.tree.ext.edit.currentNode===this},a.ui.fancytree.registerExtension({name:"edit",version:"2.21.0",options:{adjustWidthOfs:4,allowEmpty:!1,inputCss:{minWidth:"3em"},triggerStart:["f2","shift+click","mac+enter"],trim:!0,beforeClose:a.noop,beforeEdit:a.noop,close:a.noop,edit:a.noop,save:a.noop},currentNode:null,treeInit:function(a){this._superApply(arguments),this.$container.addClass("fancytree-ext-edit")},nodeClick:function(b){return a.inArray("shift+click",b.options.edit.triggerStart)>=0&&b.originalEvent.shiftKey?(b.node.editStart(),!1):this._superApply(arguments)},nodeDblclick:function(b){return a.inArray("dblclick",b.options.edit.triggerStart)>=0?(b.node.editStart(),!1):this._superApply(arguments)},nodeKeydown:function(b){switch(b.originalEvent.which){case 113:if(a.inArray("f2",b.options.edit.triggerStart)>=0)return b.node.editStart(),!1;break;case a.ui.keyCode.ENTER:if(a.inArray("mac+enter",b.options.edit.triggerStart)>=0&&e)return b.node.editStart(),!1}return this._superApply(arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.filter.min.js' */
!function(a,b,c,d){"use strict";function e(a){return(a+"").replace(/([.?*+\^\$\[\]\\(){}|-])/g,"\\$1")}function f(b){return b.indexOf(">")>=0?a("<div/>").html(b).text():b}var g="__not_found__",h=a.ui.fancytree.escapeHtml;a.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(b,c,d){var i,j,k,l,m=0,n=this.options,o=n.escapeTitles,p=n.autoCollapse,q=a.extend({},n.filter,d),r="hide"===q.mode,s=!!q.leavesOnly&&!c;return"string"==typeof b&&(i=q.fuzzy?b.split("").reduce(function(a,b){return a+"[^"+b+"]*"+b}):e(b),k=new RegExp(".*"+i+".*","i"),l=new RegExp(e(b),"gi"),b=function(a){var b,c=o?a.title:f(a.title),d=!!k.test(c);return d&&q.highlight&&(b=o?h(a.title):c,a.titleWithHighlight=b.replace(l,function(a){return"<mark>"+a+"</mark>"})),d}),this.enableFilter=!0,this.lastFilterArgs=arguments,this.$div.addClass("fancytree-ext-filter"),r?this.$div.addClass("fancytree-ext-filter-hide"):this.$div.addClass("fancytree-ext-filter-dimm"),this.$div.toggleClass("fancytree-ext-filter-hide-expanders",!!q.hideExpanders),this.visit(function(a){delete a.match,delete a.titleWithHighlight,a.subMatchCount=0}),j=this.getRootNode()._findDirectChild(g),j&&j.remove(),n.autoCollapse=!1,this.visit(function(a){if(!s||null==a.children){var d=b(a),e=!1;if("skip"===d)return a.visit(function(a){a.match=!1},!0),"skip";d||!c&&"branch"!==d||!a.parent.match||(d=!0,e=!0),d&&(m++,a.match=!0,a.visitParents(function(a){a.subMatchCount+=1,!q.autoExpand||e||a.expanded||(a.setExpanded(!0,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),a._filterAutoExpanded=!0)}))}}),n.autoCollapse=p,0===m&&q.nodata&&r&&(j=q.nodata,a.isFunction(j)&&(j=j()),j===!0?j={}:"string"==typeof j&&(j={title:j}),j=a.extend({statusNodeType:"nodata",key:g,title:this.options.strings.noData},j),this.getRootNode().addNode(j).match=!0),this.render(),m},a.ui.fancytree._FancytreeClass.prototype.filterNodes=function(a,b){return"boolean"==typeof b&&(b={leavesOnly:b},this.warn("Fancytree.filterNodes() leavesOnly option is deprecated since 2.9.0 / 2015-04-19. Use opts.leavesOnly instead.")),this._applyFilterImpl(a,!1,b)},a.ui.fancytree._FancytreeClass.prototype.applyFilter=function(a){return this.warn("Fancytree.applyFilter() is deprecated since 2.1.0 / 2014-05-29. Use .filterNodes() instead."),this.filterNodes.apply(this,arguments)},a.ui.fancytree._FancytreeClass.prototype.filterBranches=function(a,b){return this._applyFilterImpl(a,!0,b)},a.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){var b,c=this.getRootNode()._findDirectChild(g),d=this.options.escapeTitles,e=this.options.enhanceTitle;c&&c.remove(),this.visit(function(c){c.match&&(b=a(">span.fancytree-title",c.span),d?b.text(c.title):b.html(c.title),e&&e({type:"enhanceTitle"},{node:c,$title:b})),delete c.match,delete c.subMatchCount,delete c.titleWithHighlight,c.$subMatchBadge&&(c.$subMatchBadge.remove(),delete c.$subMatchBadge),c._filterAutoExpanded&&c.expanded&&c.setExpanded(!1,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),delete c._filterAutoExpanded}),this.enableFilter=!1,this.lastFilterArgs=null,this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide"),this.render()},a.ui.fancytree._FancytreeClass.prototype.isFilterActive=function(){return!!this.enableFilter},a.ui.fancytree._FancytreeNodeClass.prototype.isMatched=function(){return!(this.tree.enableFilter&&!this.match)},a.ui.fancytree.registerExtension({name:"filter",version:"2.21.0",options:{autoApply:!0,autoExpand:!1,counter:!0,fuzzy:!1,hideExpandedCounter:!0,hideExpanders:!1,highlight:!0,leavesOnly:!1,nodata:!0,mode:"dimm"},nodeLoadChildren:function(a,b){return this._superApply(arguments).done(function(){a.tree.enableFilter&&a.tree.lastFilterArgs&&a.options.filter.autoApply&&a.tree._applyFilterImpl.apply(a.tree,a.tree.lastFilterArgs)})},nodeSetExpanded:function(a,b,c){return delete a.node._filterAutoExpanded,!b&&a.options.filter.hideExpandedCounter&&a.node.$subMatchBadge&&a.node.$subMatchBadge.show(),this._superApply(arguments)},nodeRenderStatus:function(b){var c,d=b.node,e=b.tree,f=b.options.filter,g=a("span.fancytree-title",d.span),h=a(d[e.statusClassPropName]),i=b.options.enhanceTitle,j=b.options.escapeTitles;return c=this._superApply(arguments),h.length&&e.enableFilter?(h.toggleClass("fancytree-match",!!d.match).toggleClass("fancytree-submatch",!!d.subMatchCount).toggleClass("fancytree-hide",!(d.match||d.subMatchCount)),!f.counter||!d.subMatchCount||d.isExpanded()&&f.hideExpandedCounter?d.$subMatchBadge&&d.$subMatchBadge.hide():(d.$subMatchBadge||(d.$subMatchBadge=a("<span class='fancytree-childcounter'/>"),a("span.fancytree-icon, span.fancytree-custom-icon",d.span).append(d.$subMatchBadge)),d.$subMatchBadge.show().text(d.subMatchCount)),d.isEditing&&d.isEditing.call(d)||(d.titleWithHighlight?g.html(d.titleWithHighlight):j?g.text(d.title):g.html(d.title),i&&i({type:"enhanceTitle"},{node:d,$title:g})),c):c}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.glyph.min.js' */
!function(a,b,c,d){"use strict";function e(a,b){return a.map[b]}a.ui.fancytree.registerExtension({name:"glyph",version:"2.21.0",options:{map:{checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",nodata:"icon-meh",noExpander:"",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",doc:"icon-file-alt",docOpen:"icon-file-alt",loading:"icon-refresh icon-spin",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"}},treeInit:function(a){var b=a.tree;this._superApply(arguments),b.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(b){var c,d,f,g=b.node,h=a(g.span),i=b.options.glyph,j=i.map;return d=this._superApply(arguments),g.isRoot()?d:(f=h.children("span.fancytree-expander").get(0),f&&(c=g.expanded&&g.hasChildren()?"expanderOpen":g.isUndefined()?"expanderLazy":g.hasChildren()?"expanderClosed":"noExpander",f.className="fancytree-expander "+j[c]),f=g.tr?a("td",g.tr).find("span.fancytree-checkbox").get(0):h.children("span.fancytree-checkbox").get(0),f&&(c=g.selected?"checkboxSelected":g.partsel?"checkboxUnknown":"checkbox",f.className="fancytree-checkbox "+j[c]),f=h.children("span.fancytree-icon").get(0),f&&(c=g.statusNodeType?e(i,g.statusNodeType):g.folder?g.expanded&&g.hasChildren()?e(i,"folderOpen"):e(i,"folder"):g.expanded?e(i,"docOpen"):e(i,"doc"),f.className="fancytree-icon "+c),d)},nodeSetStatus:function(b,c,d,f){var g,h,i=b.options.glyph,j=b.node;return g=this._superApply(arguments),"error"!==c&&"loading"!==c&&"nodata"!==c||(j.parent?(h=a("span.fancytree-expander",j.span).get(0),h&&(h.className="fancytree-expander "+e(i,c))):(h=a(".fancytree-statusnode-"+c,j[this.nodeContainerAttrName]).find("span.fancytree-icon").get(0),h&&(h.className="fancytree-icon "+e(i,c)))),g}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.gridnav.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){var d,e=c.get(0),f=0;return b.children().each(function(){return this!==e&&(d=a(this).prop("colspan"),void(f+=d?d:1))}),f}function f(b,c){var d,e=null,f=0;return b.children().each(function(){return f>=c?(e=a(this),!1):(d=a(this).prop("colspan"),void(f+=d?d:1))}),e}function g(a,b){var c,d,g=a.closest("td"),i=null;switch(b){case h.LEFT:i=g.prev();break;case h.RIGHT:i=g.next();break;case h.UP:case h.DOWN:for(c=g.parent(),d=e(c,g);;){if(c=b===h.UP?c.prev():c.next(),!c.length)break;if(!c.is(":hidden")&&(i=f(c,d),i&&i.find(":input,a").length))break}}return i}var h=a.ui.keyCode,i={text:[h.UP,h.DOWN],checkbox:[h.UP,h.DOWN,h.LEFT,h.RIGHT],link:[h.UP,h.DOWN,h.LEFT,h.RIGHT],radiobutton:[h.UP,h.DOWN,h.LEFT,h.RIGHT],"select-one":[h.LEFT,h.RIGHT],"select-multiple":[h.LEFT,h.RIGHT]};a.ui.fancytree.registerExtension({name:"gridnav",version:"2.21.0",options:{autofocusInput:!1,handleCursorKeys:!0},treeInit:function(b){this._requireExtension("table",!0,!0),this._superApply(arguments),this.$container.addClass("fancytree-ext-gridnav"),this.$container.on("focusin",function(c){var d,e=a.ui.fancytree.getNode(c.target);e&&!e.isActive()&&(d=b.tree._makeHookContext(e,c),b.tree._callHook("nodeSetActive",d,!0))})},nodeSetActive:function(b,c){var d,e=b.options.gridnav,f=b.node,g=b.originalEvent||{},h=a(g.target).is(":input");c=c!==!1,this._superApply(arguments),c&&(b.options.titlesTabbable?(h||(a(f.span).find("span.fancytree-title").focus(),f.setFocus()),b.tree.$container.attr("tabindex","-1")):e.autofocusInput&&!h&&(d=a(f.tr||f.span),d.find(":input:enabled:first").focus()))},nodeKeydown:function(b){var c,d,e,f=b.options.gridnav,h=b.originalEvent,j=a(h.target);return j.is(":input:enabled")?c=j.prop("type"):j.is("a")&&(c="link"),c&&f.handleCursorKeys?(d=i[c],!(d&&a.inArray(h.which,d)>=0&&(e=g(j,h.which),e&&e.length))||(e.find(":input:enabled,a").focus(),!1)):this._superApply(arguments)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.persist.min.js' */
!function(a,b,c,d){"use strict";function e(b,c,d,f,g){var h,i,j,l,m=!1,n=[],o=[];for(d=d||[],g=g||a.Deferred(),h=0,j=d.length;h<j;h++)i=d[h],l=b.getNodeByKey(i),l?f&&l.isUndefined()?(m=!0,b.debug("_loadLazyNodes: "+l+" is lazy: loading..."),"expand"===f?n.push(l.setExpanded()):n.push(l.load())):(b.debug("_loadLazyNodes: "+l+" already loaded."),l.setExpanded()):(o.push(i),b.debug("_loadLazyNodes: "+l+" was not yet found."));return a.when.apply(a,n).always(function(){if(m&&o.length>0)e(b,c,o,f,g);else{if(o.length)for(b.warn("_loadLazyNodes: could not load those keys: ",o),h=0,j=o.length;h<j;h++)i=d[h],c._appendKey(k,d[h],!1);g.resolve()}}),g}var f,g,h,i=a.ui.fancytree.assert,j="active",k="expanded",l="focus",m="selected";"function"==typeof Cookies?(h=Cookies.set,f=Cookies.get,g=Cookies.remove):(h=f=a.cookie,g=a.removeCookie),a.ui.fancytree._FancytreeClass.prototype.clearCookies=function(a){var b=this.ext.persist,c=b.cookiePrefix;a=a||"active expanded focus selected",a.indexOf(j)>=0&&b._data(c+j,null),a.indexOf(k)>=0&&b._data(c+k,null),a.indexOf(l)>=0&&b._data(c+l,null),a.indexOf(m)>=0&&b._data(c+m,null)},a.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var a=this.ext.persist,b=a.cookiePrefix,c=a.cookieDelimiter,d={};return d[j]=a._data(b+j),d[k]=(a._data(b+k)||"").split(c),d[m]=(a._data(b+m)||"").split(c),d[l]=a._data(b+l),d},a.ui.fancytree.registerExtension({name:"persist",version:"2.21.0",options:{cookieDelimiter:"~",cookiePrefix:d,cookie:{raw:!1,expires:"",path:"",domain:"",secure:!1},expandLazy:!1,fireActivate:!0,overrideSource:!0,store:"auto",types:"active expanded focus selected"},_data:function(a,b){var c=this._local.localStorage;return b===d?c?c.getItem(a):f(a):void(null===b?c?c.removeItem(a):g(a):c?c.setItem(a,b):h(a,b,this.options.persist.cookie))},_appendKey:function(b,c,d){c=""+c;var e=this._local,f=this.options.persist,g=f.cookieDelimiter,h=e.cookiePrefix+b,i=e._data(h),j=i?i.split(g):[],k=a.inArray(c,j);k>=0&&j.splice(k,1),d&&j.push(c),e._data(h,j.join(g))},treeInit:function(c){var g=c.tree,h=c.options,n=this._local,o=this.options.persist;return i("auto"!==o.store&&"cookie"!==o.store||f,"Missing required plugin for 'persist' extension: js.cookie.js or jquery.cookie.js"),n.cookiePrefix=o.cookiePrefix||"fancytree-"+g._id+"-",n.storeActive=o.types.indexOf(j)>=0,n.storeExpanded=o.types.indexOf(k)>=0,n.storeSelected=o.types.indexOf(m)>=0,n.storeFocus=o.types.indexOf(l)>=0,"cookie"!==o.store&&b.localStorage?n.localStorage="local"===o.store?b.localStorage:b.sessionStorage:n.localStorage=null,g.$div.bind("fancytreeinit",function(b){if(g._triggerTreeEvent("beforeRestore",null,{})!==!1){var c,f,i,p,q,r=n._data(n.cookiePrefix+l),s=o.fireActivate===!1;c=n._data(n.cookiePrefix+k),p=c&&c.split(o.cookieDelimiter),f=n.storeExpanded?e(g,n,p,!!o.expandLazy&&"expand",null):(new a.Deferred).resolve(),f.done(function(){if(n.storeSelected){if(c=n._data(n.cookiePrefix+m))for(p=c.split(o.cookieDelimiter),i=0;i<p.length;i++)q=g.getNodeByKey(p[i]),q?(q.selected===d||o.overrideSource&&q.selected===!1)&&(q.selected=!0,q.renderStatus()):n._appendKey(m,p[i],!1);3===g.options.selectMode&&g.visit(function(a){if(a.selected)return a.fixSelection3AfterClick(),"skip"})}n.storeActive&&(c=n._data(n.cookiePrefix+j),!c||!h.persist.overrideSource&&g.activeNode||(q=g.getNodeByKey(c),q&&(q.debug("persist: set active",c),q.setActive(!0,{noFocus:!0,noEvents:s})))),n.storeFocus&&r&&(q=g.getNodeByKey(r),q&&(g.options.titlesTabbable?a(q.span).find(".fancytree-title").focus():a(g.$container).focus())),g._triggerTreeEvent("restore",null,{})})}}),this._superApply(arguments)},nodeSetActive:function(a,b,c){var d,e=this._local;return b=b!==!1,d=this._superApply(arguments),e.storeActive&&e._data(e.cookiePrefix+j,this.activeNode?this.activeNode.key:null),d},nodeSetExpanded:function(a,b,c){var d,e=a.node,f=this._local;return b=b!==!1,d=this._superApply(arguments),f.storeExpanded&&f._appendKey(k,e.key,b),d},nodeSetFocus:function(a,b){var c,d=this._local;return b=b!==!1,c=this._superApply(arguments),d.storeFocus&&d._data(d.cookiePrefix+l,this.focusNode?this.focusNode.key:null),c},nodeSetSelected:function(b,c){var d,e,f=b.tree,g=b.node,h=this._local;return c=c!==!1,d=this._superApply(arguments),h.storeSelected&&(3===f.options.selectMode?(e=a.map(f.getSelectedNodes(!0),function(a){return a.key}),e=e.join(b.options.persist.cookieDelimiter),h._data(h.cookiePrefix+m,e)):h._appendKey(m,g.key,g.selected)),d}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.table.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){c=c||"",b||a.error("Assertion failed "+c)}function f(a,b){a.insertBefore(b,a.firstChild)}function g(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function h(a,b){a.visit(function(a){var c=a.tr;if(c&&(c.style.display=a.hide||!b?"none":""),!a.expanded)return"skip"})}function i(b){var c,d,f,g=b.parent,h=g?g.children:null;if(h&&h.length>1&&h[0]!==b)for(c=a.inArray(b,h),f=h[c-1],e(f.tr);f.children&&(d=f.children[f.children.length-1],d.tr);)f=d;else f=g;return f}a.ui.fancytree.registerExtension({name:"table",version:"2.21.0",options:{checkboxColumnIdx:null,indentation:16,nodeColumnIdx:0},treeInit:function(b){var d,f,g,h,i,j=b.tree,k=b.options,l=k.table,m=j.widget.element;if(null!=l.customStatus&&(null!=k.renderStatusColumns?a.error("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' only instead."):(j.warn("The 'customStatus' option is deprecated since v2.15.0. Use 'renderStatusColumns' instead."),k.renderStatusColumns=l.customStatus)),k.renderStatusColumns&&k.renderStatusColumns===!0&&(k.renderStatusColumns=k.renderColumns),m.addClass("fancytree-container fancytree-ext-table"),j.tbody=m.find(">tbody")[0],i=a(j.tbody),f=a("thead >tr:last >th",m).length,h=i.children("tr:first"),h.length)g=h.children("td").length,f&&g!==f&&(j.warn("Column count mismatch between thead ("+f+") and tbody ("+g+"): using tbody."),f=g),h=h.clone();else for(e(f>=1,"Need either <thead> or <tbody> with <td> elements to determine column count."),h=a("<tr />"),d=0;d<f;d++)h.append("<td />");h.find(">td").eq(l.nodeColumnIdx).html("<span class='fancytree-node' />"),k.aria&&(h.attr("role","row"),h.find("td").attr("role","gridcell")),j.rowFragment=c.createDocumentFragment(),j.rowFragment.appendChild(h.get(0)),i.empty(),j.statusClassPropName="tr",j.ariaPropName="tr",this.nodeContainerAttrName="tr",j.$container=m,this._superApply(arguments),a(j.rootNode.ul).remove(),j.rootNode.ul=null,this.$container.attr("tabindex",k.tabindex),k.aria&&j.$container.attr("role","treegrid").attr("aria-readonly",!0)},nodeRemoveChildMarkup:function(b){var c=b.node;c.visit(function(b){b.tr&&(a(b.tr).remove(),b.tr=null)})},nodeRemoveMarkup:function(b){var c=b.node;c.tr&&(a(c.tr).remove(),c.tr=null),this.nodeRemoveChildMarkup(b)},nodeRender:function(b,c,d,j,k){var l,m,n,o,p,q,r,s,t=b.tree,u=b.node,v=b.options,w=!u.parent;if(t._enableUpdate!==!1){if(k||(b.hasCollapsedParents=u.parent&&!u.parent.expanded),!w)if(u.tr&&c&&this.nodeRemoveMarkup(b),u.tr)c?this.nodeRenderTitle(b):this.nodeRenderStatus(b);else{if(b.hasCollapsedParents&&!d)return void u.debug("nodeRender ignored due to unrendered parent");p=t.rowFragment.firstChild.cloneNode(!0),q=i(u),e(q),j===!0&&k?p.style.display="none":d&&b.hasCollapsedParents&&(p.style.display="none"),q.tr?g(q.tr,p):(e(!q.parent,"prev. row must have a tr, or be system root"),f(t.tbody,p)),u.tr=p,u.key&&v.generateIds&&(u.tr.id=v.idPrefix+u.key),u.tr.ftnode=u,v.aria&&a(u.tr).attr("aria-labelledby","ftal_"+u.key),u.span=a("span.fancytree-node",u.tr).get(0),this.nodeRenderTitle(b),v.createNode&&v.createNode.call(t,{type:"createNode"},b)}if(v.renderNode&&v.renderNode.call(t,{type:"renderNode"},b),l=u.children,l&&(w||d||u.expanded))for(n=0,o=l.length;n<o;n++)s=a.extend({},b,{node:l[n]}),s.hasCollapsedParents=s.hasCollapsedParents||!u.expanded,this.nodeRender(s,c,d,j,!0);l&&!k&&(r=u.tr||null,m=t.tbody.firstChild,u.visit(function(a){if(a.tr){if(a.parent.expanded||"none"===a.tr.style.display||(a.tr.style.display="none",h(a,!1)),a.tr.previousSibling!==r){u.debug("_fixOrder: mismatch at node: "+a);var b=r?r.nextSibling:m;t.tbody.insertBefore(a.tr,b)}r=a.tr}}))}},nodeRenderTitle:function(b,c){var d,e,f=b.node,g=b.options,h=f.isStatusNode();return e=this._superApply(arguments),f.isRootNode()?e:(g.checkbox&&!h&&null!=g.table.checkboxColumnIdx&&(d=a("span.fancytree-checkbox",f.span),a(f.tr).find("td").eq(+g.table.checkboxColumnIdx).html(d)),this.nodeRenderStatus(b),h?g.renderStatusColumns&&g.renderStatusColumns.call(b.tree,{type:"renderStatusColumns"},b):g.renderColumns&&g.renderColumns.call(b.tree,{type:"renderColumns"},b),e)},nodeRenderStatus:function(b){var c,d=b.node,e=b.options;this._superApply(arguments),a(d.tr).removeClass("fancytree-node"),c=(d.getLevel()-1)*e.table.indentation,a(d.span).css({paddingLeft:c+"px"})},nodeSetExpanded:function(b,c,d){function e(a){h(b.node,c),a?c&&b.options.autoScroll&&!d.noAnimation&&b.node.hasChildren()?b.node.getLastChild().scrollIntoView(!0,{topNode:b.node}).always(function(){d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.resolveWith(b.node)}):(d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.resolveWith(b.node)):(d.noEvents||b.tree._triggerNodeEvent(c?"expand":"collapse",b),f.rejectWith(b.node))}if(c=c!==!1,b.node.expanded&&c||!b.node.expanded&&!c)return this._superApply(arguments);var f=new a.Deferred,g=a.extend({},d,{noEvents:!0,noAnimation:!0});return d=d||{},this._super(b,c,g).done(function(){e(!0)}).fail(function(){e(!1)}),f.promise()},nodeSetStatus:function(b,c,d,e){if("ok"===c){var f=b.node,g=f.children?f.children[0]:null;g&&g.isStatusNode()&&a(g.tr).remove()}return this._superApply(arguments)},treeClear:function(a){return this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode)),this._superApply(arguments)},treeDestroy:function(a){this.$container.find("tbody").empty(),this.$source&&this.$source.removeClass("ui-helper-hidden")}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.themeroller.min.js' */
!function(a,b,c,d){"use strict";a.ui.fancytree.registerExtension({name:"themeroller",version:"2.21.0",options:{activeClass:"ui-state-active",addClass:"ui-corner-all",focusClass:"ui-state-focus",hoverClass:"ui-state-hover",selectedClass:"ui-state-highlight"},treeInit:function(b){var c=b.widget.element,d=b.options.themeroller;this._superApply(arguments),"TABLE"===c[0].nodeName?(c.addClass("ui-widget ui-corner-all"),c.find(">thead tr").addClass("ui-widget-header"),c.find(">tbody").addClass("ui-widget-conent")):c.addClass("ui-widget ui-widget-content ui-corner-all"),c.delegate(".fancytree-node","mouseenter mouseleave",function(b){var c=a.ui.fancytree.getNode(b.target),e="mouseenter"===b.type;a(c.tr?c.tr:c.span).toggleClass(d.hoverClass+" "+d.addClass,e)})},treeDestroy:function(a){this._superApply(arguments),a.widget.element.removeClass("ui-widget ui-widget-content ui-corner-all")},nodeRenderStatus:function(b){var c={},d=b.node,e=a(d.tr?d.tr:d.span),f=b.options.themeroller;this._superApply(arguments),c[f.activeClass]=!1,c[f.focusClass]=!1,c[f.selectedClass]=!1,d.isActive()&&(c[f.activeClass]=!0),d.hasFocus()&&(c[f.focusClass]=!0),d.isSelected()&&!d.isActive()&&(c[f.selectedClass]=!0),e.toggleClass(f.activeClass,c[f.activeClass]),e.toggleClass(f.focusClass,c[f.focusClass]),e.toggleClass(f.selectedClass,c[f.selectedClass]),e.addClass(f.addClass)}})}(jQuery,window,document);

/*! Extension 'jquery.fancytree.wide.min.js' */
!function(a,b,c,d){"use strict";function e(b,c){b="fancytree-style-"+b;var d=a("#"+b);if(!c)return d.remove(),null;d.length||(d=a("<style />").attr("id",b).addClass("fancytree-style").prop("type","text/css").appendTo("head"));try{d.html(c)}catch(e){d[0].styleSheet.cssText=c}return d}function f(a,b,c,d,e){var f,g="#"+a+" span.fancytree-level-",h=[];for(f=0;f<b;f++)h.push(g+(f+1)+" span.fancytree-title { padding-left: "+(f*c+d)+e+"; }");return h.push("#"+a+" div.ui-effects-wrapper ul li span.fancytree-title { padding-left: 3px; position: static; width: auto; }"),h.join("\n")}var g=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;a.ui.fancytree.registerExtension({name:"wide",version:"2.21.0",options:{iconWidth:null,iconSpacing:null,levelOfs:null},treeCreate:function(b){this._superApply(arguments),this.$container.addClass("fancytree-ext-wide");var c,d,h,i,j,k=b.options.wide,l=a("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(b.tree.$container),m=l.find(".fancytree-icon"),n=l.find("ul"),o=k.iconSpacing||m.css("margin-left"),p=k.iconWidth||m.css("width"),q=k.levelOfs||n.css("padding-left");l.remove(),h=o.match(g)[2],o=parseFloat(o,10),i=p.match(g)[2],p=parseFloat(p,10),j=q.match(g)[2],h===i&&j===i||a.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit"),this._local.measureUnit=i,this._local.levelOfs=parseFloat(q),this._local.lineOfs=(1+(b.options.checkbox?1:0)+(b.options.icon===!1?0:1))*(p+o)+o,this._local.maxDepth=10,c=this.$container.uniqueId().attr("id"),d=f(c,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit),e(c,d)},treeDestroy:function(a){return e(this.$container.attr("id"),null),this._superApply(arguments)},nodeRenderStatus:function(b){var c,d,g,h=b.node,i=h.getLevel();return g=this._superApply(arguments),i>this._local.maxDepth&&(c=this.$container.attr("id"),this._local.maxDepth*=2,h.debug("Define global ext-wide css up to level "+this._local.maxDepth),d=f(c,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit),e(c,d)),a(h.span).addClass("fancytree-level-"+i),g}})}(jQuery,window,document);
}));

/**!
 * jquery.fancytree.contextmenu.js
 * 3rd party jQuery Context menu extension for jQuery Fancytree
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Copyright (c) 2012, Martin Wendt (http://wwWendt.de)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://code.google.com/p/fancytree/wiki/LicenseInfe
 */
(function($, document) {
	"use strict";

	var initContextMenu = function(tree, selector, menu, actions) {
		tree.$container.on("mousedown.contextMenu", function(event) {
			var node = $.ui.fancytree.getNode(event);

			if(node) {
        $.contextMenu("destroy", "." + selector);

				node.setFocus(true);
				node.setActive(true);

				$.contextMenu({
					selector: "." + selector,
					build: function($trigger, e) {
						node = $.ui.fancytree.getNode($trigger);

						var menuItems = { };
						if($.isFunction(menu)) {
							menuItems = menu(node);
						} else if($.isPlainObject(menu)) {
							menuItems = menu;
						}

						return {
							callback: function(action, options) {
								if($.isFunction(actions)) {
									actions(node, action, options);
								} else if($.isPlainObject(actions)) {
									if(actions.hasOwnProperty(action) && $.isFunction(actions[action])) {
										actions[action](node, options);
									}
								}
							},
							items: menuItems
						};
					}
				});
			}
		});
	};

	$.ui.fancytree.registerExtension({
		name: "contextMenu",
		version: "1.0",
		contextMenu: {
      selector: "fancytree-title",
			menu: {},
			actions: {}
		},
		treeInit: function(ctx) {
			this._superApply(arguments);
			initContextMenu(ctx.tree,
                      ctx.options.contextMenu.selector || "fancytree-title",
                      ctx.options.contextMenu.menu,
                      ctx.options.contextMenu.actions);
		}
	});
}(jQuery, document));

$(function() {
	$$.util.loadStyle('tree/brainjs-tree.css')
})


$$.control.registerControl('brainjs.tree', {
	props: {
		source: [],
		contextMenu: null,
		options: {}
	},
	init: function(elt) {

		let options = $.extend({}, this.props.options)
		console.log('options', options)

		options.source = this.props.source
		options.extensions = []
		options.activate = function(ev, data) {
			//console.log('activate', data.node.title)
			elt.trigger('treeactivate')
		}

		if (this.props.contextMenu != null) {
			options.extensions.push('contextMenu')

			options.contextMenu = {
				actions: (node, action) => {
					//console.log('contextMenuAction', node, action)
					node = this.getActiveNode()
					elt.trigger('treecontextmenu', {action, node})
				},
				menu: this.props.contextMenu
			}
		}


		elt.fancytree(options)


		this.getActiveNode = function() {
			return elt.fancytree('getActiveNode')
		}

		this.getRootNode = function() {
			return elt.fancytree('getRootNode')
		}

	}
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5mYW5jeXRyZWUtYWxsLm1pbi5qcyIsImpxdWVyeS5mYW5jeXRyZWUuY29udGV4dE1lbnUuanMiLCJ0cmVlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImJyYWluanMtdHJlZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgRmFuY3l0cmVlIFBsdWdpbiAtIDIuMjEuMCAtIDIwMTctMDEtMTVUMTc6MjE6MjhaXG4gICogaHR0cHM6Ly9naXRodWIuY29tL21hcjEwL2ZhbmN5dHJlZVxuICAqIENvcHlyaWdodCAoYykgMjAxNyBNYXJ0aW4gV2VuZHQ7IExpY2Vuc2VkIE1JVCAqL1xuKGZ1bmN0aW9uKCBmYWN0b3J5ICkge1xuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRcdGRlZmluZSggWyBcImpxdWVyeVwiIF0sIGZhY3RvcnkgKTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBqUXVlcnkgKTtcblx0fVxufShmdW5jdGlvbiggJCApIHtcblxuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYixjKXtifHwoYz1jP1wiOiBcIitjOlwiXCIsYS5lcnJvcihcIkZhbmN5dHJlZSBhc3NlcnRpb24gZmFpbGVkXCIrYykpfWZ1bmN0aW9uIGYoYSxjKXt2YXIgZCxlLGY9Yi5jb25zb2xlP2IuY29uc29sZVthXTpudWxsO2lmKGYpdHJ5e2YuYXBwbHkoYi5jb25zb2xlLGMpfWNhdGNoKGcpe2ZvcihlPVwiXCIsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWUrPWNbZF07ZihlKX19ZnVuY3Rpb24gZyhhKXtyZXR1cm4hKCFhLnRyZWV8fGEuc3RhdHVzTm9kZVR5cGU9PT1kKX1mdW5jdGlvbiBoKGIsYyxkLGUpe3ZhciBmLGcsaCxpPWEubWFwKGEudHJpbShiKS5zcGxpdChcIi5cIiksZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfSksaj1hLm1hcChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KGEsMTApfSk7Zm9yKGY9MDtmPGoubGVuZ3RoO2YrKylpZihnPWlbZl18fDAsaD1qW2ZdfHwwLGchPT1oKXJldHVybiBnPmg7cmV0dXJuITB9ZnVuY3Rpb24gaShhLGIsYyxkLGUpe3ZhciBmPWZ1bmN0aW9uKCl7dmFyIGM9YlthXSxmPWRbYV0sZz1iLmV4dFtlXSxoPWZ1bmN0aW9uKCl7cmV0dXJuIGMuYXBwbHkoYixhcmd1bWVudHMpfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBjLmFwcGx5KGIsYSl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBhPWIuX2xvY2FsLGM9Yi5fc3VwZXIsZD1iLl9zdXBlckFwcGx5O3RyeXtyZXR1cm4gYi5fbG9jYWw9ZyxiLl9zdXBlcj1oLGIuX3N1cGVyQXBwbHk9aSxmLmFwcGx5KGIsYXJndW1lbnRzKX1maW5hbGx5e2IuX2xvY2FsPWEsYi5fc3VwZXI9YyxiLl9zdXBlckFwcGx5PWR9fX0oKTtyZXR1cm4gZn1mdW5jdGlvbiBqKGIsYyxkLGUpe2Zvcih2YXIgZiBpbiBkKVwiZnVuY3Rpb25cIj09dHlwZW9mIGRbZl0/XCJmdW5jdGlvblwiPT10eXBlb2YgYltmXT9iW2ZdPWkoZixiLGMsZCxlKTpcIl9cIj09PWYuY2hhckF0KDApP2IuZXh0W2VdW2ZdPWkoZixiLGMsZCxlKTphLmVycm9yKFwiQ291bGQgbm90IG92ZXJyaWRlIHRyZWUuXCIrZitcIi4gVXNlIHByZWZpeCAnXycgdG8gY3JlYXRlIHRyZWUuXCIrZStcIi5fXCIrZik6XCJvcHRpb25zXCIhPT1mJiYoYi5leHRbZV1bZl09ZFtmXSl9ZnVuY3Rpb24gayhiLGMpe3JldHVybiBiPT09ZD9hLkRlZmVycmVkKGZ1bmN0aW9uKCl7dGhpcy5yZXNvbHZlKCl9KS5wcm9taXNlKCk6YS5EZWZlcnJlZChmdW5jdGlvbigpe3RoaXMucmVzb2x2ZVdpdGgoYixjKX0pLnByb21pc2UoKX1mdW5jdGlvbiBsKGIsYyl7cmV0dXJuIGI9PT1kP2EuRGVmZXJyZWQoZnVuY3Rpb24oKXt0aGlzLnJlamVjdCgpfSkucHJvbWlzZSgpOmEuRGVmZXJyZWQoZnVuY3Rpb24oKXt0aGlzLnJlamVjdFdpdGgoYixjKX0pLnByb21pc2UoKX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7YS5yZXNvbHZlV2l0aChiKX19ZnVuY3Rpb24gbihiKXt2YXIgYz1hLmV4dGVuZCh7fSxiLmRhdGEoKSksZD1jLmpzb247cmV0dXJuIGRlbGV0ZSBjLmZhbmN5dHJlZSxkZWxldGUgYy51aUZhbmN5dHJlZSxkJiYoZGVsZXRlIGMuanNvbixjPWEuZXh0ZW5kKGMsZCkpLGN9ZnVuY3Rpb24gbyhhKXtyZXR1cm4oXCJcIithKS5yZXBsYWNlKHksZnVuY3Rpb24oYSl7cmV0dXJuIEJbYV19KX1mdW5jdGlvbiBwKGEpe3JldHVybihcIlwiK2EpLnJlcGxhY2UoeixmdW5jdGlvbihhKXtyZXR1cm4gQlthXX0pfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIGE9YS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3JldHVybiBiLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihhKT49MH19ZnVuY3Rpb24gcihhKXt2YXIgYj1uZXcgUmVnRXhwKFwiXlwiK2EsXCJpXCIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYi50ZXN0KGEudGl0bGUpfX1mdW5jdGlvbiBzKGIsYyl7dmFyIGQsZixnLGg7Zm9yKHRoaXMucGFyZW50PWIsdGhpcy50cmVlPWIudHJlZSx0aGlzLnVsPW51bGwsdGhpcy5saT1udWxsLHRoaXMuc3RhdHVzTm9kZVR5cGU9bnVsbCx0aGlzLl9pc0xvYWRpbmc9ITEsdGhpcy5fZXJyb3I9bnVsbCx0aGlzLmRhdGE9e30sZD0wLGY9SC5sZW5ndGg7ZDxmO2QrKylnPUhbZF0sdGhpc1tnXT1jW2ddO2MuZGF0YSYmYS5leHRlbmQodGhpcy5kYXRhLGMuZGF0YSk7Zm9yKGcgaW4gYylJW2ddfHxhLmlzRnVuY3Rpb24oY1tnXSl8fEtbZ118fCh0aGlzLmRhdGFbZ109Y1tnXSk7bnVsbD09dGhpcy5rZXk/dGhpcy50cmVlLm9wdGlvbnMuZGVmYXVsdEtleT8odGhpcy5rZXk9dGhpcy50cmVlLm9wdGlvbnMuZGVmYXVsdEtleSh0aGlzKSxlKHRoaXMua2V5LFwiZGVmYXVsdEtleSgpIG11c3QgcmV0dXJuIGEgdW5pcXVlIGtleVwiKSk6dGhpcy5rZXk9XCJfXCIrdy5fbmV4dE5vZGVLZXkrKzp0aGlzLmtleT1cIlwiK3RoaXMua2V5LGMuYWN0aXZlJiYoZShudWxsPT09dGhpcy50cmVlLmFjdGl2ZU5vZGUsXCJvbmx5IG9uZSBhY3RpdmUgbm9kZSBhbGxvd2VkXCIpLHRoaXMudHJlZS5hY3RpdmVOb2RlPXRoaXMpLGMuc2VsZWN0ZWQmJih0aGlzLnRyZWUubGFzdFNlbGVjdGVkTm9kZT10aGlzKSxoPWMuY2hpbGRyZW4saD9oLmxlbmd0aD90aGlzLl9zZXRDaGlsZHJlbihoKTp0aGlzLmNoaWxkcmVuPXRoaXMubGF6eT9bXTpudWxsOnRoaXMuY2hpbGRyZW49bnVsbCx0aGlzLnRyZWUuX2NhbGxIb29rKFwidHJlZVJlZ2lzdGVyTm9kZVwiLHRoaXMudHJlZSwhMCx0aGlzKX1mdW5jdGlvbiB0KGIpe3RoaXMud2lkZ2V0PWIsdGhpcy4kZGl2PWIuZWxlbWVudCx0aGlzLm9wdGlvbnM9Yi5vcHRpb25zLHRoaXMub3B0aW9ucyYmKGEuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMubGF6eWxvYWQpJiYhYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5sYXp5TG9hZCkmJih0aGlzLm9wdGlvbnMubGF6eUxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdy53YXJuKFwiVGhlICdsYXp5bG9hZCcgZXZlbnQgaXMgZGVwcmVjYXRlZCBzaW5jZSAyMDE0LTAyLTI1LiBVc2UgJ2xhenlMb2FkJyAod2l0aCB1cHBlcmNhc2UgTCkgaW5zdGVhZC5cIiksYi5vcHRpb25zLmxhenlsb2FkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGEuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMubG9hZGVycm9yKSYmYS5lcnJvcihcIlRoZSAnbG9hZGVycm9yJyBldmVudCB3YXMgcmVuYW1lZCBzaW5jZSAyMDE0LTA3LTAzLiBVc2UgJ2xvYWRFcnJvcicgKHdpdGggdXBwZXJjYXNlIEUpIGluc3RlYWQuXCIpLHRoaXMub3B0aW9ucy5meCE9PWQmJncud2FybihcIlRoZSAnZngnIG9wdGlvbiB3YXMgcmVwbGFjZWQgYnkgJ3RvZ2dsZUVmZmVjdCcgc2luY2UgMjAxNC0xMS0zMC5cIiksdGhpcy5vcHRpb25zLnJlbW92ZU5vZGUhPT1kJiZhLmVycm9yKFwiVGhlICdyZW1vdmVOb2RlJyBldmVudCB3YXMgcmVwbGFjZWQgYnkgJ21vZGlmeUNoaWxkJyBzaW5jZSAyLjIwICgyMDE2LTA5LTEwKS5cIikpLHRoaXMuZXh0PXt9LHRoaXMuZGF0YT1uKHRoaXMuJGRpdiksdGhpcy5faWQ9YS51aS5mYW5jeXRyZWUuX25leHRJZCsrLHRoaXMuX25zPVwiLmZhbmN5dHJlZS1cIit0aGlzLl9pZCx0aGlzLmFjdGl2ZU5vZGU9bnVsbCx0aGlzLmZvY3VzTm9kZT1udWxsLHRoaXMuX2hhc0ZvY3VzPW51bGwsdGhpcy5fZW5hYmxlVXBkYXRlPSEwLHRoaXMubGFzdFNlbGVjdGVkTm9kZT1udWxsLHRoaXMuc3lzdGVtRm9jdXNFbGVtZW50PW51bGwsdGhpcy5sYXN0UXVpY2tzZWFyY2hUZXJtPVwiXCIsdGhpcy5sYXN0UXVpY2tzZWFyY2hUaW1lPTAsdGhpcy5zdGF0dXNDbGFzc1Byb3BOYW1lPVwic3BhblwiLHRoaXMuYXJpYVByb3BOYW1lPVwibGlcIix0aGlzLm5vZGVDb250YWluZXJBdHRyTmFtZT1cImxpXCIsdGhpcy4kZGl2LmZpbmQoXCI+dWwuZmFuY3l0cmVlLWNvbnRhaW5lclwiKS5yZW1vdmUoKTt2YXIgYyxlPXt0cmVlOnRoaXN9O3RoaXMucm9vdE5vZGU9bmV3IHMoZSx7dGl0bGU6XCJyb290XCIsa2V5Olwicm9vdF9cIit0aGlzLl9pZCxjaGlsZHJlbjpudWxsLGV4cGFuZGVkOiEwfSksdGhpcy5yb290Tm9kZS5wYXJlbnQ9bnVsbCxjPWEoXCI8dWw+XCIse1wiY2xhc3NcIjpcInVpLWZhbmN5dHJlZSBmYW5jeXRyZWUtY29udGFpbmVyIGZhbmN5dHJlZS1wbGFpblwifSkuYXBwZW5kVG8odGhpcy4kZGl2KSx0aGlzLiRjb250YWluZXI9Yyx0aGlzLnJvb3ROb2RlLnVsPWNbMF0sbnVsbD09dGhpcy5vcHRpb25zLmRlYnVnTGV2ZWwmJih0aGlzLm9wdGlvbnMuZGVidWdMZXZlbD13LmRlYnVnTGV2ZWwpLHRoaXMuJGNvbnRhaW5lci5hdHRyKFwidGFiaW5kZXhcIix0aGlzLm9wdGlvbnMudGFiaW5kZXgpLHRoaXMub3B0aW9ucy5ydGwmJnRoaXMuJGNvbnRhaW5lci5hdHRyKFwiRElSXCIsXCJSVExcIikuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtcnRsXCIpLHRoaXMub3B0aW9ucy5hcmlhJiYodGhpcy4kY29udGFpbmVyLmF0dHIoXCJyb2xlXCIsXCJ0cmVlXCIpLDEhPT10aGlzLm9wdGlvbnMuc2VsZWN0TW9kZSYmdGhpcy4kY29udGFpbmVyLmF0dHIoXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiLCEwKSl9aWYoYS51aSYmYS51aS5mYW5jeXRyZWUpcmV0dXJuIHZvaWQgYS51aS5mYW5jeXRyZWUud2FybihcIkZhbmN5dHJlZTogaWdub3JlZCBkdXBsaWNhdGUgaW5jbHVkZVwiKTt2YXIgdSx2LHc9bnVsbCx4PW5ldyBSZWdFeHAoL1xcLnxcXC8vKSx5PS9bJjw+XCInXFwvXS9nLHo9L1s8PlwiJ1xcL10vZyxBPVwiJHJlY3Vyc2l2ZV9yZXF1ZXN0XCIsQj17XCImXCI6XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjMzk7XCIsXCIvXCI6XCImI3gyRjtcIn0sQz17MTY6ITAsMTc6ITAsMTg6ITB9LEQ9ezg6XCJiYWNrc3BhY2VcIiw5OlwidGFiXCIsMTA6XCJyZXR1cm5cIiwxMzpcInJldHVyblwiLDE5OlwicGF1c2VcIiwyMDpcImNhcHNsb2NrXCIsMjc6XCJlc2NcIiwzMjpcInNwYWNlXCIsMzM6XCJwYWdldXBcIiwzNDpcInBhZ2Vkb3duXCIsMzU6XCJlbmRcIiwzNjpcImhvbWVcIiwzNzpcImxlZnRcIiwzODpcInVwXCIsMzk6XCJyaWdodFwiLDQwOlwiZG93blwiLDQ1OlwiaW5zZXJ0XCIsNDY6XCJkZWxcIiw1OTpcIjtcIiw2MTpcIj1cIiw5NjpcIjBcIiw5NzpcIjFcIiw5ODpcIjJcIiw5OTpcIjNcIiwxMDA6XCI0XCIsMTAxOlwiNVwiLDEwMjpcIjZcIiwxMDM6XCI3XCIsMTA0OlwiOFwiLDEwNTpcIjlcIiwxMDY6XCIqXCIsMTA3OlwiK1wiLDEwOTpcIi1cIiwxMTA6XCIuXCIsMTExOlwiL1wiLDExMjpcImYxXCIsMTEzOlwiZjJcIiwxMTQ6XCJmM1wiLDExNTpcImY0XCIsMTE2OlwiZjVcIiwxMTc6XCJmNlwiLDExODpcImY3XCIsMTE5OlwiZjhcIiwxMjA6XCJmOVwiLDEyMTpcImYxMFwiLDEyMjpcImYxMVwiLDEyMzpcImYxMlwiLDE0NDpcIm51bWxvY2tcIiwxNDU6XCJzY3JvbGxcIiwxNzM6XCItXCIsMTg2OlwiO1wiLDE4NzpcIj1cIiwxODg6XCIsXCIsMTg5OlwiLVwiLDE5MDpcIi5cIiwxOTE6XCIvXCIsMTkyOlwiYFwiLDIxOTpcIltcIiwyMjA6XCJcXFxcXCIsMjIxOlwiXVwiLDIyMjpcIidcIn0sRT17MDpcIlwiLDE6XCJsZWZ0XCIsMjpcIm1pZGRsZVwiLDM6XCJyaWdodFwifSxGPVwiYWN0aXZlIGV4cGFuZGVkIGZvY3VzIGZvbGRlciBoaWRlQ2hlY2tib3ggbGF6eSBzZWxlY3RlZCB1bnNlbGVjdGFibGVcIi5zcGxpdChcIiBcIiksRz17fSxIPVwiZXhwYW5kZWQgZXh0cmFDbGFzc2VzIGZvbGRlciBoaWRlQ2hlY2tib3ggaWNvbiBrZXkgbGF6eSByZWZLZXkgc2VsZWN0ZWQgc3RhdHVzTm9kZVR5cGUgdGl0bGUgdG9vbHRpcCB1bnNlbGVjdGFibGVcIi5zcGxpdChcIiBcIiksST17fSxKPXt9LEs9e2FjdGl2ZTohMCxjaGlsZHJlbjohMCxkYXRhOiEwLGZvY3VzOiEwfTtmb3IodT0wO3U8Ri5sZW5ndGg7dSsrKUdbRlt1XV09ITA7Zm9yKHU9MDt1PEgubGVuZ3RoO3UrKyl2PUhbdV0sSVt2XT0hMCx2IT09di50b0xvd2VyQ2FzZSgpJiYoSlt2LnRvTG93ZXJDYXNlKCldPXYpO2UoYS51aSxcIkZhbmN5dHJlZSByZXF1aXJlcyBqUXVlcnkgVUkgKGh0dHA6Ly9qcXVlcnl1aS5jb20pXCIpLHMucHJvdG90eXBlPXtfZmluZERpcmVjdENoaWxkOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLmNoaWxkcmVuO2lmKGQpaWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2ZvcihiPTAsYz1kLmxlbmd0aDtiPGM7YisrKWlmKGRbYl0ua2V5PT09YSlyZXR1cm4gZFtiXX1lbHNle2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhKXJldHVybiB0aGlzLmNoaWxkcmVuW2FdO2lmKGEucGFyZW50PT09dGhpcylyZXR1cm4gYX1yZXR1cm4gbnVsbH0sX3NldENoaWxkcmVuOmZ1bmN0aW9uKGEpe2UoYSYmKCF0aGlzLmNoaWxkcmVufHwwPT09dGhpcy5jaGlsZHJlbi5sZW5ndGgpLFwib25seSBpbml0IHN1cHBvcnRlZFwiKSx0aGlzLmNoaWxkcmVuPVtdO2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmNoaWxkcmVuLnB1c2gobmV3IHModGhpcyxhW2JdKSl9LGFkZENoaWxkcmVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZixnLGg9bnVsbCxpPVtdO2ZvcihhLmlzUGxhaW5PYmplY3QoYikmJihiPVtiXSksdGhpcy5jaGlsZHJlbnx8KHRoaXMuY2hpbGRyZW49W10pLGQ9MCxmPWIubGVuZ3RoO2Q8ZjtkKyspaS5wdXNoKG5ldyBzKHRoaXMsYltkXSkpO3JldHVybiBoPWlbMF0sbnVsbD09Yz90aGlzLmNoaWxkcmVuPXRoaXMuY2hpbGRyZW4uY29uY2F0KGkpOihjPXRoaXMuX2ZpbmREaXJlY3RDaGlsZChjKSxnPWEuaW5BcnJheShjLHRoaXMuY2hpbGRyZW4pLGUoZz49MCxcImluc2VydEJlZm9yZSBtdXN0IGJlIGFuIGV4aXN0aW5nIGNoaWxkXCIpLHRoaXMuY2hpbGRyZW4uc3BsaWNlLmFwcGx5KHRoaXMuY2hpbGRyZW4sW2csMF0uY29uY2F0KGkpKSksKCF0aGlzLnBhcmVudHx8dGhpcy5wYXJlbnQudWx8fHRoaXMudHIpJiZ0aGlzLnJlbmRlcigpLDM9PT10aGlzLnRyZWUub3B0aW9ucy5zZWxlY3RNb2RlJiZ0aGlzLmZpeFNlbGVjdGlvbjNGcm9tRW5kTm9kZXMoKSx0aGlzLnRyaWdnZXJNb2RpZnlDaGlsZChcImFkZFwiLDE9PT1pLmxlbmd0aD9pWzBdOm51bGwpLGh9LGFkZENsYXNzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRvZ2dsZUNsYXNzKGEsITApfSxhZGROb2RlOmZ1bmN0aW9uKGEsYil7c3dpdGNoKGIhPT1kJiZcIm92ZXJcIiE9PWJ8fChiPVwiY2hpbGRcIiksYil7Y2FzZVwiYWZ0ZXJcIjpyZXR1cm4gdGhpcy5nZXRQYXJlbnQoKS5hZGRDaGlsZHJlbihhLHRoaXMuZ2V0TmV4dFNpYmxpbmcoKSk7Y2FzZVwiYmVmb3JlXCI6cmV0dXJuIHRoaXMuZ2V0UGFyZW50KCkuYWRkQ2hpbGRyZW4oYSx0aGlzKTtjYXNlXCJmaXJzdENoaWxkXCI6dmFyIGM9dGhpcy5jaGlsZHJlbj90aGlzLmNoaWxkcmVuWzBdOm51bGw7cmV0dXJuIHRoaXMuYWRkQ2hpbGRyZW4oYSxjKTtjYXNlXCJjaGlsZFwiOmNhc2VcIm92ZXJcIjpyZXR1cm4gdGhpcy5hZGRDaGlsZHJlbihhKX1lKCExLFwiSW52YWxpZCBtb2RlOiBcIitiKX0sYWRkUGFnaW5nTm9kZTpmdW5jdGlvbihiLGMpe3ZhciBkLGU7aWYoYz1jfHxcImNoaWxkXCIsYj09PSExKXtmb3IoZD10aGlzLmNoaWxkcmVuLmxlbmd0aC0xO2Q+PTA7ZC0tKWU9dGhpcy5jaGlsZHJlbltkXSxcInBhZ2luZ1wiPT09ZS5zdGF0dXNOb2RlVHlwZSYmdGhpcy5yZW1vdmVDaGlsZChlKTtyZXR1cm4gdm9pZCh0aGlzLnBhcnRsb2FkPSExKX1yZXR1cm4gYj1hLmV4dGVuZCh7dGl0bGU6dGhpcy50cmVlLm9wdGlvbnMuc3RyaW5ncy5tb3JlRGF0YSxzdGF0dXNOb2RlVHlwZTpcInBhZ2luZ1wiLGljb246ITF9LGIpLHRoaXMucGFydGxvYWQ9ITAsdGhpcy5hZGROb2RlKGIsYyl9LGFwcGVuZFNpYmxpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkTm9kZShhLFwiYWZ0ZXJcIil9LGFwcGx5UGF0Y2g6ZnVuY3Rpb24oYil7aWYobnVsbD09PWIpcmV0dXJuIHRoaXMucmVtb3ZlKCksayh0aGlzKTt2YXIgYyxkLGUsZj17Y2hpbGRyZW46ITAsZXhwYW5kZWQ6ITAscGFyZW50OiEwfTtmb3IoYyBpbiBiKWU9YltjXSxmW2NdfHxhLmlzRnVuY3Rpb24oZSl8fChJW2NdP3RoaXNbY109ZTp0aGlzLmRhdGFbY109ZSk7cmV0dXJuIGIuaGFzT3duUHJvcGVydHkoXCJjaGlsZHJlblwiKSYmKHRoaXMucmVtb3ZlQ2hpbGRyZW4oKSxiLmNoaWxkcmVuJiZ0aGlzLl9zZXRDaGlsZHJlbihiLmNoaWxkcmVuKSksdGhpcy5pc1Zpc2libGUoKSYmKHRoaXMucmVuZGVyVGl0bGUoKSx0aGlzLnJlbmRlclN0YXR1cygpKSxkPWIuaGFzT3duUHJvcGVydHkoXCJleHBhbmRlZFwiKT90aGlzLnNldEV4cGFuZGVkKGIuZXhwYW5kZWQpOmsodGhpcyl9LGNvbGxhcHNlU2libGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVDb2xsYXBzZVNpYmxpbmdzXCIsdGhpcyl9LGNvcHlUbzpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuYWRkTm9kZSh0aGlzLnRvRGljdCghMCxjKSxiKX0sY291bnRDaGlsZHJlbjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzLmNoaWxkcmVuO2lmKCFlKXJldHVybiAwO2lmKGQ9ZS5sZW5ndGgsYSE9PSExKWZvcihiPTAsYz1kO2I8YztiKyspZCs9ZVtiXS5jb3VudENoaWxkcmVuKCk7cmV0dXJuIGR9LGRlYnVnOmZ1bmN0aW9uKGEpe3RoaXMudHJlZS5vcHRpb25zLmRlYnVnTGV2ZWw+PTImJihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzLnRvU3RyaW5nKCkpLGYoXCJsb2dcIixhcmd1bWVudHMpKX0sZGlzY2FyZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndhcm4oXCJGYW5jeXRyZWVOb2RlLmRpc2NhcmQoKSBpcyBkZXByZWNhdGVkIHNpbmNlIDIwMTQtMDItMTYuIFVzZSAucmVzZXRMYXp5KCkgaW5zdGVhZC5cIiksdGhpcy5yZXNldExhenkoKX0sZGlzY2FyZE1hcmt1cDpmdW5jdGlvbihhKXt2YXIgYj1hP1wibm9kZVJlbW92ZU1hcmt1cFwiOlwibm9kZVJlbW92ZUNoaWxkTWFya3VwXCI7dGhpcy50cmVlLl9jYWxsSG9vayhiLHRoaXMpfSxmaW5kQWxsOmZ1bmN0aW9uKGIpe2I9YS5pc0Z1bmN0aW9uKGIpP2I6cShiKTt2YXIgYz1bXTtyZXR1cm4gdGhpcy52aXNpdChmdW5jdGlvbihhKXtiKGEpJiZjLnB1c2goYSl9KSxjfSxmaW5kRmlyc3Q6ZnVuY3Rpb24oYil7Yj1hLmlzRnVuY3Rpb24oYik/YjpxKGIpO3ZhciBjPW51bGw7cmV0dXJuIHRoaXMudmlzaXQoZnVuY3Rpb24oYSl7aWYoYihhKSlyZXR1cm4gYz1hLCExfSksY30sX2NoYW5nZVNlbGVjdFN0YXR1c0F0dHJzOmZ1bmN0aW9uKGEpe3ZhciBiPSExO3N3aXRjaChhKXtjYXNlITE6Yj10aGlzLnNlbGVjdGVkfHx0aGlzLnBhcnRzZWwsdGhpcy5zZWxlY3RlZD0hMSx0aGlzLnBhcnRzZWw9ITE7YnJlYWs7Y2FzZSEwOmI9IXRoaXMuc2VsZWN0ZWR8fCF0aGlzLnBhcnRzZWwsdGhpcy5zZWxlY3RlZD0hMCx0aGlzLnBhcnRzZWw9ITA7YnJlYWs7Y2FzZSBkOmI9dGhpcy5zZWxlY3RlZHx8IXRoaXMucGFydHNlbCx0aGlzLnNlbGVjdGVkPSExLHRoaXMucGFydHNlbD0hMDticmVhaztkZWZhdWx0OmUoITEsXCJpbnZhbGlkIHN0YXRlOiBcIithKX1yZXR1cm4gYiYmdGhpcy5yZW5kZXJTdGF0dXMoKSxifSxmaXhTZWxlY3Rpb24zQWZ0ZXJDbGljazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaXNTZWxlY3RlZCgpO3RoaXMudmlzaXQoZnVuY3Rpb24oYil7Yi5fY2hhbmdlU2VsZWN0U3RhdHVzQXR0cnMoYSl9KSx0aGlzLmZpeFNlbGVjdGlvbjNGcm9tRW5kTm9kZXMoKX0sZml4U2VsZWN0aW9uM0Zyb21FbmROb2RlczpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYil7dmFyIGMsZSxmLGcsaCxpLGosaz1iLmNoaWxkcmVuO2lmKGsmJmsubGVuZ3RoKXtmb3IoaT0hMCxqPSExLGM9MCxlPWsubGVuZ3RoO2M8ZTtjKyspZj1rW2NdLGc9YShmKSxnIT09ITEmJihqPSEwKSxnIT09ITAmJihpPSExKTtoPSEhaXx8ISFqJiZkfWVsc2UgaD0hIWIuc2VsZWN0ZWQ7cmV0dXJuIGIuX2NoYW5nZVNlbGVjdFN0YXR1c0F0dHJzKGgpLGh9ZSgzPT09dGhpcy50cmVlLm9wdGlvbnMuc2VsZWN0TW9kZSxcImV4cGVjdGVkIHNlbGVjdE1vZGUgM1wiKSxhKHRoaXMpLHRoaXMudmlzaXRQYXJlbnRzKGZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmLGc9YS5jaGlsZHJlbixoPSEwLGk9ITE7Zm9yKGI9MCxjPWcubGVuZ3RoO2I8YztiKyspZT1nW2JdLChlLnNlbGVjdGVkfHxlLnBhcnRzZWwpJiYoaT0hMCksZS51bnNlbGVjdGFibGV8fGUuc2VsZWN0ZWR8fChoPSExKTtmPSEhaHx8ISFpJiZkLGEuX2NoYW5nZVNlbGVjdFN0YXR1c0F0dHJzKGYpfSl9LGZyb21EaWN0OmZ1bmN0aW9uKGIpe2Zvcih2YXIgYyBpbiBiKUlbY10/dGhpc1tjXT1iW2NdOlwiZGF0YVwiPT09Yz9hLmV4dGVuZCh0aGlzLmRhdGEsYi5kYXRhKTphLmlzRnVuY3Rpb24oYltjXSl8fEtbY118fCh0aGlzLmRhdGFbY109YltjXSk7Yi5jaGlsZHJlbiYmKHRoaXMucmVtb3ZlQ2hpbGRyZW4oKSx0aGlzLmFkZENoaWxkcmVuKGIuY2hpbGRyZW4pKSx0aGlzLnJlbmRlclRpdGxlKCl9LGdldENoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQ2hpbGRyZW4oKT09PWQ/ZDp0aGlzLmNoaWxkcmVufSxnZXRGaXJzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW4/dGhpcy5jaGlsZHJlblswXTpudWxsfSxnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiBhLmluQXJyYXkodGhpcyx0aGlzLnBhcmVudC5jaGlsZHJlbil9LGdldEluZGV4SGllcjpmdW5jdGlvbihiLGMpe2I9Ynx8XCIuXCI7dmFyIGQsZT1bXTtyZXR1cm4gYS5lYWNoKHRoaXMuZ2V0UGFyZW50TGlzdCghMSwhMCksZnVuY3Rpb24oYSxiKXtkPVwiXCIrKGIuZ2V0SW5kZXgoKSsxKSxjJiYoZD0oXCIwMDAwMDAwXCIrZCkuc3Vic3RyKC1jKSksZS5wdXNoKGQpfSksZS5qb2luKGIpfSxnZXRLZXlQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9dGhpcy50cmVlLm9wdGlvbnMua2V5UGF0aFNlcGFyYXRvcjtyZXR1cm4gdGhpcy52aXNpdFBhcmVudHMoZnVuY3Rpb24oYSl7YS5wYXJlbnQmJmIudW5zaGlmdChhLmtleSl9LCFhKSxjK2Iuam9pbihjKX0sZ2V0TGFzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW4/dGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTpudWxsfSxnZXRMZXZlbDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5wYXJlbnQ7YjspYSsrLGI9Yi5wYXJlbnQ7cmV0dXJuIGF9LGdldE5leHRTaWJsaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5wYXJlbnQpe3ZhciBhLGIsYz10aGlzLnBhcmVudC5jaGlsZHJlbjtmb3IoYT0wLGI9Yy5sZW5ndGgtMTthPGI7YSsrKWlmKGNbYV09PT10aGlzKXJldHVybiBjW2ErMV19cmV0dXJuIG51bGx9LGdldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudH0sZ2V0UGFyZW50TGlzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXSxkPWI/dGhpczp0aGlzLnBhcmVudDtkOykoYXx8ZC5wYXJlbnQpJiZjLnVuc2hpZnQoZCksZD1kLnBhcmVudDtyZXR1cm4gY30sZ2V0UHJldlNpYmxpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLnBhcmVudCl7dmFyIGEsYixjPXRoaXMucGFyZW50LmNoaWxkcmVuO2ZvcihhPTEsYj1jLmxlbmd0aDthPGI7YSsrKWlmKGNbYV09PT10aGlzKXJldHVybiBjW2EtMV19cmV0dXJuIG51bGx9LGdldFNlbGVjdGVkTm9kZXM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIHRoaXMudmlzaXQoZnVuY3Rpb24oYyl7aWYoYy5zZWxlY3RlZCYmKGIucHVzaChjKSxhPT09ITApKXJldHVyblwic2tpcFwifSksYn0saGFzQ2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXp5P251bGw9PXRoaXMuY2hpbGRyZW4/ZDowIT09dGhpcy5jaGlsZHJlbi5sZW5ndGgmJigxIT09dGhpcy5jaGlsZHJlbi5sZW5ndGh8fCF0aGlzLmNoaWxkcmVuWzBdLmlzU3RhdHVzTm9kZSgpfHxkKTohKCF0aGlzLmNoaWxkcmVufHwhdGhpcy5jaGlsZHJlbi5sZW5ndGgpfSxoYXNGb2N1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuaGFzRm9jdXMoKSYmdGhpcy50cmVlLmZvY3VzTm9kZT09PXRoaXN9LGluZm86ZnVuY3Rpb24oYSl7dGhpcy50cmVlLm9wdGlvbnMuZGVidWdMZXZlbD49MSYmKEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLHRoaXMudG9TdHJpbmcoKSksZihcImluZm9cIixhcmd1bWVudHMpKX0saXNBY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLmFjdGl2ZU5vZGU9PT10aGlzfSxpc0NoaWxkT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudD09PWF9LGlzRGVzY2VuZGFudE9mOmZ1bmN0aW9uKGEpe2lmKCFhfHxhLnRyZWUhPT10aGlzLnRyZWUpcmV0dXJuITE7Zm9yKHZhciBiPXRoaXMucGFyZW50O2I7KXtpZihiPT09YSlyZXR1cm4hMDtiPWIucGFyZW50fXJldHVybiExfSxpc0V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmV4cGFuZGVkfSxpc0ZpcnN0U2libGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50O3JldHVybiFhfHxhLmNoaWxkcmVuWzBdPT09dGhpc30saXNGb2xkZXI6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZm9sZGVyfSxpc0xhc3RTaWJsaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnQ7cmV0dXJuIWF8fGEuY2hpbGRyZW5bYS5jaGlsZHJlbi5sZW5ndGgtMV09PT10aGlzfSxpc0xhenk6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMubGF6eX0saXNMb2FkZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5sYXp5fHx0aGlzLmhhc0NoaWxkcmVuKCkhPT1kfSxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2lzTG9hZGluZ30saXNSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNSb290Tm9kZSgpfSxpc1BhcnRsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnBhcnRsb2FkfSxpc1Jvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5yb290Tm9kZT09PXRoaXN9LGlzU2VsZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc2VsZWN0ZWR9LGlzU3RhdHVzTm9kZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5zdGF0dXNOb2RlVHlwZX0saXNQYWdpbmdOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuXCJwYWdpbmdcIj09PXRoaXMuc3RhdHVzTm9kZVR5cGV9LGlzVG9wTGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLnJvb3ROb2RlPT09dGhpcy5wYXJlbnR9LGlzVW5kZWZpbmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQ2hpbGRyZW4oKT09PWR9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLmdldFBhcmVudExpc3QoITEsITEpO2ZvcihhPTAsYj1jLmxlbmd0aDthPGI7YSsrKWlmKCFjW2FdLmV4cGFuZGVkKXJldHVybiExO3JldHVybiEwfSxsYXp5TG9hZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53YXJuKFwiRmFuY3l0cmVlTm9kZS5sYXp5TG9hZCgpIGlzIGRlcHJlY2F0ZWQgc2luY2UgMjAxNC0wMi0xNi4gVXNlIC5sb2FkKCkgaW5zdGVhZC5cIiksdGhpcy5sb2FkKGEpfSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLGY9dGhpcy5pc0V4cGFuZGVkKCk7cmV0dXJuIGUodGhpcy5pc0xhenkoKSxcImxvYWQoKSByZXF1aXJlcyBhIGxhenkgbm9kZVwiKSxhfHx0aGlzLmlzVW5kZWZpbmVkKCk/KHRoaXMuaXNMb2FkZWQoKSYmdGhpcy5yZXNldExhenkoKSxjPXRoaXMudHJlZS5fdHJpZ2dlck5vZGVFdmVudChcImxhenlMb2FkXCIsdGhpcyksYz09PSExP2sodGhpcyk6KGUoXCJib29sZWFuXCIhPXR5cGVvZiBjLFwibGF6eUxvYWQgZXZlbnQgbXVzdCByZXR1cm4gc291cmNlIGluIGRhdGEucmVzdWx0XCIpLGI9dGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVMb2FkQ2hpbGRyZW5cIix0aGlzLGMpLGY/KHRoaXMuZXhwYW5kZWQ9ITAsYi5hbHdheXMoZnVuY3Rpb24oKXtkLnJlbmRlcigpfSkpOmIuYWx3YXlzKGZ1bmN0aW9uKCl7ZC5yZW5kZXJTdGF0dXMoKX0pLGIpKTprKHRoaXMpfSxtYWtlVmlzaWJsZTpmdW5jdGlvbihiKXt2YXIgYyxkPXRoaXMsZT1bXSxmPW5ldyBhLkRlZmVycmVkLGc9dGhpcy5nZXRQYXJlbnRMaXN0KCExLCExKSxoPWcubGVuZ3RoLGk9IShiJiZiLm5vQW5pbWF0aW9uPT09ITApLGo9IShiJiZiLnNjcm9sbEludG9WaWV3PT09ITEpO2ZvcihjPWgtMTtjPj0wO2MtLSllLnB1c2goZ1tjXS5zZXRFeHBhbmRlZCghMCxiKSk7cmV0dXJuIGEud2hlbi5hcHBseShhLGUpLmRvbmUoZnVuY3Rpb24oKXtqP2Quc2Nyb2xsSW50b1ZpZXcoaSkuZG9uZShmdW5jdGlvbigpe2YucmVzb2x2ZSgpfSk6Zi5yZXNvbHZlKCl9KSxmLnByb21pc2UoKX0sbW92ZVRvOmZ1bmN0aW9uKGIsYyxmKXtjPT09ZHx8XCJvdmVyXCI9PT1jP2M9XCJjaGlsZFwiOlwiZmlyc3RDaGlsZFwiPT09YyYmKGIuY2hpbGRyZW4mJmIuY2hpbGRyZW4ubGVuZ3RoPyhjPVwiYmVmb3JlXCIsYj1iLmNoaWxkcmVuWzBdKTpjPVwiY2hpbGRcIik7dmFyIGcsaD10aGlzLnBhcmVudCxpPVwiY2hpbGRcIj09PWM/YjpiLnBhcmVudDtpZih0aGlzIT09Yil7aWYodGhpcy5wYXJlbnQ/aS5pc0Rlc2NlbmRhbnRPZih0aGlzKSYmYS5lcnJvcihcIkNhbm5vdCBtb3ZlIGEgbm9kZSB0byBpdHMgb3duIGRlc2NlbmRhbnRcIik6YS5lcnJvcihcIkNhbm5vdCBtb3ZlIHN5c3RlbSByb290XCIpLGkhPT1oJiZoLnRyaWdnZXJNb2RpZnlDaGlsZChcInJlbW92ZVwiLHRoaXMpLDE9PT10aGlzLnBhcmVudC5jaGlsZHJlbi5sZW5ndGgpe2lmKHRoaXMucGFyZW50PT09aSlyZXR1cm47dGhpcy5wYXJlbnQuY2hpbGRyZW49dGhpcy5wYXJlbnQubGF6eT9bXTpudWxsLHRoaXMucGFyZW50LmV4cGFuZGVkPSExfWVsc2UgZz1hLmluQXJyYXkodGhpcyx0aGlzLnBhcmVudC5jaGlsZHJlbiksZShnPj0wLFwiaW52YWxpZCBzb3VyY2UgcGFyZW50XCIpLHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShnLDEpO2lmKHRoaXMucGFyZW50PWksaS5oYXNDaGlsZHJlbigpKXN3aXRjaChjKXtjYXNlXCJjaGlsZFwiOmkuY2hpbGRyZW4ucHVzaCh0aGlzKTticmVhaztjYXNlXCJiZWZvcmVcIjpnPWEuaW5BcnJheShiLGkuY2hpbGRyZW4pLGUoZz49MCxcImludmFsaWQgdGFyZ2V0IHBhcmVudFwiKSxpLmNoaWxkcmVuLnNwbGljZShnLDAsdGhpcyk7YnJlYWs7Y2FzZVwiYWZ0ZXJcIjpnPWEuaW5BcnJheShiLGkuY2hpbGRyZW4pLGUoZz49MCxcImludmFsaWQgdGFyZ2V0IHBhcmVudFwiKSxpLmNoaWxkcmVuLnNwbGljZShnKzEsMCx0aGlzKTticmVhaztkZWZhdWx0OmEuZXJyb3IoXCJJbnZhbGlkIG1vZGUgXCIrYyl9ZWxzZSBpLmNoaWxkcmVuPVt0aGlzXTtmJiZiLnZpc2l0KGYsITApLGk9PT1oP2kudHJpZ2dlck1vZGlmeUNoaWxkKFwibW92ZVwiLHRoaXMpOmkudHJpZ2dlck1vZGlmeUNoaWxkKFwiYWRkXCIsdGhpcyksdGhpcy50cmVlIT09Yi50cmVlJiYodGhpcy53YXJuKFwiQ3Jvc3MtdHJlZSBtb3ZlVG8gaXMgZXhwZXJpbWFudGFsIVwiKSx0aGlzLnZpc2l0KGZ1bmN0aW9uKGEpe2EudHJlZT1iLnRyZWV9LCEwKSksaC5pc0Rlc2NlbmRhbnRPZihpKXx8aC5yZW5kZXIoKSxpLmlzRGVzY2VuZGFudE9mKGgpfHxpPT09aHx8aS5yZW5kZXIoKX19LG5hdmlnYXRlOmZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZChkKXtpZihkKXt0cnl7ZC5tYWtlVmlzaWJsZSh7c2Nyb2xsSW50b1ZpZXc6ITF9KX1jYXRjaChlKXt9cmV0dXJuIGEoZC5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpP2M9PT0hMT9kLnNldEZvY3VzKCk6ZC5zZXRBY3RpdmUoKTooZC5kZWJ1ZyhcIk5hdmlnYXRlOiBza2lwcGluZyBoaWRkZW4gbm9kZVwiKSx2b2lkIGQubmF2aWdhdGUoYixjKSl9fXZhciBlLGYsZyxoPSEwLGk9YS51aS5rZXlDb2RlLGo9bnVsbDtzd2l0Y2goYil7Y2FzZSBpLkJBQ0tTUEFDRTp0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQucGFyZW50JiYoZz1kKHRoaXMucGFyZW50KSk7YnJlYWs7Y2FzZSBpLkhPTUU6dGhpcy50cmVlLnZpc2l0KGZ1bmN0aW9uKGIpe2lmKGEoYi5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiBnPWQoYiksITF9KTticmVhaztjYXNlIGkuRU5EOnRoaXMudHJlZS52aXNpdChmdW5jdGlvbihiKXthKGIuc3BhbikuaXMoXCI6dmlzaWJsZVwiKSYmKGc9Yil9KSxnJiYoZz1kKGcpKTticmVhaztjYXNlIGkuTEVGVDp0aGlzLmV4cGFuZGVkPyh0aGlzLnNldEV4cGFuZGVkKCExKSxnPWQodGhpcykpOnRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5wYXJlbnQmJihnPWQodGhpcy5wYXJlbnQpKTticmVhaztjYXNlIGkuUklHSFQ6dGhpcy5leHBhbmRlZHx8IXRoaXMuY2hpbGRyZW4mJiF0aGlzLmxhenk/dGhpcy5jaGlsZHJlbiYmdGhpcy5jaGlsZHJlbi5sZW5ndGgmJihnPWQodGhpcy5jaGlsZHJlblswXSkpOih0aGlzLnNldEV4cGFuZGVkKCksZz1kKHRoaXMpKTticmVhaztjYXNlIGkuVVA6Zm9yKGo9dGhpcy5nZXRQcmV2U2libGluZygpO2omJiFhKGouc3BhbikuaXMoXCI6dmlzaWJsZVwiKTspaj1qLmdldFByZXZTaWJsaW5nKCk7Zm9yKDtqJiZqLmV4cGFuZGVkJiZqLmNoaWxkcmVuJiZqLmNoaWxkcmVuLmxlbmd0aDspaj1qLmNoaWxkcmVuW2ouY2hpbGRyZW4ubGVuZ3RoLTFdOyFqJiZ0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQucGFyZW50JiYoaj10aGlzLnBhcmVudCksZz1kKGopO2JyZWFrO2Nhc2UgaS5ET1dOOmlmKHRoaXMuZXhwYW5kZWQmJnRoaXMuY2hpbGRyZW4mJnRoaXMuY2hpbGRyZW4ubGVuZ3RoKWo9dGhpcy5jaGlsZHJlblswXTtlbHNlIGZvcihmPXRoaXMuZ2V0UGFyZW50TGlzdCghMSwhMCksZT1mLmxlbmd0aC0xO2U+PTA7ZS0tKXtmb3Ioaj1mW2VdLmdldE5leHRTaWJsaW5nKCk7aiYmIWEoai5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpOylqPWouZ2V0TmV4dFNpYmxpbmcoKTtpZihqKWJyZWFrfWc9ZChqKTticmVhaztkZWZhdWx0Omg9ITF9cmV0dXJuIGd8fGsoKX0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpfSxyZW1vdmVDaGlsZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVSZW1vdmVDaGlsZFwiLHRoaXMsYSl9LHJlbW92ZUNoaWxkcmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlUmVtb3ZlQ2hpbGRyZW5cIix0aGlzKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9nZ2xlQ2xhc3MoYSwhMSl9LHJlbmRlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVJlbmRlclwiLHRoaXMsYSxiKX0scmVuZGVyVGl0bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVSZW5kZXJUaXRsZVwiLHRoaXMpfSxyZW5kZXJTdGF0dXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVSZW5kZXJTdGF0dXNcIix0aGlzKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYil7dmFyIGMsZD10aGlzLnBhcmVudCxmPWEuaW5BcnJheSh0aGlzLGQuY2hpbGRyZW4pLGc9dGhpcztyZXR1cm4gZSh0aGlzLmlzUGFnaW5nTm9kZSgpLFwicmVwbGFjZVdpdGgoKSBjdXJyZW50bHkgcmVxdWlyZXMgYSBwYWdpbmcgc3RhdHVzIG5vZGVcIiksYz10aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZUxvYWRDaGlsZHJlblwiLHRoaXMsYiksYy5kb25lKGZ1bmN0aW9uKGEpe3ZhciBiPWcuY2hpbGRyZW47Zm9yKHU9MDt1PGIubGVuZ3RoO3UrKyliW3VdLnBhcmVudD1kO2QuY2hpbGRyZW4uc3BsaWNlLmFwcGx5KGQuY2hpbGRyZW4sW2YrMSwwXS5jb25jYXQoYikpLGcuY2hpbGRyZW49bnVsbCxnLnJlbW92ZSgpLGQucmVuZGVyKCl9KS5mYWlsKGZ1bmN0aW9uKCl7Zy5zZXRFeHBhbmRlZCgpfSksY30scmVzZXRMYXp5OmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVDaGlsZHJlbigpLHRoaXMuZXhwYW5kZWQ9ITEsdGhpcy5sYXp5PSEwLHRoaXMuY2hpbGRyZW49ZCx0aGlzLnJlbmRlclN0YXR1cygpfSxzY2hlZHVsZUFjdGlvbjpmdW5jdGlvbihiLGMpe3RoaXMudHJlZS50aW1lciYmY2xlYXJUaW1lb3V0KHRoaXMudHJlZS50aW1lciksdGhpcy50cmVlLnRpbWVyPW51bGw7dmFyIGQ9dGhpcztzd2l0Y2goYil7Y2FzZVwiY2FuY2VsXCI6YnJlYWs7Y2FzZVwiZXhwYW5kXCI6dGhpcy50cmVlLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtkLnRyZWUuZGVidWcoXCJzZXRUaW1lb3V0OiB0cmlnZ2VyIGV4cGFuZFwiKSxkLnNldEV4cGFuZGVkKCEwKX0sYyk7YnJlYWs7Y2FzZVwiYWN0aXZhdGVcIjp0aGlzLnRyZWUudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2QudHJlZS5kZWJ1ZyhcInNldFRpbWVvdXQ6IHRyaWdnZXIgYWN0aXZhdGVcIiksZC5zZXRBY3RpdmUoITApfSxjKTticmVhaztkZWZhdWx0OmEuZXJyb3IoXCJJbnZhbGlkIG1vZGUgXCIrYil9fSxzY3JvbGxJbnRvVmlldzpmdW5jdGlvbihmLGgpe2ghPT1kJiZnKGgpJiYodGhpcy53YXJuKFwic2Nyb2xsSW50b1ZpZXcoKSB3aXRoICd0b3BOb2RlJyBvcHRpb24gaXMgZGVwcmVjYXRlZCBzaW5jZSAyMDE0LTA1LTA4LiBVc2UgJ29wdGlvbnMudG9wTm9kZScgaW5zdGVhZC5cIiksaD17dG9wTm9kZTpofSk7dmFyIGksaixsLG0sbj1hLmV4dGVuZCh7ZWZmZWN0czpmPT09ITA/e2R1cmF0aW9uOjIwMCxxdWV1ZTohMX06ZixzY3JvbGxPZnM6dGhpcy50cmVlLm9wdGlvbnMuc2Nyb2xsT2ZzLHNjcm9sbFBhcmVudDp0aGlzLnRyZWUub3B0aW9ucy5zY3JvbGxQYXJlbnR8fHRoaXMudHJlZS4kY29udGFpbmVyLHRvcE5vZGU6bnVsbH0saCksbz1uZXcgYS5EZWZlcnJlZCxwPXRoaXMscT1hKHRoaXMuc3BhbikuaGVpZ2h0KCkscj1hKG4uc2Nyb2xsUGFyZW50KSxzPW4uc2Nyb2xsT2ZzLnRvcHx8MCx0PW4uc2Nyb2xsT2ZzLmJvdHRvbXx8MCx1PXIuaGVpZ2h0KCksdj1yLnNjcm9sbFRvcCgpLHc9cix4PXJbMF09PT1iLHk9bi50b3BOb2RlfHxudWxsLHo9bnVsbDtyZXR1cm4gYSh0aGlzLnNwYW4pLmlzKFwiOnZpc2libGVcIik/KHg/KGo9YSh0aGlzLnNwYW4pLm9mZnNldCgpLnRvcCxpPXkmJnkuc3Bhbj9hKHkuc3Bhbikub2Zmc2V0KCkudG9wOjAsdz1hKFwiaHRtbCxib2R5XCIpKTooZShyWzBdIT09YyYmclswXSE9PWMuYm9keSxcInNjcm9sbFBhcmVudCBzaG91bGQgYmUgYSBzaW1wbGUgZWxlbWVudCBvciBgd2luZG93YCwgbm90IGRvY3VtZW50IG9yIGJvZHkuXCIpLG09ci5vZmZzZXQoKS50b3Asaj1hKHRoaXMuc3Bhbikub2Zmc2V0KCkudG9wLW0rdixpPXk/YSh5LnNwYW4pLm9mZnNldCgpLnRvcC1tK3Y6MCxsPU1hdGgubWF4KDAsci5pbm5lckhlaWdodCgpLXJbMF0uY2xpZW50SGVpZ2h0KSx1LT1sKSxqPHYrcz96PWotczpqK3E+dit1LXQmJih6PWorcS11K3QseSYmKGUoeS5pc1Jvb3ROb2RlKCl8fGEoeS5zcGFuKS5pcyhcIjp2aXNpYmxlXCIpLFwidG9wTm9kZSBtdXN0IGJlIHZpc2libGVcIiksaTx6JiYoej1pLXMpKSksbnVsbCE9PXo/bi5lZmZlY3RzPyhuLmVmZmVjdHMuY29tcGxldGU9ZnVuY3Rpb24oKXtvLnJlc29sdmVXaXRoKHApfSx3LnN0b3AoITApLmFuaW1hdGUoe3Njcm9sbFRvcDp6fSxuLmVmZmVjdHMpKTood1swXS5zY3JvbGxUb3A9eixvLnJlc29sdmVXaXRoKHRoaXMpKTpvLnJlc29sdmVXaXRoKHRoaXMpLG8ucHJvbWlzZSgpKToodGhpcy53YXJuKFwic2Nyb2xsSW50b1ZpZXcoKTogbm9kZSBpcyBpbnZpc2libGUuXCIpLGsoKSl9LHNldEFjdGl2ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVNldEFjdGl2ZVwiLHRoaXMsYSxiKX0sc2V0RXhwYW5kZWQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVTZXRFeHBhbmRlZFwiLHRoaXMsYSxiKX0sc2V0Rm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlU2V0Rm9jdXNcIix0aGlzLGEpfSxzZXRTZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cmVlLl9jYWxsSG9vayhcIm5vZGVTZXRTZWxlY3RlZFwiLHRoaXMsYSl9LHNldFN0YXR1czpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlU2V0U3RhdHVzXCIsdGhpcyxhLGIsYyl9LHNldFRpdGxlOmZ1bmN0aW9uKGEpe3RoaXMudGl0bGU9YSx0aGlzLnJlbmRlclRpdGxlKCksdGhpcy50cmlnZ2VyTW9kaWZ5KFwicmVuYW1lXCIpfSxzb3J0Q2hpbGRyZW46ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5jaGlsZHJlbjtpZihlKXtpZihhPWF8fGZ1bmN0aW9uKGEsYil7dmFyIGM9YS50aXRsZS50b0xvd2VyQ2FzZSgpLGQ9Yi50aXRsZS50b0xvd2VyQ2FzZSgpO3JldHVybiBjPT09ZD8wOmM+ZD8xOi0xfSxlLnNvcnQoYSksYilmb3IoYz0wLGQ9ZS5sZW5ndGg7YzxkO2MrKyllW2NdLmNoaWxkcmVuJiZlW2NdLnNvcnRDaGlsZHJlbihhLFwiJG5vcmVuZGVyJFwiKTtcIiRub3JlbmRlciRcIiE9PWImJnRoaXMucmVuZGVyKCksdGhpcy50cmlnZ2VyTW9kaWZ5Q2hpbGQoXCJzb3J0XCIpfX0sdG9EaWN0OmZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmLGc9e30saD10aGlzO2lmKGEuZWFjaChILGZ1bmN0aW9uKGEsYil7KGhbYl18fGhbYl09PT0hMSkmJihnW2JdPWhbYl0pfSksYS5pc0VtcHR5T2JqZWN0KHRoaXMuZGF0YSl8fChnLmRhdGE9YS5leHRlbmQoe30sdGhpcy5kYXRhKSxhLmlzRW1wdHlPYmplY3QoZy5kYXRhKSYmZGVsZXRlIGcuZGF0YSksYyYmYyhnLGgpLGImJnRoaXMuaGFzQ2hpbGRyZW4oKSlmb3IoZy5jaGlsZHJlbj1bXSxkPTAsZT10aGlzLmNoaWxkcmVuLmxlbmd0aDtkPGU7ZCsrKWY9dGhpcy5jaGlsZHJlbltkXSxmLmlzU3RhdHVzTm9kZSgpfHxnLmNoaWxkcmVuLnB1c2goZi50b0RpY3QoITAsYykpO3JldHVybiBnfSx0b2dnbGVDbGFzczpmdW5jdGlvbihiLGMpe3ZhciBlLGYsZz0vXFxTKy9nLGg9Yi5tYXRjaChnKXx8W10saT0wLGo9ITEsaz10aGlzW3RoaXMudHJlZS5zdGF0dXNDbGFzc1Byb3BOYW1lXSxsPVwiIFwiKyh0aGlzLmV4dHJhQ2xhc3Nlc3x8XCJcIikrXCIgXCI7Zm9yKGsmJmEoaykudG9nZ2xlQ2xhc3MoYixjKTtlPWhbaSsrXTspaWYoZj1sLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTAsYz1jPT09ZD8hZjohIWMpZnx8KGwrPWUrXCIgXCIsaj0hMCk7ZWxzZSBmb3IoO2wuaW5kZXhPZihcIiBcIitlK1wiIFwiKT4tMTspbD1sLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7cmV0dXJuIHRoaXMuZXh0cmFDbGFzc2VzPWEudHJpbShsKSxqfSx0b2dnbGVFeHBhbmRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwibm9kZVRvZ2dsZUV4cGFuZGVkXCIsdGhpcyl9LHRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5fY2FsbEhvb2soXCJub2RlVG9nZ2xlU2VsZWN0ZWRcIix0aGlzKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIjxGYW5jeXRyZWVOb2RlKCNcIit0aGlzLmtleStcIiwgJ1wiK3RoaXMudGl0bGUrXCInKT5cIn0sdHJpZ2dlck1vZGlmeUNoaWxkOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmPXRoaXMudHJlZS5vcHRpb25zLm1vZGlmeUNoaWxkO2YmJihjJiZjLnBhcmVudCE9PXRoaXMmJmEuZXJyb3IoXCJjaGlsZE5vZGUgXCIrYytcIiBpcyBub3QgYSBjaGlsZCBvZiBcIit0aGlzKSxlPXtub2RlOnRoaXMsdHJlZTp0aGlzLnRyZWUsb3BlcmF0aW9uOmIsY2hpbGROb2RlOmN8fG51bGx9LGQmJmEuZXh0ZW5kKGUsZCksZih7dHlwZTpcIm1vZGlmeUNoaWxkXCJ9LGUpKX0sdHJpZ2dlck1vZGlmeTpmdW5jdGlvbihhLGIpe3RoaXMucGFyZW50LnRyaWdnZXJNb2RpZnlDaGlsZChhLHRoaXMsYil9LHZpc2l0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPSEwLGY9dGhpcy5jaGlsZHJlbjtpZihiPT09ITAmJihlPWEodGhpcyksZT09PSExfHxcInNraXBcIj09PWUpKXJldHVybiBlO2lmKGYpZm9yKGM9MCxkPWYubGVuZ3RoO2M8ZCYmKGU9ZltjXS52aXNpdChhLCEwKSxlIT09ITEpO2MrKyk7cmV0dXJuIGV9LHZpc2l0QW5kTG9hZDpmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9dGhpcztyZXR1cm4gYiYmYz09PSEwJiYoZj1iKGgpLGY9PT0hMXx8XCJza2lwXCI9PT1mKT9kP2Y6aygpOmguY2hpbGRyZW58fGgubGF6eT8oZT1uZXcgYS5EZWZlcnJlZCxnPVtdLGgubG9hZCgpLmRvbmUoZnVuY3Rpb24oKXtmb3IodmFyIGM9MCxkPWguY2hpbGRyZW4ubGVuZ3RoO2M8ZDtjKyspe2lmKGY9aC5jaGlsZHJlbltjXS52aXNpdEFuZExvYWQoYiwhMCwhMCksZj09PSExKXtlLnJlamVjdCgpO2JyZWFrfVwic2tpcFwiIT09ZiYmZy5wdXNoKGYpfWEud2hlbi5hcHBseSh0aGlzLGcpLnRoZW4oZnVuY3Rpb24oKXtlLnJlc29sdmUoKX0pfSksZS5wcm9taXNlKCkpOmsoKX0sdmlzaXRQYXJlbnRzOmZ1bmN0aW9uKGEsYil7aWYoYiYmYSh0aGlzKT09PSExKXJldHVybiExO2Zvcih2YXIgYz10aGlzLnBhcmVudDtjOyl7aWYoYShjKT09PSExKXJldHVybiExO2M9Yy5wYXJlbnR9cmV0dXJuITB9LHdhcm46ZnVuY3Rpb24oYSl7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcy50b1N0cmluZygpKSxmKFwid2FyblwiLGFyZ3VtZW50cyl9fSx0LnByb3RvdHlwZT17X21ha2VIb29rQ29udGV4dDpmdW5jdGlvbihiLGMsZSl7dmFyIGYsZztyZXR1cm4gYi5ub2RlIT09ZD8oYyYmYi5vcmlnaW5hbEV2ZW50IT09YyYmYS5lcnJvcihcImludmFsaWQgYXJnc1wiKSxmPWIpOmIudHJlZT8oZz1iLnRyZWUsZj17bm9kZTpiLHRyZWU6Zyx3aWRnZXQ6Zy53aWRnZXQsb3B0aW9uczpnLndpZGdldC5vcHRpb25zLG9yaWdpbmFsRXZlbnQ6Y30pOmIud2lkZ2V0P2Y9e25vZGU6bnVsbCx0cmVlOmIsd2lkZ2V0OmIud2lkZ2V0LG9wdGlvbnM6Yi53aWRnZXQub3B0aW9ucyxvcmlnaW5hbEV2ZW50OmN9OmEuZXJyb3IoXCJpbnZhbGlkIGFyZ3NcIiksZSYmYS5leHRlbmQoZixlKSxmfSxfY2FsbEhvb2s6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXRoaXMuX21ha2VIb29rQ29udGV4dChjKSxmPXRoaXNbYl0sZz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGEuaXNGdW5jdGlvbihmKXx8YS5lcnJvcihcIl9jYWxsSG9vaygnXCIrYitcIicpIGlzIG5vdCBhIGZ1bmN0aW9uXCIpLGcudW5zaGlmdChlKSxmLmFwcGx5KHRoaXMsZyl9LF9yZXF1aXJlRXh0ZW5zaW9uOmZ1bmN0aW9uKGIsYyxkLGYpe2Q9ISFkO3ZhciBnPXRoaXMuX2xvY2FsLm5hbWUsaD10aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyxpPWEuaW5BcnJheShiLGgpPGEuaW5BcnJheShnLGgpLGo9YyYmbnVsbD09dGhpcy5leHRbYl0saz0haiYmbnVsbCE9ZCYmZCE9PWk7cmV0dXJuIGUoZyYmZyE9PWIsXCJpbnZhbGlkIG9yIHNhbWUgbmFtZVwiKSwhaiYmIWt8fChmfHwoanx8Yz8oZj1cIidcIitnK1wiJyBleHRlbnNpb24gcmVxdWlyZXMgJ1wiK2IrXCInXCIsayYmKGYrPVwiIHRvIGJlIHJlZ2lzdGVyZWQgXCIrKGQ/XCJiZWZvcmVcIjpcImFmdGVyXCIpK1wiIGl0c2VsZlwiKSk6Zj1cIklmIHVzZWQgdG9nZXRoZXIsIGBcIitiK1wiYCBtdXN0IGJlIHJlZ2lzdGVyZWQgXCIrKGQ/XCJiZWZvcmVcIjpcImFmdGVyXCIpK1wiIGBcIitnK1wiYFwiKSxhLmVycm9yKGYpLCExKX0sYWN0aXZhdGVLZXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXROb2RlQnlLZXkoYSk7cmV0dXJuIGI/Yi5zZXRBY3RpdmUoKTp0aGlzLmFjdGl2ZU5vZGUmJnRoaXMuYWN0aXZlTm9kZS5zZXRBY3RpdmUoITEpLGJ9LGFkZFBhZ2luZ05vZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yb290Tm9kZS5hZGRQYWdpbmdOb2RlKGEsYil9LGFwcGx5UGF0Y2g6ZnVuY3Rpb24oYil7dmFyIGMsZCxmLGcsaCxpLGo9Yi5sZW5ndGgsaz1bXTtmb3IoZD0wO2Q8ajtkKyspZj1iW2RdLGUoMj09PWYubGVuZ3RoLFwicGF0Y2hMaXN0IG11c3QgYmUgYW4gYXJyYXkgb2YgbGVuZ3RoLTItYXJyYXlzXCIpLGc9ZlswXSxoPWZbMV0saT1udWxsPT09Zz90aGlzLnJvb3ROb2RlOnRoaXMuZ2V0Tm9kZUJ5S2V5KGcpLGk/KGM9bmV3IGEuRGVmZXJyZWQsay5wdXNoKGMpLGkuYXBwbHlQYXRjaChoKS5hbHdheXMobShjLGkpKSk6dGhpcy53YXJuKFwiY291bGQgbm90IGZpbmQgbm9kZSB3aXRoIGtleSAnXCIrZytcIidcIik7cmV0dXJuIGEud2hlbi5hcHBseShhLGspLnByb21pc2UoKX0sY2xlYXI6ZnVuY3Rpb24oYSl7dGhpcy5fY2FsbEhvb2soXCJ0cmVlQ2xlYXJcIix0aGlzKX0sY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290Tm9kZS5jb3VudENoaWxkcmVuKCl9LGRlYnVnOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucy5kZWJ1Z0xldmVsPj0yJiYoQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcy50b1N0cmluZygpKSxmKFwibG9nXCIsYXJndW1lbnRzKSl9LGVuYWJsZVVwZGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hIT09ITEsISF0aGlzLl9lbmFibGVVcGRhdGU9PSEhYT9hOih0aGlzLl9lbmFibGVVcGRhdGU9YSxhPyh0aGlzLmRlYnVnKFwiZW5hYmxlVXBkYXRlKHRydWUpOiByZWRyYXcgXCIsdGhpcy5fZGlydHlSb290cyksdGhpcy5yZW5kZXIoKSk6dGhpcy5kZWJ1ZyhcImVuYWJsZVVwZGF0ZShmYWxzZSkuLi5cIiksIWEpfSxmaW5kQWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJvb3ROb2RlLmZpbmRBbGwoYSl9LGZpbmRGaXJzdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yb290Tm9kZS5maW5kRmlyc3QoYSl9LGZpbmROZXh0Tm9kZTpmdW5jdGlvbihiLGMsZCl7dmFyIGU9bnVsbCxmPWMucGFyZW50LmNoaWxkcmVuLGc9bnVsbCxoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5jaGlsZHJlbixnPWYubGVuZ3RoLGk9ZltiXTtpZihpJiZjKGkpPT09ITEpcmV0dXJuITE7aWYoaSYmaS5jaGlsZHJlbiYmaS5leHBhbmRlZCYmaChpLDAsYyk9PT0hMSlyZXR1cm4hMTtmb3IoZD1iKzE7ZDxnO2QrKylpZihoKGEsZCxjKT09PSExKXJldHVybiExO3JldHVybiBlPWEucGFyZW50LGU/aChlLGUuY2hpbGRyZW4uaW5kZXhPZihhKSsxLGMpOmgoYSwwLGMpfTtyZXR1cm4gYj1cInN0cmluZ1wiPT10eXBlb2YgYj9yKGIpOmIsYz1jfHx0aGlzLmdldEZpcnN0Q2hpbGQoKSxoKGMucGFyZW50LGYuaW5kZXhPZihjKSxmdW5jdGlvbihkKXtyZXR1cm4gZCE9PWUmJihlPWV8fGQsYShkLnNwYW4pLmlzKFwiOnZpc2libGVcIik/KCFiKGQpfHwoZz1kLGc9PT1jKSkmJnZvaWQgMDp2b2lkIGQuZGVidWcoXCJxdWlja3NlYXJjaDogc2tpcHBpbmcgaGlkZGVuIG5vZGVcIikpfSksZ30sZ2VuZXJhdGVGb3JtRWxlbWVudHM6ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoYil7ai5hcHBlbmQoYShcIjxpbnB1dD5cIix7dHlwZTpcImNoZWNrYm94XCIsbmFtZTpnLHZhbHVlOmIua2V5LGNoZWNrZWQ6ITB9KSl9ZD1kfHx7fTt2YXIgZixnPVwic3RyaW5nXCI9PXR5cGVvZiBiP2I6XCJmdF9cIit0aGlzLl9pZCtcIltdXCIsaD1cInN0cmluZ1wiPT10eXBlb2YgYz9jOlwiZnRfXCIrdGhpcy5faWQrXCJfYWN0aXZlXCIsaT1cImZhbmN5dHJlZV9yZXN1bHRfXCIrdGhpcy5faWQsaj1hKFwiI1wiK2kpLGs9Mz09PXRoaXMub3B0aW9ucy5zZWxlY3RNb2RlJiZkLnN0b3BPblBhcmVudHMhPT0hMTtqLmxlbmd0aD9qLmVtcHR5KCk6aj1hKFwiPGRpdj5cIix7aWQ6aX0pLmhpZGUoKS5pbnNlcnRBZnRlcih0aGlzLiRjb250YWluZXIpLGMhPT0hMSYmdGhpcy5hY3RpdmVOb2RlJiZqLmFwcGVuZChhKFwiPGlucHV0PlwiLHt0eXBlOlwicmFkaW9cIixuYW1lOmgsdmFsdWU6dGhpcy5hY3RpdmVOb2RlLmtleSxjaGVja2VkOiEwfSkpLGQuZmlsdGVyP3RoaXMudmlzaXQoZnVuY3Rpb24oYSl7dmFyIGI9ZC5maWx0ZXIoYSk7cmV0dXJuXCJza2lwXCI9PT1iP2I6dm9pZChiIT09ITEmJmUoYSkpfSk6YiE9PSExJiYoZj10aGlzLmdldFNlbGVjdGVkTm9kZXMoayksYS5lYWNoKGYsZnVuY3Rpb24oYSxiKXtlKGIpfSkpfSxnZXRBY3RpdmVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlTm9kZX0sZ2V0Rmlyc3RDaGlsZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3ROb2RlLmdldEZpcnN0Q2hpbGQoKX0sZ2V0Rm9jdXNOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9jdXNOb2RlfSxnZXROb2RlQnlLZXk6ZnVuY3Rpb24oYSxiKXt2YXIgZCxlO3JldHVybiFiJiYoZD1jLmdldEVsZW1lbnRCeUlkKHRoaXMub3B0aW9ucy5pZFByZWZpeCthKSk/ZC5mdG5vZGU/ZC5mdG5vZGU6bnVsbDooYj1ifHx0aGlzLnJvb3ROb2RlLGU9bnVsbCxiLnZpc2l0KGZ1bmN0aW9uKGIpe2lmKGIua2V5PT09YSlyZXR1cm4gZT1iLCExfSwhMCksZSl9LGdldFJvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdE5vZGV9LGdldFNlbGVjdGVkTm9kZXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdE5vZGUuZ2V0U2VsZWN0ZWROb2RlcyhhKX0saGFzRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2hhc0ZvY3VzfSxpbmZvOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucy5kZWJ1Z0xldmVsPj0xJiYoQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcy50b1N0cmluZygpKSxmKFwiaW5mb1wiLGFyZ3VtZW50cykpfSxsb2FkS2V5UGF0aDpmdW5jdGlvbihiLGMsZSl7ZnVuY3Rpb24gZihhLGIsZCl7Yy5jYWxsKHIsYixcImxvYWRpbmdcIiksYi5sb2FkKCkuZG9uZShmdW5jdGlvbigpe3IubG9hZEtleVBhdGguY2FsbChyLGxbYV0sYyxiKS5hbHdheXMobShkLHIpKX0pLmZhaWwoZnVuY3Rpb24oZSl7ci53YXJuKFwibG9hZEtleVBhdGg6IGVycm9yIGxvYWRpbmc6IFwiK2ErXCIgKHBhcmVudDogXCIrbytcIilcIiksYy5jYWxsKHIsYixcImVycm9yXCIpLGQucmVqZWN0KCl9KX12YXIgZyxoLGksaixrLGwsbixvLHAscT10aGlzLm9wdGlvbnMua2V5UGF0aFNlcGFyYXRvcixyPXRoaXM7Zm9yKGM9Y3x8YS5ub29wLGEuaXNBcnJheShiKXx8KGI9W2JdKSxsPXt9LGk9MDtpPGIubGVuZ3RoO2krKylmb3Iobz1lfHx0aGlzLnJvb3ROb2RlLGo9YltpXSxqLmNoYXJBdCgwKT09PXEmJihqPWouc3Vic3RyKDEpKSxwPWouc3BsaXQocSk7cC5sZW5ndGg7KXtpZihrPXAuc2hpZnQoKSxuPW8uX2ZpbmREaXJlY3RDaGlsZChrKSwhbil7dGhpcy53YXJuKFwibG9hZEtleVBhdGg6IGtleSBub3QgZm91bmQ6IFwiK2srXCIgKHBhcmVudDogXCIrbytcIilcIiksYy5jYWxsKHRoaXMsayxcImVycm9yXCIpO2JyZWFrfWlmKDA9PT1wLmxlbmd0aCl7Yy5jYWxsKHRoaXMsbixcIm9rXCIpO2JyZWFrfWlmKG4ubGF6eSYmbi5oYXNDaGlsZHJlbigpPT09ZCl7Yy5jYWxsKHRoaXMsbixcImxvYWRlZFwiKSxsW2tdP2xba10ucHVzaChwLmpvaW4ocSkpOmxba109W3Auam9pbihxKV07YnJlYWt9Yy5jYWxsKHRoaXMsbixcImxvYWRlZFwiKSxvPW59Zz1bXTtmb3IoayBpbiBsKW49by5fZmluZERpcmVjdENoaWxkKGspLG51bGw9PW4mJihuPXIuZ2V0Tm9kZUJ5S2V5KGspKSxoPW5ldyBhLkRlZmVycmVkLGcucHVzaChoKSxmKGssbixoKTtyZXR1cm4gYS53aGVuLmFwcGx5KGEsZykucHJvbWlzZSgpfSxyZWFjdGl2YXRlOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5hY3RpdmVOb2RlO3JldHVybiBjPyh0aGlzLmFjdGl2ZU5vZGU9bnVsbCxiPWMuc2V0QWN0aXZlKCEwLHtub0ZvY3VzOiEwfSksYSYmYy5zZXRGb2N1cygpLGIpOmsoKX0scmVsb2FkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9jYWxsSG9vayhcInRyZWVDbGVhclwiLHRoaXMpLHRoaXMuX2NhbGxIb29rKFwidHJlZUxvYWRcIix0aGlzLGEpfSxyZW5kZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yb290Tm9kZS5yZW5kZXIoYSxiKX0sc2V0Rm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2NhbGxIb29rKFwidHJlZVNldEZvY3VzXCIsdGhpcyxhKX0sdG9EaWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yb290Tm9kZS50b0RpY3QoITAsYik7cmV0dXJuIGE/YzpjLmNoaWxkcmVufSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiPEZhbmN5dHJlZSgjXCIrdGhpcy5faWQrXCIpPlwifSxfdHJpZ2dlck5vZGVFdmVudDpmdW5jdGlvbihhLGIsYyxlKXt2YXIgZj10aGlzLl9tYWtlSG9va0NvbnRleHQoYixjLGUpLGc9dGhpcy53aWRnZXQuX3RyaWdnZXIoYSxjLGYpO3JldHVybiBnIT09ITEmJmYucmVzdWx0IT09ZD9mLnJlc3VsdDpnfSxfdHJpZ2dlclRyZWVFdmVudDpmdW5jdGlvbihhLGIsYyl7dmFyIGU9dGhpcy5fbWFrZUhvb2tDb250ZXh0KHRoaXMsYixjKSxmPXRoaXMud2lkZ2V0Ll90cmlnZ2VyKGEsYixlKTtyZXR1cm4gZiE9PSExJiZlLnJlc3VsdCE9PWQ/ZS5yZXN1bHQ6Zn0sdmlzaXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdE5vZGUudmlzaXQoYSwhMSl9LHdhcm46ZnVuY3Rpb24oYSl7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcy50b1N0cmluZygpKSxmKFwid2FyblwiLGFyZ3VtZW50cyl9fSxhLmV4dGVuZCh0LnByb3RvdHlwZSx7bm9kZUNsaWNrOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1hLnRhcmdldFR5cGUsZT1hLm5vZGU7aWYoXCJleHBhbmRlclwiPT09ZCl7aWYoZS5pc0xvYWRpbmcoKSlyZXR1cm4gdm9pZCBlLmRlYnVnKFwiR290IDJuZCBjbGljayB3aGlsZSBsb2FkaW5nOiBpZ25vcmVkXCIpO3RoaXMuX2NhbGxIb29rKFwibm9kZVRvZ2dsZUV4cGFuZGVkXCIsYSl9ZWxzZSBpZihcImNoZWNrYm94XCI9PT1kKXRoaXMuX2NhbGxIb29rKFwibm9kZVRvZ2dsZVNlbGVjdGVkXCIsYSksYS5vcHRpb25zLmZvY3VzT25TZWxlY3QmJnRoaXMuX2NhbGxIb29rKFwibm9kZVNldEZvY3VzXCIsYSwhMCk7ZWxzZXtpZihjPSExLGI9ITAsZS5mb2xkZXIpc3dpdGNoKGEub3B0aW9ucy5jbGlja0ZvbGRlck1vZGUpe2Nhc2UgMjpjPSEwLGI9ITE7YnJlYWs7Y2FzZSAzOmI9ITAsYz0hMH1iJiYodGhpcy5ub2RlU2V0Rm9jdXMoYSksdGhpcy5fY2FsbEhvb2soXCJub2RlU2V0QWN0aXZlXCIsYSwhMCkpLGMmJnRoaXMuX2NhbGxIb29rKFwibm9kZVRvZ2dsZUV4cGFuZGVkXCIsYSl9fSxub2RlQ29sbGFwc2VTaWJsaW5nczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWEubm9kZTtpZihmLnBhcmVudClmb3IoYz1mLnBhcmVudC5jaGlsZHJlbixkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWNbZF0hPT1mJiZjW2RdLmV4cGFuZGVkJiZ0aGlzLl9jYWxsSG9vayhcIm5vZGVTZXRFeHBhbmRlZFwiLGNbZF0sITEsYil9LG5vZGVEYmxjbGljazpmdW5jdGlvbihhKXtcInRpdGxlXCI9PT1hLnRhcmdldFR5cGUmJjQ9PT1hLm9wdGlvbnMuY2xpY2tGb2xkZXJNb2RlJiZ0aGlzLl9jYWxsSG9vayhcIm5vZGVUb2dnbGVFeHBhbmRlZFwiLGEpLFwidGl0bGVcIj09PWEudGFyZ2V0VHlwZSYmYS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCl9LG5vZGVLZXlkb3duOmZ1bmN0aW9uKGIpe3ZhciBjLGQsZSxmLGc9Yi5vcmlnaW5hbEV2ZW50LGg9Yi5ub2RlLGk9Yi50cmVlLGo9Yi5vcHRpb25zLGs9Zy53aGljaCxsPVN0cmluZy5mcm9tQ2hhckNvZGUoayksbT0hKGcuYWx0S2V5fHxnLmN0cmxLZXl8fGcubWV0YUtleXx8Zy5zaGlmdEtleSksbj1hKGcudGFyZ2V0KSxvPSEwLHA9IShnLmN0cmxLZXl8fCFqLmF1dG9BY3RpdmF0ZSk7aWYoaHx8KGY9dGhpcy5nZXRBY3RpdmVOb2RlKCl8fHRoaXMuZ2V0Rmlyc3RDaGlsZCgpLGYmJihmLnNldEZvY3VzKCksaD1iLm5vZGU9dGhpcy5mb2N1c05vZGUsaC5kZWJ1ZyhcIktleWRvd24gZm9yY2UgZm9jdXMgb24gYWN0aXZlIG5vZGVcIikpKSxqLnF1aWNrc2VhcmNoJiZtJiYvXFx3Ly50ZXN0KGwpJiYhRFtrXSYmIW4uaXMoXCI6aW5wdXQ6ZW5hYmxlZFwiKSlyZXR1cm4gZD0obmV3IERhdGUpLmdldFRpbWUoKSxkLWkubGFzdFF1aWNrc2VhcmNoVGltZT41MDAmJihpLmxhc3RRdWlja3NlYXJjaFRlcm09XCJcIiksaS5sYXN0UXVpY2tzZWFyY2hUaW1lPWQsaS5sYXN0UXVpY2tzZWFyY2hUZXJtKz1sLGM9aS5maW5kTmV4dE5vZGUoaS5sYXN0UXVpY2tzZWFyY2hUZXJtLGkuZ2V0QWN0aXZlTm9kZSgpKSxjJiZjLnNldEFjdGl2ZSgpLHZvaWQgZy5wcmV2ZW50RGVmYXVsdCgpO3N3aXRjaCh3LmV2ZW50VG9TdHJpbmcoZykpe2Nhc2VcIitcIjpjYXNlXCI9XCI6aS5ub2RlU2V0RXhwYW5kZWQoYiwhMCk7YnJlYWs7Y2FzZVwiLVwiOmkubm9kZVNldEV4cGFuZGVkKGIsITEpO2JyZWFrO2Nhc2VcInNwYWNlXCI6aC5pc1BhZ2luZ05vZGUoKT9pLl90cmlnZ2VyTm9kZUV2ZW50KFwiY2xpY2tQYWdpbmdcIixiLGcpOmouY2hlY2tib3g/aS5ub2RlVG9nZ2xlU2VsZWN0ZWQoYik6aS5ub2RlU2V0QWN0aXZlKGIsITApO2JyZWFrO2Nhc2VcInJldHVyblwiOmkubm9kZVNldEFjdGl2ZShiLCEwKTticmVhaztjYXNlXCJob21lXCI6Y2FzZVwiZW5kXCI6Y2FzZVwiYmFja3NwYWNlXCI6Y2FzZVwibGVmdFwiOmNhc2VcInJpZ2h0XCI6Y2FzZVwidXBcIjpjYXNlXCJkb3duXCI6ZT1oLm5hdmlnYXRlKGcud2hpY2gscCwhMCk7YnJlYWs7ZGVmYXVsdDpvPSExfW8mJmcucHJldmVudERlZmF1bHQoKX0sbm9kZUxvYWRDaGlsZHJlbjpmdW5jdGlvbihiLGMpe3ZhciBkLGYsZyxoPWIudHJlZSxpPWIubm9kZSxqPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiBhLmlzRnVuY3Rpb24oYykmJihjPWMuY2FsbChoLHt0eXBlOlwic291cmNlXCJ9LGIpLGUoIWEuaXNGdW5jdGlvbihjKSxcInNvdXJjZSBjYWxsYmFjayBtdXN0IG5vdCByZXR1cm4gYW5vdGhlciBmdW5jdGlvblwiKSksYy51cmwmJihpLl9yZXF1ZXN0SWQmJmkud2FybihcIlJlY3Vyc2l2ZSBsb2FkIHJlcXVlc3QgI1wiK2orXCIgd2hpbGUgI1wiK2kuX3JlcXVlc3RJZCtcIiBpcyBwZW5kaW5nLlwiKSxkPWEuZXh0ZW5kKHt9LGIub3B0aW9ucy5hamF4LGMpLGkuX3JlcXVlc3RJZD1qLGQuZGVidWdEZWxheT8oZj1kLmRlYnVnRGVsYXksYS5pc0FycmF5KGYpJiYoZj1mWzBdK01hdGgucmFuZG9tKCkqKGZbMV0tZlswXSkpLGkud2FybihcIm5vZGVMb2FkQ2hpbGRyZW4gd2FpdGluZyBkZWJ1Z0RlbGF5IFwiK01hdGgucm91bmQoZikrXCIgbXMgLi4uXCIpLGQuZGVidWdEZWxheT0hMSxnPWEuRGVmZXJyZWQoZnVuY3Rpb24oYil7c2V0VGltZW91dChmdW5jdGlvbigpe2EuYWpheChkKS5kb25lKGZ1bmN0aW9uKCl7Yi5yZXNvbHZlV2l0aCh0aGlzLGFyZ3VtZW50cyl9KS5mYWlsKGZ1bmN0aW9uKCl7Yi5yZWplY3RXaXRoKHRoaXMsYXJndW1lbnRzKX0pfSxmKX0pKTpnPWEuYWpheChkKSxjPW5ldyBhLkRlZmVycmVkLGcuZG9uZShmdW5jdGlvbihkLGUsZil7dmFyIGcsaztpZihcImpzb25cIiE9PXRoaXMuZGF0YVR5cGUmJlwianNvbnBcIiE9PXRoaXMuZGF0YVR5cGV8fFwic3RyaW5nXCIhPXR5cGVvZiBkfHxhLmVycm9yKFwiQWpheCByZXF1ZXN0IHJldHVybmVkIGEgc3RyaW5nIChkaWQgeW91IGdldCB0aGUgSlNPTiBkYXRhVHlwZSB3cm9uZz8pLlwiKSxpLl9yZXF1ZXN0SWQmJmkuX3JlcXVlc3RJZD5qKXJldHVybiB2b2lkIGMucmVqZWN0V2l0aCh0aGlzLFtBXSk7aWYoYi5vcHRpb25zLnBvc3RQcm9jZXNzKXt0cnl7az1oLl90cmlnZ2VyTm9kZUV2ZW50KFwicG9zdFByb2Nlc3NcIixiLGIub3JpZ2luYWxFdmVudCx7cmVzcG9uc2U6ZCxlcnJvcjpudWxsLGRhdGFUeXBlOnRoaXMuZGF0YVR5cGV9KX1jYXRjaChsKXtrPXtlcnJvcjpsLG1lc3NhZ2U6XCJcIitsLGRldGFpbHM6XCJwb3N0UHJvY2VzcyBmYWlsZWRcIn19aWYoay5lcnJvcilyZXR1cm4gZz1hLmlzUGxhaW5PYmplY3Qoay5lcnJvcik/ay5lcnJvcjp7bWVzc2FnZTprLmVycm9yfSxnPWguX21ha2VIb29rQ29udGV4dChpLG51bGwsZyksdm9pZCBjLnJlamVjdFdpdGgodGhpcyxbZ10pO2Q9YS5pc0FycmF5KGspP2s6ZH1lbHNlIGQmJmQuaGFzT3duUHJvcGVydHkoXCJkXCIpJiZiLm9wdGlvbnMuZW5hYmxlQXNweCYmKGQ9XCJzdHJpbmdcIj09dHlwZW9mIGQuZD9hLnBhcnNlSlNPTihkLmQpOmQuZCk7Yy5yZXNvbHZlV2l0aCh0aGlzLFtkXSl9KS5mYWlsKGZ1bmN0aW9uKGEsYixkKXt2YXIgZT1oLl9tYWtlSG9va0NvbnRleHQoaSxudWxsLHtlcnJvcjphLGFyZ3M6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxtZXNzYWdlOmQsZGV0YWlsczphLnN0YXR1cytcIjogXCIrZH0pO2MucmVqZWN0V2l0aCh0aGlzLFtlXSl9KSksYS5pc0Z1bmN0aW9uKGMudGhlbikmJmEuaXNGdW5jdGlvbihjW1wiY2F0Y2hcIl0pJiYoZz1jLGM9bmV3IGEuRGVmZXJyZWQsZy50aGVuKGZ1bmN0aW9uKGEpe2MucmVzb2x2ZShhKX0sZnVuY3Rpb24oYSl7Yy5yZWplY3QoYSl9KSksYS5pc0Z1bmN0aW9uKGMucHJvbWlzZSkmJihoLm5vZGVTZXRTdGF0dXMoYixcImxvYWRpbmdcIiksYy5kb25lKGZ1bmN0aW9uKGEpe2gubm9kZVNldFN0YXR1cyhiLFwib2tcIiksaS5fcmVxdWVzdElkPW51bGx9KS5mYWlsKGZ1bmN0aW9uKGEpe3ZhciBjO3JldHVybiBhPT09QT92b2lkIGkud2FybihcIklnbm9yZWQgcmVzcG9uc2UgZm9yIG9ic29sZXRlIGxvYWQgcmVxdWVzdCAjXCIraitcIiAoZXhwZWN0ZWQgI1wiK2kuX3JlcXVlc3RJZCtcIilcIik6KGEubm9kZSYmYS5lcnJvciYmYS5tZXNzYWdlP2M9YTooYz1oLl9tYWtlSG9va0NvbnRleHQoaSxudWxsLHtlcnJvcjphLGFyZ3M6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxtZXNzYWdlOmE/YS5tZXNzYWdlfHxhLnRvU3RyaW5nKCk6XCJcIn0pLFwiW29iamVjdCBPYmplY3RdXCI9PT1jLm1lc3NhZ2UmJihjLm1lc3NhZ2U9XCJcIikpLGkud2FybihcIkxvYWQgY2hpbGRyZW4gZmFpbGVkIChcIitjLm1lc3NhZ2UrXCIpXCIsYyksdm9pZChoLl90cmlnZ2VyTm9kZUV2ZW50KFwibG9hZEVycm9yXCIsYyxudWxsKSE9PSExJiZoLm5vZGVTZXRTdGF0dXMoYixcImVycm9yXCIsYy5tZXNzYWdlLGMuZGV0YWlscykpKX0pKSxcbmEud2hlbihjKS5kb25lKGZ1bmN0aW9uKGIpe3ZhciBjO2EuaXNQbGFpbk9iamVjdChiKSYmKGUoaS5pc1Jvb3ROb2RlKCksXCJzb3VyY2UgbWF5IG9ubHkgYmUgYW4gb2JqZWN0IGZvciByb290IG5vZGVzIChleHBlY3RpbmcgYW4gYXJyYXkgb2YgY2hpbGQgb2JqZWN0cyBvdGhlcndpc2UpXCIpLGUoYS5pc0FycmF5KGIuY2hpbGRyZW4pLFwiaWYgYW4gb2JqZWN0IGlzIHBhc3NlZCBhcyBzb3VyY2UsIGl0IG11c3QgY29udGFpbiBhICdjaGlsZHJlbicgYXJyYXkgKGFsbCBvdGhlciBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byAndHJlZS5kYXRhJylcIiksYz1iLGI9Yi5jaGlsZHJlbixkZWxldGUgYy5jaGlsZHJlbixhLmV4dGVuZChoLmRhdGEsYykpLGUoYS5pc0FycmF5KGIpLFwiZXhwZWN0ZWQgYXJyYXkgb2YgY2hpbGRyZW5cIiksaS5fc2V0Q2hpbGRyZW4oYiksaC5fdHJpZ2dlck5vZGVFdmVudChcImxvYWRDaGlsZHJlblwiLGkpfSl9LG5vZGVMb2FkS2V5UGF0aDpmdW5jdGlvbihhLGIpe30sbm9kZVJlbW92ZUNoaWxkOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZj1iLm5vZGUsZz1hLmV4dGVuZCh7fSxiLHtub2RlOmN9KSxoPWYuY2hpbGRyZW47cmV0dXJuIDE9PT1oLmxlbmd0aD8oZShjPT09aFswXSxcImludmFsaWQgc2luZ2xlIGNoaWxkXCIpLHRoaXMubm9kZVJlbW92ZUNoaWxkcmVuKGIpKToodGhpcy5hY3RpdmVOb2RlJiYoYz09PXRoaXMuYWN0aXZlTm9kZXx8dGhpcy5hY3RpdmVOb2RlLmlzRGVzY2VuZGFudE9mKGMpKSYmdGhpcy5hY3RpdmVOb2RlLnNldEFjdGl2ZSghMSksdGhpcy5mb2N1c05vZGUmJihjPT09dGhpcy5mb2N1c05vZGV8fHRoaXMuZm9jdXNOb2RlLmlzRGVzY2VuZGFudE9mKGMpKSYmKHRoaXMuZm9jdXNOb2RlPW51bGwpLHRoaXMubm9kZVJlbW92ZU1hcmt1cChnKSx0aGlzLm5vZGVSZW1vdmVDaGlsZHJlbihnKSxkPWEuaW5BcnJheShjLGgpLGUoZD49MCxcImludmFsaWQgY2hpbGRcIiksZi50cmlnZ2VyTW9kaWZ5Q2hpbGQoXCJyZW1vdmVcIixjKSxjLnZpc2l0KGZ1bmN0aW9uKGEpe2EucGFyZW50PW51bGx9LCEwKSx0aGlzLl9jYWxsSG9vayhcInRyZWVSZWdpc3Rlck5vZGVcIix0aGlzLCExLGMpLHZvaWQgaC5zcGxpY2UoZCwxKSl9LG5vZGVSZW1vdmVDaGlsZE1hcmt1cDpmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGU7Yy51bCYmKGMuaXNSb290Tm9kZSgpP2EoYy51bCkuZW1wdHkoKTooYShjLnVsKS5yZW1vdmUoKSxjLnVsPW51bGwpLGMudmlzaXQoZnVuY3Rpb24oYSl7YS5saT1hLnVsPW51bGx9KSl9LG5vZGVSZW1vdmVDaGlsZHJlbjpmdW5jdGlvbihiKXt2YXIgYyxkPWIudHJlZSxlPWIubm9kZSxmPWUuY2hpbGRyZW47ZiYmKHRoaXMuYWN0aXZlTm9kZSYmdGhpcy5hY3RpdmVOb2RlLmlzRGVzY2VuZGFudE9mKGUpJiZ0aGlzLmFjdGl2ZU5vZGUuc2V0QWN0aXZlKCExKSx0aGlzLmZvY3VzTm9kZSYmdGhpcy5mb2N1c05vZGUuaXNEZXNjZW5kYW50T2YoZSkmJih0aGlzLmZvY3VzTm9kZT1udWxsKSx0aGlzLm5vZGVSZW1vdmVDaGlsZE1hcmt1cChiKSxjPWEuZXh0ZW5kKHt9LGIpLGUudHJpZ2dlck1vZGlmeUNoaWxkKFwicmVtb3ZlXCIsbnVsbCksZS52aXNpdChmdW5jdGlvbihhKXthLnBhcmVudD1udWxsLGQuX2NhbGxIb29rKFwidHJlZVJlZ2lzdGVyTm9kZVwiLGQsITEsYSl9KSxlLmxhenk/ZS5jaGlsZHJlbj1bXTplLmNoaWxkcmVuPW51bGwsZS5pc1Jvb3ROb2RlKCl8fChlLmV4cGFuZGVkPSExKSx0aGlzLm5vZGVSZW5kZXJTdGF0dXMoYikpfSxub2RlUmVtb3ZlTWFya3VwOmZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZTtjLmxpJiYoYShjLmxpKS5yZW1vdmUoKSxjLmxpPW51bGwpLHRoaXMubm9kZVJlbW92ZUNoaWxkTWFya3VwKGIpfSxub2RlUmVuZGVyOmZ1bmN0aW9uKGIsZCxmLGcsaCl7dmFyIGksaixrLGwsbSxuLG8scD1iLm5vZGUscT1iLnRyZWUscj1iLm9wdGlvbnMscz1yLmFyaWEsdD0hMSx1PXAucGFyZW50LHY9IXUsdz1wLmNoaWxkcmVuLHg9bnVsbDtpZihxLl9lbmFibGVVcGRhdGUhPT0hMSYmKHZ8fHUudWwpKXtpZihlKHZ8fHUudWwsXCJwYXJlbnQgVUwgbXVzdCBleGlzdFwiKSx2fHwocC5saSYmKGR8fHAubGkucGFyZW50Tm9kZSE9PXAucGFyZW50LnVsKSYmKHAubGkucGFyZW50Tm9kZT09PXAucGFyZW50LnVsP3g9cC5saS5uZXh0U2libGluZzp0aGlzLmRlYnVnKFwiVW5saW5raW5nIFwiK3ArXCIgKG11c3QgYmUgY2hpbGQgb2YgXCIrcC5wYXJlbnQrXCIpXCIpLHRoaXMubm9kZVJlbW92ZU1hcmt1cChiKSkscC5saT90aGlzLm5vZGVSZW5kZXJTdGF0dXMoYik6KHQ9ITAscC5saT1jLmNyZWF0ZUVsZW1lbnQoXCJsaVwiKSxwLmxpLmZ0bm9kZT1wLHAua2V5JiZyLmdlbmVyYXRlSWRzJiYocC5saS5pZD1yLmlkUHJlZml4K3Aua2V5KSxwLnNwYW49Yy5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxwLnNwYW4uY2xhc3NOYW1lPVwiZmFuY3l0cmVlLW5vZGVcIixzJiZhKHAubGkpLmF0dHIoXCJhcmlhLWxhYmVsbGVkYnlcIixcImZ0YWxfXCIrci5pZFByZWZpeCtwLmtleSkscC5saS5hcHBlbmRDaGlsZChwLnNwYW4pLHRoaXMubm9kZVJlbmRlclRpdGxlKGIpLHIuY3JlYXRlTm9kZSYmci5jcmVhdGVOb2RlLmNhbGwocSx7dHlwZTpcImNyZWF0ZU5vZGVcIn0sYikpLHIucmVuZGVyTm9kZSYmci5yZW5kZXJOb2RlLmNhbGwocSx7dHlwZTpcInJlbmRlck5vZGVcIn0sYikpLHcpe2lmKHZ8fHAuZXhwYW5kZWR8fGY9PT0hMCl7Zm9yKHAudWx8fChwLnVsPWMuY3JlYXRlRWxlbWVudChcInVsXCIpLChnIT09ITB8fGgpJiZwLmV4cGFuZGVkfHwocC51bC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxzJiZhKHAudWwpLmF0dHIoXCJyb2xlXCIsXCJncm91cFwiKSxwLmxpP3AubGkuYXBwZW5kQ2hpbGQocC51bCk6cC50cmVlLiRkaXYuYXBwZW5kKHAudWwpKSxsPTAsbT13Lmxlbmd0aDtsPG07bCsrKW89YS5leHRlbmQoe30sYix7bm9kZTp3W2xdfSksdGhpcy5ub2RlUmVuZGVyKG8sZCxmLCExLCEwKTtmb3IoaT1wLnVsLmZpcnN0Q2hpbGQ7aTspaz1pLmZ0bm9kZSxrJiZrLnBhcmVudCE9PXA/KHAuZGVidWcoXCJfZml4UGFyZW50OiByZW1vdmUgbWlzc2luZyBcIitrLGkpLG49aS5uZXh0U2libGluZyxpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaSksaT1uKTppPWkubmV4dFNpYmxpbmc7Zm9yKGk9cC51bC5maXJzdENoaWxkLGw9MCxtPXcubGVuZ3RoLTE7bDxtO2wrKylqPXdbbF0saz1pLmZ0bm9kZSxqIT09az9wLnVsLmluc2VydEJlZm9yZShqLmxpLGsubGkpOmk9aS5uZXh0U2libGluZ319ZWxzZSBwLnVsJiYodGhpcy53YXJuKFwicmVtb3ZlIGNoaWxkIG1hcmt1cCBmb3IgXCIrcCksdGhpcy5ub2RlUmVtb3ZlQ2hpbGRNYXJrdXAoYikpO3Z8fHQmJnUudWwuaW5zZXJ0QmVmb3JlKHAubGkseCl9fSxub2RlUmVuZGVyVGl0bGU6ZnVuY3Rpb24oYixjKXt2YXIgZSxmLGcsaCxpLGosaz1iLm5vZGUsbD1iLnRyZWUsbT1iLm9wdGlvbnMsbj1tLmFyaWEscT1rLmdldExldmVsKCkscj1bXTtjIT09ZCYmKGsudGl0bGU9Yyksay5zcGFuJiZsLl9lbmFibGVVcGRhdGUhPT0hMSYmKHE8bS5taW5FeHBhbmRMZXZlbD8oay5sYXp5fHwoay5leHBhbmRlZD0hMCkscT4xJiYobj9yLnB1c2goXCI8c3BhbiByb2xlPSdidXR0b24nIGNsYXNzPSdmYW5jeXRyZWUtZXhwYW5kZXIgZmFuY3l0cmVlLWV4cGFuZGVyLWZpeGVkJz48L3NwYW4+XCIpOnIucHVzaChcIjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtZXhwYW5kZXIgZmFuY3l0cmVlLWV4cGFuZGVyLWZpeGVkJyc+PC9zcGFuPlwiKSkpOm4/ci5wdXNoKFwiPHNwYW4gcm9sZT0nYnV0dG9uJyBjbGFzcz0nZmFuY3l0cmVlLWV4cGFuZGVyJz48L3NwYW4+XCIpOnIucHVzaChcIjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtZXhwYW5kZXInPjwvc3Bhbj5cIiksbS5jaGVja2JveCYmay5oaWRlQ2hlY2tib3ghPT0hMCYmIWsuaXNTdGF0dXNOb2RlKCkmJihuP3IucHVzaChcIjxzcGFuIHJvbGU9J2NoZWNrYm94JyBjbGFzcz0nZmFuY3l0cmVlLWNoZWNrYm94Jz48L3NwYW4+XCIpOnIucHVzaChcIjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtY2hlY2tib3gnPjwvc3Bhbj5cIikpLGsuZGF0YS5pY29uQ2xhc3MhPT1kJiYoay5pY29uP2EuZXJyb3IoXCInaWNvbkNsYXNzJyBub2RlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE0LjA6IHVzZSAnaWNvbicgb25seSBpbnN0ZWFkXCIpOihrLndhcm4oXCInaWNvbkNsYXNzJyBub2RlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE0LjA6IHVzZSAnaWNvbicgaW5zdGVhZFwiKSxrLmljb249ay5kYXRhLmljb25DbGFzcykpLGEuaXNGdW5jdGlvbihtLmljb24pPyhmPW0uaWNvbi5jYWxsKGwse3R5cGU6XCJpY29uXCJ9LGIpLG51bGw9PWYmJihmPWsuaWNvbikpOmY9bnVsbCE9ay5pY29uP2suaWNvbjptLmljb24sbnVsbD09Zj9mPSEwOlwiYm9vbGVhblwiIT10eXBlb2YgZiYmKGY9XCJcIitmKSxmIT09ITEmJihoPW4/XCIgcm9sZT0naW1nJ1wiOlwiXCIsXCJzdHJpbmdcIj09dHlwZW9mIGY/eC50ZXN0KGYpPyhmPVwiL1wiPT09Zi5jaGFyQXQoMCk/ZjoobS5pbWFnZVBhdGh8fFwiXCIpK2Ysci5wdXNoKFwiPGltZyBzcmM9J1wiK2YrXCInIGNsYXNzPSdmYW5jeXRyZWUtaWNvbicgYWx0PScnIC8+XCIpKTpyLnB1c2goXCI8c3BhbiBcIitoK1wiIGNsYXNzPSdmYW5jeXRyZWUtY3VzdG9tLWljb24gXCIrZitcIic+PC9zcGFuPlwiKTpyLnB1c2goXCI8c3BhbiBcIitoK1wiIGNsYXNzPSdmYW5jeXRyZWUtaWNvbic+PC9zcGFuPlwiKSksZz1cIlwiLG0ucmVuZGVyVGl0bGUmJihnPW0ucmVuZGVyVGl0bGUuY2FsbChsLHt0eXBlOlwicmVuZGVyVGl0bGVcIn0sYil8fFwiXCIpLGd8fChrLnRvb2x0aXA/aj1rLnRvb2x0aXA6bS50b29sdGlwJiYoaj1tLnRvb2x0aXA9PT0hMD9rLnRpdGxlOm0udG9vbHRpcC5jYWxsKGwsaykpLGo9aj9cIiB0aXRsZT0nXCIrcChqKStcIidcIjpcIlwiLGU9bj9cIiBpZD0nZnRhbF9cIittLmlkUHJlZml4K2sua2V5K1wiJ1wiOlwiXCIsaD1uP1wiIHJvbGU9J3RyZWVpdGVtJ1wiOlwiXCIsaT1tLnRpdGxlc1RhYmJhYmxlP1wiIHRhYmluZGV4PScwJ1wiOlwiXCIsZz1cIjxzcGFuIFwiK2grXCIgY2xhc3M9J2ZhbmN5dHJlZS10aXRsZSdcIitlK2oraStcIj5cIisobS5lc2NhcGVUaXRsZXM/byhrLnRpdGxlKTprLnRpdGxlKStcIjwvc3Bhbj5cIiksci5wdXNoKGcpLGsuc3Bhbi5pbm5lckhUTUw9ci5qb2luKFwiXCIpLHRoaXMubm9kZVJlbmRlclN0YXR1cyhiKSxtLmVuaGFuY2VUaXRsZSYmKGIuJHRpdGxlPWEoXCI+c3Bhbi5mYW5jeXRyZWUtdGl0bGVcIixrLnNwYW4pLGc9bS5lbmhhbmNlVGl0bGUuY2FsbChsLHt0eXBlOlwiZW5oYW5jZVRpdGxlXCJ9LGIpfHxcIlwiKSl9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlLGQ9Yi50cmVlLGU9Yi5vcHRpb25zLGY9Yy5oYXNDaGlsZHJlbigpLGc9Yy5pc0xhc3RTaWJsaW5nKCksaD1lLmFyaWEsaT1hKGMuc3BhbikuZmluZChcIi5mYW5jeXRyZWUtdGl0bGVcIiksaj1lLl9jbGFzc05hbWVzLGs9W10sbD1jW2Quc3RhdHVzQ2xhc3NQcm9wTmFtZV07bCYmZC5fZW5hYmxlVXBkYXRlIT09ITEmJihrLnB1c2goai5ub2RlKSxkLmFjdGl2ZU5vZGU9PT1jJiZrLnB1c2goai5hY3RpdmUpLGQuZm9jdXNOb2RlPT09YyYmay5wdXNoKGouZm9jdXNlZCksYy5leHBhbmRlZD8oay5wdXNoKGouZXhwYW5kZWQpLGgmJmkuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCkpOmgmJihmP2kuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSk6aS5yZW1vdmVBdHRyKFwiYXJpYS1leHBhbmRlZFwiKSksYy5mb2xkZXImJmsucHVzaChqLmZvbGRlciksZiE9PSExJiZrLnB1c2goai5oYXNDaGlsZHJlbiksZyYmay5wdXNoKGoubGFzdHNpYiksYy5sYXp5JiZudWxsPT1jLmNoaWxkcmVuJiZrLnB1c2goai5sYXp5KSxjLnBhcnRsb2FkJiZrLnB1c2goai5wYXJ0bG9hZCksYy5wYXJ0c2VsJiZrLnB1c2goai5wYXJ0c2VsKSxjLnVuc2VsZWN0YWJsZSYmay5wdXNoKGoudW5zZWxlY3RhYmxlKSxjLl9pc0xvYWRpbmcmJmsucHVzaChqLmxvYWRpbmcpLGMuX2Vycm9yJiZrLnB1c2goai5lcnJvciksYy5zdGF0dXNOb2RlVHlwZSYmay5wdXNoKGouc3RhdHVzTm9kZVByZWZpeCtjLnN0YXR1c05vZGVUeXBlKSxjLnNlbGVjdGVkPyhrLnB1c2goai5zZWxlY3RlZCksaCYmaS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKSk6aCYmaS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKSxjLmV4dHJhQ2xhc3NlcyYmay5wdXNoKGMuZXh0cmFDbGFzc2VzKSxmPT09ITE/ay5wdXNoKGouY29tYmluZWRFeHBhbmRlclByZWZpeCtcIm5cIisoZz9cImxcIjpcIlwiKSk6ay5wdXNoKGouY29tYmluZWRFeHBhbmRlclByZWZpeCsoYy5leHBhbmRlZD9cImVcIjpcImNcIikrKGMubGF6eSYmbnVsbD09Yy5jaGlsZHJlbj9cImRcIjpcIlwiKSsoZz9cImxcIjpcIlwiKSksay5wdXNoKGouY29tYmluZWRJY29uUHJlZml4KyhjLmV4cGFuZGVkP1wiZVwiOlwiY1wiKSsoYy5mb2xkZXI/XCJmXCI6XCJcIikpLGwuY2xhc3NOYW1lPWsuam9pbihcIiBcIiksYy5saSYmKGMubGkuY2xhc3NOYW1lPWc/ai5sYXN0c2liOlwiXCIpKX0sbm9kZVNldEFjdGl2ZTpmdW5jdGlvbihiLGMsZCl7ZD1kfHx7fTt2YXIgZixnPWIubm9kZSxoPWIudHJlZSxpPWIub3B0aW9ucyxqPWQubm9FdmVudHM9PT0hMCxtPWQubm9Gb2N1cz09PSEwLG49Zz09PWguYWN0aXZlTm9kZTtyZXR1cm4gYz1jIT09ITEsbj09PWM/ayhnKTpjJiYhaiYmdGhpcy5fdHJpZ2dlck5vZGVFdmVudChcImJlZm9yZUFjdGl2YXRlXCIsZyxiLm9yaWdpbmFsRXZlbnQpPT09ITE/bChnLFtcInJlamVjdGVkXCJdKTooYz8oaC5hY3RpdmVOb2RlJiYoZShoLmFjdGl2ZU5vZGUhPT1nLFwibm9kZSB3YXMgYWN0aXZlIChpbmNvbnNpc3RlbmN5KVwiKSxmPWEuZXh0ZW5kKHt9LGIse25vZGU6aC5hY3RpdmVOb2RlfSksaC5ub2RlU2V0QWN0aXZlKGYsITEpLGUobnVsbD09PWguYWN0aXZlTm9kZSxcImRlYWN0aXZhdGUgd2FzIG91dCBvZiBzeW5jP1wiKSksaS5hY3RpdmVWaXNpYmxlJiZnLm1ha2VWaXNpYmxlKHtzY3JvbGxJbnRvVmlldzptJiZudWxsPT1oLmZvY3VzTm9kZX0pLGguYWN0aXZlTm9kZT1nLGgubm9kZVJlbmRlclN0YXR1cyhiKSxtfHxoLm5vZGVTZXRGb2N1cyhiKSxqfHxoLl90cmlnZ2VyTm9kZUV2ZW50KFwiYWN0aXZhdGVcIixnLGIub3JpZ2luYWxFdmVudCkpOihlKGguYWN0aXZlTm9kZT09PWcsXCJub2RlIHdhcyBub3QgYWN0aXZlIChpbmNvbnNpc3RlbmN5KVwiKSxoLmFjdGl2ZU5vZGU9bnVsbCx0aGlzLm5vZGVSZW5kZXJTdGF0dXMoYiksanx8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KFwiZGVhY3RpdmF0ZVwiLGcsYi5vcmlnaW5hbEV2ZW50KSksayhnKSl9LG5vZGVTZXRFeHBhbmRlZDpmdW5jdGlvbihiLGMsZSl7ZT1lfHx7fTt2YXIgZixnLGgsaSxqLG0sbj1iLm5vZGUsbz1iLnRyZWUscD1iLm9wdGlvbnMscT1lLm5vQW5pbWF0aW9uPT09ITAscj1lLm5vRXZlbnRzPT09ITA7aWYoYz1jIT09ITEsbi5leHBhbmRlZCYmY3x8IW4uZXhwYW5kZWQmJiFjKXJldHVybiBrKG4pO2lmKGMmJiFuLmxhenkmJiFuLmhhc0NoaWxkcmVuKCkpcmV0dXJuIGsobik7aWYoIWMmJm4uZ2V0TGV2ZWwoKTxwLm1pbkV4cGFuZExldmVsKXJldHVybiBsKG4sW1wibG9ja2VkXCJdKTtpZighciYmdGhpcy5fdHJpZ2dlck5vZGVFdmVudChcImJlZm9yZUV4cGFuZFwiLG4sYi5vcmlnaW5hbEV2ZW50KT09PSExKXJldHVybiBsKG4sW1wicmVqZWN0ZWRcIl0pO2lmKHF8fG4uaXNWaXNpYmxlKCl8fChxPWUubm9BbmltYXRpb249ITApLGc9bmV3IGEuRGVmZXJyZWQsYyYmIW4uZXhwYW5kZWQmJnAuYXV0b0NvbGxhcHNlKXtqPW4uZ2V0UGFyZW50TGlzdCghMSwhMCksbT1wLmF1dG9Db2xsYXBzZTt0cnl7Zm9yKHAuYXV0b0NvbGxhcHNlPSExLGg9MCxpPWoubGVuZ3RoO2g8aTtoKyspdGhpcy5fY2FsbEhvb2soXCJub2RlQ29sbGFwc2VTaWJsaW5nc1wiLGpbaF0sZSl9ZmluYWxseXtwLmF1dG9Db2xsYXBzZT1tfX1yZXR1cm4gZy5kb25lKGZ1bmN0aW9uKCl7dmFyIGE9bi5nZXRMYXN0Q2hpbGQoKTtjJiZwLmF1dG9TY3JvbGwmJiFxJiZhP2Euc2Nyb2xsSW50b1ZpZXcoITAse3RvcE5vZGU6bn0pLmFsd2F5cyhmdW5jdGlvbigpe3J8fGIudHJlZS5fdHJpZ2dlck5vZGVFdmVudChjP1wiZXhwYW5kXCI6XCJjb2xsYXBzZVwiLGIpfSk6cnx8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KGM/XCJleHBhbmRcIjpcImNvbGxhcHNlXCIsYil9KSxmPWZ1bmN0aW9uKGQpe3ZhciBlLGYsZz1wLnRvZ2dsZUVmZmVjdDtpZihuLmV4cGFuZGVkPWMsby5fY2FsbEhvb2soXCJub2RlUmVuZGVyXCIsYiwhMSwhMSwhMCksbi51bClpZihlPVwibm9uZVwiIT09bi51bC5zdHlsZS5kaXNwbGF5LGY9ISFuLmV4cGFuZGVkLGU9PT1mKW4ud2FybihcIm5vZGVTZXRFeHBhbmRlZDogVUwuc3R5bGUuZGlzcGxheSBhbHJlYWR5IHNldFwiKTtlbHNle2lmKGcmJiFxKXJldHVybiB2b2lkIGEobi51bCkudG9nZ2xlKGcuZWZmZWN0LGcub3B0aW9ucyxnLmR1cmF0aW9uLGZ1bmN0aW9uKCl7ZCgpfSk7bi51bC5zdHlsZS5kaXNwbGF5PW4uZXhwYW5kZWR8fCFwYXJlbnQ/XCJcIjpcIm5vbmVcIn1kKCl9LGMmJm4ubGF6eSYmbi5oYXNDaGlsZHJlbigpPT09ZD9uLmxvYWQoKS5kb25lKGZ1bmN0aW9uKCl7Zy5ub3RpZnlXaXRoJiZnLm5vdGlmeVdpdGgobixbXCJsb2FkZWRcIl0pLGYoZnVuY3Rpb24oKXtnLnJlc29sdmVXaXRoKG4pfSl9KS5mYWlsKGZ1bmN0aW9uKGEpe2YoZnVuY3Rpb24oKXtnLnJlamVjdFdpdGgobixbXCJsb2FkIGZhaWxlZCAoXCIrYStcIilcIl0pfSl9KTpmKGZ1bmN0aW9uKCl7Zy5yZXNvbHZlV2l0aChuKX0pLGcucHJvbWlzZSgpfSxub2RlU2V0Rm9jdXM6ZnVuY3Rpb24oYixkKXt2YXIgZSxmPWIudHJlZSxnPWIubm9kZSxoPWYub3B0aW9ucyxpPSEhYi5vcmlnaW5hbEV2ZW50JiZhKGIub3JpZ2luYWxFdmVudC50YXJnZXQpLmlzKFwiOmlucHV0XCIpO2lmKGQ9ZCE9PSExLGYuZm9jdXNOb2RlKXtpZihmLmZvY3VzTm9kZT09PWcmJmQpcmV0dXJuO2U9YS5leHRlbmQoe30sYix7bm9kZTpmLmZvY3VzTm9kZX0pLGYuZm9jdXNOb2RlPW51bGwsdGhpcy5fdHJpZ2dlck5vZGVFdmVudChcImJsdXJcIixlKSx0aGlzLl9jYWxsSG9vayhcIm5vZGVSZW5kZXJTdGF0dXNcIixlKX1kJiYodGhpcy5oYXNGb2N1cygpfHwoZy5kZWJ1ZyhcIm5vZGVTZXRGb2N1czogZm9yY2luZyBjb250YWluZXIgZm9jdXNcIiksdGhpcy5fY2FsbEhvb2soXCJ0cmVlU2V0Rm9jdXNcIixiLCEwLHtjYWxsZWRCeU5vZGU6ITB9KSksZy5tYWtlVmlzaWJsZSh7c2Nyb2xsSW50b1ZpZXc6ITF9KSxmLmZvY3VzTm9kZT1nLGgudGl0bGVzVGFiYmFibGU/aXx8YShnLnNwYW4pLmZpbmQoXCIuZmFuY3l0cmVlLXRpdGxlXCIpLmZvY3VzKCk6MD09PWEoYy5hY3RpdmVFbGVtZW50KS5jbG9zZXN0KFwiLmZhbmN5dHJlZS1jb250YWluZXJcIikubGVuZ3RoJiZhKGYuJGNvbnRhaW5lcikuZm9jdXMoKSxoLmFyaWEmJmEoZi4kY29udGFpbmVyKS5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsXCJmdGFsX1wiK2guaWRQcmVmaXgrZy5rZXkpLHRoaXMuX3RyaWdnZXJOb2RlRXZlbnQoXCJmb2N1c1wiLGIpLGguYXV0b1Njcm9sbCYmZy5zY3JvbGxJbnRvVmlldygpLHRoaXMuX2NhbGxIb29rKFwibm9kZVJlbmRlclN0YXR1c1wiLGIpKX0sbm9kZVNldFNlbGVjdGVkOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5ub2RlLGQ9YS50cmVlLGU9YS5vcHRpb25zO2lmKGI9YiE9PSExLCFjLnVuc2VsZWN0YWJsZSl7aWYoYy5zZWxlY3RlZCYmYnx8IWMuc2VsZWN0ZWQmJiFiKXJldHVybiEhYy5zZWxlY3RlZDtpZih0aGlzLl90cmlnZ2VyTm9kZUV2ZW50KFwiYmVmb3JlU2VsZWN0XCIsYyxhLm9yaWdpbmFsRXZlbnQpPT09ITEpcmV0dXJuISFjLnNlbGVjdGVkO2ImJjE9PT1lLnNlbGVjdE1vZGU/ZC5sYXN0U2VsZWN0ZWROb2RlJiZkLmxhc3RTZWxlY3RlZE5vZGUuc2V0U2VsZWN0ZWQoITEpOjM9PT1lLnNlbGVjdE1vZGUmJihjLnNlbGVjdGVkPWIsYy5maXhTZWxlY3Rpb24zQWZ0ZXJDbGljaygpKSxjLnNlbGVjdGVkPWIsdGhpcy5ub2RlUmVuZGVyU3RhdHVzKGEpLGQubGFzdFNlbGVjdGVkTm9kZT1iP2M6bnVsbCxkLl90cmlnZ2VyTm9kZUV2ZW50KFwic2VsZWN0XCIsYSl9fSxub2RlU2V0U3RhdHVzOmZ1bmN0aW9uKGIsYyxkLGUpe2Z1bmN0aW9uIGYoKXt2YXIgYT1oLmNoaWxkcmVuP2guY2hpbGRyZW5bMF06bnVsbDtpZihhJiZhLmlzU3RhdHVzTm9kZSgpKXt0cnl7aC51bCYmKGgudWwucmVtb3ZlQ2hpbGQoYS5saSksYS5saT1udWxsKX1jYXRjaChiKXt9MT09PWguY2hpbGRyZW4ubGVuZ3RoP2guY2hpbGRyZW49W106aC5jaGlsZHJlbi5zaGlmdCgpfX1mdW5jdGlvbiBnKGIsYyl7dmFyIGQ9aC5jaGlsZHJlbj9oLmNoaWxkcmVuWzBdOm51bGw7cmV0dXJuIGQmJmQuaXNTdGF0dXNOb2RlKCk/KGEuZXh0ZW5kKGQsYiksZC5zdGF0dXNOb2RlVHlwZT1jLGkuX2NhbGxIb29rKFwibm9kZVJlbmRlclRpdGxlXCIsZCkpOihoLl9zZXRDaGlsZHJlbihbYl0pLGguY2hpbGRyZW5bMF0uc3RhdHVzTm9kZVR5cGU9YyxpLnJlbmRlcigpKSxoLmNoaWxkcmVuWzBdfXZhciBoPWIubm9kZSxpPWIudHJlZTtzd2l0Y2goYyl7Y2FzZVwib2tcIjpmKCksaC5faXNMb2FkaW5nPSExLGguX2Vycm9yPW51bGwsaC5yZW5kZXJTdGF0dXMoKTticmVhaztjYXNlXCJsb2FkaW5nXCI6aC5wYXJlbnR8fGcoe3RpdGxlOmkub3B0aW9ucy5zdHJpbmdzLmxvYWRpbmcrKGQ/XCIgKFwiK2QrXCIpXCI6XCJcIiksY2hlY2tib3g6ITEsdG9vbHRpcDplfSxjKSxoLl9pc0xvYWRpbmc9ITAsaC5fZXJyb3I9bnVsbCxoLnJlbmRlclN0YXR1cygpO2JyZWFrO2Nhc2VcImVycm9yXCI6Zyh7dGl0bGU6aS5vcHRpb25zLnN0cmluZ3MubG9hZEVycm9yKyhkP1wiIChcIitkK1wiKVwiOlwiXCIpLGNoZWNrYm94OiExLHRvb2x0aXA6ZX0sYyksaC5faXNMb2FkaW5nPSExLGguX2Vycm9yPXttZXNzYWdlOmQsZGV0YWlsczplfSxoLnJlbmRlclN0YXR1cygpO2JyZWFrO2Nhc2VcIm5vZGF0YVwiOmcoe3RpdGxlOmkub3B0aW9ucy5zdHJpbmdzLm5vRGF0YSxjaGVja2JveDohMSx0b29sdGlwOmV9LGMpLGguX2lzTG9hZGluZz0hMSxoLl9lcnJvcj1udWxsLGgucmVuZGVyU3RhdHVzKCk7YnJlYWs7ZGVmYXVsdDphLmVycm9yKFwiaW52YWxpZCBub2RlIHN0YXR1cyBcIitjKX19LG5vZGVUb2dnbGVFeHBhbmRlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub2RlU2V0RXhwYW5kZWQoYSwhYS5ub2RlLmV4cGFuZGVkKX0sbm9kZVRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVTZXRTZWxlY3RlZChhLCFhLm5vZGUuc2VsZWN0ZWQpfSx0cmVlQ2xlYXI6ZnVuY3Rpb24oYSl7dmFyIGI9YS50cmVlO2IuYWN0aXZlTm9kZT1udWxsLGIuZm9jdXNOb2RlPW51bGwsYi4kZGl2LmZpbmQoXCI+dWwuZmFuY3l0cmVlLWNvbnRhaW5lclwiKS5lbXB0eSgpLGIucm9vdE5vZGUuY2hpbGRyZW49bnVsbH0sdHJlZUNyZWF0ZTpmdW5jdGlvbihhKXt9LHRyZWVEZXN0cm95OmZ1bmN0aW9uKGEpe3RoaXMuJGRpdi5maW5kKFwiPnVsLmZhbmN5dHJlZS1jb250YWluZXJcIikucmVtb3ZlKCksdGhpcy4kc291cmNlJiZ0aGlzLiRzb3VyY2UucmVtb3ZlQ2xhc3MoXCJ1aS1oZWxwZXItaGlkZGVuXCIpfSx0cmVlSW5pdDpmdW5jdGlvbihhKXt0aGlzLnRyZWVMb2FkKGEpfSx0cmVlTG9hZDpmdW5jdGlvbihiLGMpe3ZhciBkLGYsZyxoLGk9Yi50cmVlLGo9Yi53aWRnZXQuZWxlbWVudCxrPWEuZXh0ZW5kKHt9LGIse25vZGU6dGhpcy5yb290Tm9kZX0pO2lmKGkucm9vdE5vZGUuY2hpbGRyZW4mJnRoaXMudHJlZUNsZWFyKGIpLGM9Y3x8dGhpcy5vcHRpb25zLnNvdXJjZSlcInN0cmluZ1wiPT10eXBlb2YgYyYmYS5lcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtlbHNlIHN3aXRjaChmPWouZGF0YShcInR5cGVcIil8fFwiaHRtbFwiKXtjYXNlXCJodG1sXCI6Zz1qLmZpbmQoXCI+dWw6Zmlyc3RcIiksZy5hZGRDbGFzcyhcInVpLWZhbmN5dHJlZS1zb3VyY2UgdWktaGVscGVyLWhpZGRlblwiKSxjPWEudWkuZmFuY3l0cmVlLnBhcnNlSHRtbChnKSx0aGlzLmRhdGE9YS5leHRlbmQodGhpcy5kYXRhLG4oZykpO2JyZWFrO2Nhc2VcImpzb25cIjpjPWEucGFyc2VKU09OKGoudGV4dCgpKSxqLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDM9PT10aGlzLm5vZGVUeXBlfSkucmVtb3ZlKCksYS5pc1BsYWluT2JqZWN0KGMpJiYoZShhLmlzQXJyYXkoYy5jaGlsZHJlbiksXCJpZiBhbiBvYmplY3QgaXMgcGFzc2VkIGFzIHNvdXJjZSwgaXQgbXVzdCBjb250YWluIGEgJ2NoaWxkcmVuJyBhcnJheSAoYWxsIG90aGVyIHByb3BlcnRpZXMgYXJlIGFkZGVkIHRvICd0cmVlLmRhdGEnKVwiKSxkPWMsYz1jLmNoaWxkcmVuLGRlbGV0ZSBkLmNoaWxkcmVuLGEuZXh0ZW5kKGkuZGF0YSxkKSk7YnJlYWs7ZGVmYXVsdDphLmVycm9yKFwiSW52YWxpZCBkYXRhLXR5cGU6IFwiK2YpfXJldHVybiBoPXRoaXMubm9kZUxvYWRDaGlsZHJlbihrLGMpLmRvbmUoZnVuY3Rpb24oKXtpLnJlbmRlcigpLDM9PT1iLm9wdGlvbnMuc2VsZWN0TW9kZSYmaS5yb290Tm9kZS5maXhTZWxlY3Rpb24zRnJvbUVuZE5vZGVzKCksaS5hY3RpdmVOb2RlJiZpLm9wdGlvbnMuYWN0aXZlVmlzaWJsZSYmaS5hY3RpdmVOb2RlLm1ha2VWaXNpYmxlKCksaS5fdHJpZ2dlclRyZWVFdmVudChcImluaXRcIixudWxsLHtzdGF0dXM6ITB9KX0pLmZhaWwoZnVuY3Rpb24oKXtpLnJlbmRlcigpLGkuX3RyaWdnZXJUcmVlRXZlbnQoXCJpbml0XCIsbnVsbCx7c3RhdHVzOiExfSl9KX0sdHJlZVJlZ2lzdGVyTm9kZTpmdW5jdGlvbihhLGIsYyl7fSx0cmVlU2V0Rm9jdXM6ZnVuY3Rpb24oYixjLGQpe2M9YyE9PSExLGMhPT10aGlzLmhhc0ZvY3VzKCkmJih0aGlzLl9oYXNGb2N1cz1jLCFjJiZ0aGlzLmZvY3VzTm9kZT90aGlzLmZvY3VzTm9kZS5zZXRGb2N1cyghMSk6IWN8fGQmJmQuY2FsbGVkQnlOb2RlfHxhKHRoaXMuJGNvbnRhaW5lcikuZm9jdXMoKSx0aGlzLiRjb250YWluZXIudG9nZ2xlQ2xhc3MoXCJmYW5jeXRyZWUtdHJlZWZvY3VzXCIsYyksdGhpcy5fdHJpZ2dlclRyZWVFdmVudChjP1wiZm9jdXNUcmVlXCI6XCJibHVyVHJlZVwiKSxjJiYhdGhpcy5hY3RpdmVOb2RlJiZ0aGlzLmdldEZpcnN0Q2hpbGQoKSYmdGhpcy5nZXRGaXJzdENoaWxkKCkuc2V0Rm9jdXMoKSl9LHRyZWVTZXRPcHRpb246ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWIudHJlZSxmPSEwLGc9ITE7c3dpdGNoKGMpe2Nhc2VcImFyaWFcIjpjYXNlXCJjaGVja2JveFwiOmNhc2VcImljb25cIjpjYXNlXCJtaW5FeHBhbmRMZXZlbFwiOmNhc2VcInRhYmluZGV4XCI6ZS5fY2FsbEhvb2soXCJ0cmVlQ3JlYXRlXCIsZSksZz0hMDticmVhaztjYXNlXCJlc2NhcGVUaXRsZXNcIjpjYXNlXCJ0b29sdGlwXCI6Zz0hMDticmVhaztjYXNlXCJydGxcIjpkPT09ITE/ZS4kY29udGFpbmVyLmF0dHIoXCJESVJcIixudWxsKS5yZW1vdmVDbGFzcyhcImZhbmN5dHJlZS1ydGxcIik6ZS4kY29udGFpbmVyLmF0dHIoXCJESVJcIixcIlJUTFwiKS5hZGRDbGFzcyhcImZhbmN5dHJlZS1ydGxcIiksZz0hMDticmVhaztjYXNlXCJzb3VyY2VcIjpmPSExLGUuX2NhbGxIb29rKFwidHJlZUxvYWRcIixlLGQpLGc9ITB9ZS5kZWJ1ZyhcInNldCBvcHRpb24gXCIrYytcIj1cIitkK1wiIDxcIit0eXBlb2YgZCtcIj5cIiksZiYmKHRoaXMud2lkZ2V0Ll9zdXBlcj90aGlzLndpZGdldC5fc3VwZXIuY2FsbCh0aGlzLndpZGdldCxjLGQpOmEuV2lkZ2V0LnByb3RvdHlwZS5fc2V0T3B0aW9uLmNhbGwodGhpcy53aWRnZXQsYyxkKSksZyYmZS5yZW5kZXIoITAsITEpfX0pLGEud2lkZ2V0KFwidWkuZmFuY3l0cmVlXCIse29wdGlvbnM6e2FjdGl2ZVZpc2libGU6ITAsYWpheDp7dHlwZTpcIkdFVFwiLGNhY2hlOiExLGRhdGFUeXBlOlwianNvblwifSxhcmlhOiExLGF1dG9BY3RpdmF0ZTohMCxhdXRvQ29sbGFwc2U6ITEsYXV0b1Njcm9sbDohMSxjaGVja2JveDohMSxjbGlja0ZvbGRlck1vZGU6NCxkZWJ1Z0xldmVsOm51bGwsZGlzYWJsZWQ6ITEsZW5hYmxlQXNweDohMCxlc2NhcGVUaXRsZXM6ITEsZXh0ZW5zaW9uczpbXSx0b2dnbGVFZmZlY3Q6e2VmZmVjdDpcImJsaW5kXCIsb3B0aW9uczp7ZGlyZWN0aW9uOlwidmVydGljYWxcIixzY2FsZTpcImJveFwifSxkdXJhdGlvbjoyMDB9LGdlbmVyYXRlSWRzOiExLGljb246ITAsaWRQcmVmaXg6XCJmdF9cIixmb2N1c09uU2VsZWN0OiExLGtleWJvYXJkOiEwLGtleVBhdGhTZXBhcmF0b3I6XCIvXCIsbWluRXhwYW5kTGV2ZWw6MSxxdWlja3NlYXJjaDohMSxydGw6ITEsc2Nyb2xsT2ZzOnt0b3A6MCxib3R0b206MH0sc2Nyb2xsUGFyZW50Om51bGwsc2VsZWN0TW9kZToyLHN0cmluZ3M6e2xvYWRpbmc6XCJMb2FkaW5nJiM4MjMwO1wiLGxvYWRFcnJvcjpcIkxvYWQgZXJyb3IhXCIsbW9yZURhdGE6XCJNb3JlJiM4MjMwO1wiLG5vRGF0YTpcIk5vIGRhdGEuXCJ9LHRhYmluZGV4OlwiMFwiLHRpdGxlc1RhYmJhYmxlOiExLHRvb2x0aXA6ITEsX2NsYXNzTmFtZXM6e25vZGU6XCJmYW5jeXRyZWUtbm9kZVwiLGZvbGRlcjpcImZhbmN5dHJlZS1mb2xkZXJcIixjb21iaW5lZEV4cGFuZGVyUHJlZml4OlwiZmFuY3l0cmVlLWV4cC1cIixjb21iaW5lZEljb25QcmVmaXg6XCJmYW5jeXRyZWUtaWNvLVwiLGhhc0NoaWxkcmVuOlwiZmFuY3l0cmVlLWhhcy1jaGlsZHJlblwiLGFjdGl2ZTpcImZhbmN5dHJlZS1hY3RpdmVcIixzZWxlY3RlZDpcImZhbmN5dHJlZS1zZWxlY3RlZFwiLGV4cGFuZGVkOlwiZmFuY3l0cmVlLWV4cGFuZGVkXCIsbGF6eTpcImZhbmN5dHJlZS1sYXp5XCIsZm9jdXNlZDpcImZhbmN5dHJlZS1mb2N1c2VkXCIscGFydGxvYWQ6XCJmYW5jeXRyZWUtcGFydGxvYWRcIixwYXJ0c2VsOlwiZmFuY3l0cmVlLXBhcnRzZWxcIix1bnNlbGVjdGFibGU6XCJmYW5jeXRyZWUtdW5zZWxlY3RhYmxlXCIsbGFzdHNpYjpcImZhbmN5dHJlZS1sYXN0c2liXCIsbG9hZGluZzpcImZhbmN5dHJlZS1sb2FkaW5nXCIsZXJyb3I6XCJmYW5jeXRyZWUtZXJyb3JcIixzdGF0dXNOb2RlUHJlZml4OlwiZmFuY3l0cmVlLXN0YXR1c25vZGUtXCJ9LGxhenlMb2FkOm51bGwscG9zdFByb2Nlc3M6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMudHJlZT1uZXcgdCh0aGlzKSx0aGlzLiRzb3VyY2U9dGhpcy5zb3VyY2V8fFwianNvblwiPT09dGhpcy5lbGVtZW50LmRhdGEoXCJ0eXBlXCIpP3RoaXMuZWxlbWVudDp0aGlzLmVsZW1lbnQuZmluZChcIj51bDpmaXJzdFwiKTt2YXIgYixjLGYsZz10aGlzLm9wdGlvbnMsaD1nLmV4dGVuc2lvbnMsaT10aGlzLnRyZWU7Zm9yKGY9MDtmPGgubGVuZ3RoO2YrKyljPWhbZl0sYj1hLnVpLmZhbmN5dHJlZS5fZXh0ZW5zaW9uc1tjXSxifHxhLmVycm9yKFwiQ291bGQgbm90IGFwcGx5IGV4dGVuc2lvbiAnXCIrYytcIicgKGl0IGlzIG5vdCByZWdpc3RlcmVkLCBkaWQgeW91IGZvcmdldCB0byBpbmNsdWRlIGl0PylcIiksdGhpcy50cmVlLm9wdGlvbnNbY109YS5leHRlbmQoITAse30sYi5vcHRpb25zLHRoaXMudHJlZS5vcHRpb25zW2NdKSxlKHRoaXMudHJlZS5leHRbY109PT1kLFwiRXh0ZW5zaW9uIG5hbWUgbXVzdCBub3QgZXhpc3QgYXMgRmFuY3l0cmVlLmV4dCBhdHRyaWJ1dGU6ICdcIitjK1wiJ1wiKSx0aGlzLnRyZWUuZXh0W2NdPXt9LGoodGhpcy50cmVlLGksYixjKSxpPWI7Zy5pY29ucyE9PWQmJihnLmljb24hPT0hMD9hLmVycm9yKFwiJ2ljb25zJyB0cmVlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE0LjA6IHVzZSAnaWNvbicgb25seSBpbnN0ZWFkXCIpOih0aGlzLnRyZWUud2FybihcIidpY29ucycgdHJlZSBvcHRpb24gaXMgZGVwcmVjYXRlZCBzaW5jZSB2Mi4xNC4wOiB1c2UgJ2ljb24nIGluc3RlYWRcIiksZy5pY29uPWcuaWNvbnMpKSxnLmljb25DbGFzcyE9PWQmJihnLmljb24/YS5lcnJvcihcIidpY29uQ2xhc3MnIHRyZWUgb3B0aW9uIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuMTQuMDogdXNlICdpY29uJyBvbmx5IGluc3RlYWRcIik6KHRoaXMudHJlZS53YXJuKFwiJ2ljb25DbGFzcycgdHJlZSBvcHRpb24gaXMgZGVwcmVjYXRlZCBzaW5jZSB2Mi4xNC4wOiB1c2UgJ2ljb24nIGluc3RlYWRcIiksZy5pY29uPWcuaWNvbkNsYXNzKSksZy50YWJiYWJsZSE9PWQmJihnLnRhYmluZGV4PWcudGFiYmFibGU/XCIwXCI6XCItMVwiLHRoaXMudHJlZS53YXJuKFwiJ3RhYmJhYmxlJyB0cmVlIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE3LjA6IHVzZSAndGFiaW5kZXg9J1wiK2cudGFiaW5kZXgrXCInIGluc3RlYWRcIikpLHRoaXMudHJlZS5fY2FsbEhvb2soXCJ0cmVlQ3JlYXRlXCIsdGhpcy50cmVlKX0sX2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnRyZWUuX2NhbGxIb29rKFwidHJlZUluaXRcIix0aGlzLnRyZWUpLHRoaXMuX2JpbmQoKX0sX3NldE9wdGlvbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyZWUuX2NhbGxIb29rKFwidHJlZVNldE9wdGlvblwiLHRoaXMudHJlZSxhLGIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fdW5iaW5kKCksdGhpcy50cmVlLl9jYWxsSG9vayhcInRyZWVEZXN0cm95XCIsdGhpcy50cmVlKSxhLldpZGdldC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxfdW5iaW5kOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy50cmVlLl9uczt0aGlzLmVsZW1lbnQudW5iaW5kKGIpLHRoaXMudHJlZS4kY29udGFpbmVyLnVuYmluZChiKSxhKGMpLnVuYmluZChiKX0sX2JpbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5vcHRpb25zLGM9dGhpcy50cmVlLGQ9Yy5fbnM7dGhpcy5fdW5iaW5kKCksYy4kY29udGFpbmVyLm9uKFwiZm9jdXNpblwiK2QrXCIgZm9jdXNvdXRcIitkLGZ1bmN0aW9uKGEpe3ZhciBiPXcuZ2V0Tm9kZShhKSxkPVwiZm9jdXNpblwiPT09YS50eXBlO2I/Yy5fY2FsbEhvb2soXCJub2RlU2V0Rm9jdXNcIixjLl9tYWtlSG9va0NvbnRleHQoYixhKSxkKTpjLl9jYWxsSG9vayhcInRyZWVTZXRGb2N1c1wiLGMsZCl9KS5vbihcInNlbGVjdHN0YXJ0XCIrZCxcInNwYW4uZmFuY3l0cmVlLXRpdGxlXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJrZXlkb3duXCIrZCxmdW5jdGlvbihhKXtpZihiLmRpc2FibGVkfHxiLmtleWJvYXJkPT09ITEpcmV0dXJuITA7dmFyIGQsZT1jLmZvY3VzTm9kZSxmPWMuX21ha2VIb29rQ29udGV4dChlfHxjLGEpLGc9Yy5waGFzZTt0cnl7cmV0dXJuIGMucGhhc2U9XCJ1c2VyRXZlbnRcIixkPWU/Yy5fdHJpZ2dlck5vZGVFdmVudChcImtleWRvd25cIixlLGEpOmMuX3RyaWdnZXJUcmVlRXZlbnQoXCJrZXlkb3duXCIsYSksXCJwcmV2ZW50TmF2XCI9PT1kP2Q9ITA6ZCE9PSExJiYoZD1jLl9jYWxsSG9vayhcIm5vZGVLZXlkb3duXCIsZikpLGR9ZmluYWxseXtjLnBoYXNlPWd9fSkub24oXCJjbGlja1wiK2QrXCIgZGJsY2xpY2tcIitkLGZ1bmN0aW9uKGMpe2lmKGIuZGlzYWJsZWQpcmV0dXJuITA7dmFyIGQsZT13LmdldEV2ZW50VGFyZ2V0KGMpLGY9ZS5ub2RlLGc9YS50cmVlLGg9Zy5waGFzZTtpZighZilyZXR1cm4hMDtkPWcuX21ha2VIb29rQ29udGV4dChmLGMpO3RyeXtzd2l0Y2goZy5waGFzZT1cInVzZXJFdmVudFwiLGMudHlwZSl7Y2FzZVwiY2xpY2tcIjpyZXR1cm4gZC50YXJnZXRUeXBlPWUudHlwZSxmLmlzUGFnaW5nTm9kZSgpP2cuX3RyaWdnZXJOb2RlRXZlbnQoXCJjbGlja1BhZ2luZ1wiLGQsYyk9PT0hMDpnLl90cmlnZ2VyTm9kZUV2ZW50KFwiY2xpY2tcIixkLGMpIT09ITEmJmcuX2NhbGxIb29rKFwibm9kZUNsaWNrXCIsZCk7Y2FzZVwiZGJsY2xpY2tcIjpyZXR1cm4gZC50YXJnZXRUeXBlPWUudHlwZSxnLl90cmlnZ2VyTm9kZUV2ZW50KFwiZGJsY2xpY2tcIixkLGMpIT09ITEmJmcuX2NhbGxIb29rKFwibm9kZURibGNsaWNrXCIsZCl9fWZpbmFsbHl7Zy5waGFzZT1ofX0pfSxnZXRBY3RpdmVOb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5hY3RpdmVOb2RlfSxnZXROb2RlQnlLZXk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudHJlZS5nZXROb2RlQnlLZXkoYSl9LGdldFJvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJlZS5yb290Tm9kZX0sZ2V0VHJlZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWV9fSksdz1hLnVpLmZhbmN5dHJlZSxhLmV4dGVuZChhLnVpLmZhbmN5dHJlZSx7dmVyc2lvbjpcIjIuMjEuMFwiLGJ1aWxkVHlwZTogXCJwcm9kdWN0aW9uXCIsZGVidWdMZXZlbDogMSxfbmV4dElkOjEsX25leHROb2RlS2V5OjEsX2V4dGVuc2lvbnM6e30sX0ZhbmN5dHJlZUNsYXNzOnQsX0ZhbmN5dHJlZU5vZGVDbGFzczpzLGpxdWVyeVN1cHBvcnRzOntwb3NpdGlvbk15T2ZzOmgoYS51aS52ZXJzaW9uLDEsOSl9LGFzc2VydDpmdW5jdGlvbihhLGIpe3JldHVybiBlKGEsYil9LGRlYm91bmNlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO3JldHVybiAzPT09YXJndW1lbnRzLmxlbmd0aCYmXCJib29sZWFuXCIhPXR5cGVvZiBjJiYoZD1jLGM9ITEpLGZ1bmN0aW9uKCl7dmFyIGY9YXJndW1lbnRzO2Q9ZHx8dGhpcyxjJiYhZSYmYi5hcHBseShkLGYpLGNsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjfHxiLmFwcGx5KGQsZiksZT1udWxsfSxhKX19LGRlYnVnOmZ1bmN0aW9uKGIpe2EudWkuZmFuY3l0cmVlLmRlYnVnTGV2ZWw+PTImJmYoXCJsb2dcIixhcmd1bWVudHMpfSxlcnJvcjpmdW5jdGlvbihhKXtmKFwiZXJyb3JcIixhcmd1bWVudHMpfSxlc2NhcGVIdG1sOm8sZml4UG9zaXRpb25PcHRpb25zOmZ1bmN0aW9uKGIpe2lmKChiLm9mZnNldHx8KFwiXCIrYi5teStiLmF0KS5pbmRleE9mKFwiJVwiKT49MCkmJmEuZXJyb3IoXCJleHBlY3RlZCBuZXcgcG9zaXRpb24gc3ludGF4IChidXQgJyUnIGlzIG5vdCBzdXBwb3J0ZWQpXCIpLCFhLnVpLmZhbmN5dHJlZS5qcXVlcnlTdXBwb3J0cy5wb3NpdGlvbk15T2ZzKXt2YXIgYz0vKFxcdyspKFsrLV0/XFxkKyk/XFxzKyhcXHcrKShbKy1dP1xcZCspPy8uZXhlYyhiLm15KSxkPS8oXFx3KykoWystXT9cXGQrKT9cXHMrKFxcdyspKFsrLV0/XFxkKyk/Ly5leGVjKGIuYXQpLGU9KGNbMl0/K2NbMl06MCkrKGRbMl0/K2RbMl06MCksZj0oY1s0XT8rY1s0XTowKSsoZFs0XT8rZFs0XTowKTtiPWEuZXh0ZW5kKHt9LGIse215OmNbMV0rXCIgXCIrY1szXSxhdDpkWzFdK1wiIFwiK2RbM119KSwoZXx8ZikmJihiLm9mZnNldD1cIlwiK2UrXCIgXCIrZil9cmV0dXJuIGJ9LGdldEV2ZW50VGFyZ2V0VHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRFdmVudFRhcmdldChhKS50eXBlfSxnZXRFdmVudFRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1iJiZiLnRhcmdldD9iLnRhcmdldC5jbGFzc05hbWU6XCJcIixlPXtub2RlOnRoaXMuZ2V0Tm9kZShiLnRhcmdldCksdHlwZTpkfTtyZXR1cm4vXFxiZmFuY3l0cmVlLXRpdGxlXFxiLy50ZXN0KGMpP2UudHlwZT1cInRpdGxlXCI6L1xcYmZhbmN5dHJlZS1leHBhbmRlclxcYi8udGVzdChjKT9lLnR5cGU9ZS5ub2RlLmhhc0NoaWxkcmVuKCk9PT0hMT9cInByZWZpeFwiOlwiZXhwYW5kZXJcIjovXFxiZmFuY3l0cmVlLWNoZWNrYm94XFxiLy50ZXN0KGMpfHwvXFxiZmFuY3l0cmVlLXJhZGlvXFxiLy50ZXN0KGMpP2UudHlwZT1cImNoZWNrYm94XCI6L1xcYmZhbmN5dHJlZS1pY29uXFxiLy50ZXN0KGMpP2UudHlwZT1cImljb25cIjovXFxiZmFuY3l0cmVlLW5vZGVcXGIvLnRlc3QoYyk/ZS50eXBlPVwidGl0bGVcIjpiJiZiLnRhcmdldCYmYShiLnRhcmdldCkuY2xvc2VzdChcIi5mYW5jeXRyZWUtdGl0bGVcIikubGVuZ3RoJiYoZS50eXBlPVwidGl0bGVcIiksZX0sZ2V0Tm9kZTpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgcylyZXR1cm4gYTtmb3IoYS5zZWxlY3RvciE9PWQ/YT1hWzBdOmEub3JpZ2luYWxFdmVudCE9PWQmJihhPWEudGFyZ2V0KTthOyl7aWYoYS5mdG5vZGUpcmV0dXJuIGEuZnRub2RlO2E9YS5wYXJlbnROb2RlfXJldHVybiBudWxsfSxnZXRUcmVlOmZ1bmN0aW9uKGIpe3ZhciBjO3JldHVybiBiIGluc3RhbmNlb2YgdD9iOihiPT09ZCYmKGI9MCksXCJudW1iZXJcIj09dHlwZW9mIGI/Yj1hKFwiLmZhbmN5dHJlZS1jb250YWluZXJcIikuZXEoYik6XCJzdHJpbmdcIj09dHlwZW9mIGI/Yj1hKGIpLmVxKDApOmIuc2VsZWN0b3IhPT1kP2I9Yi5lcSgwKTpiLm9yaWdpbmFsRXZlbnQhPT1kJiYoYj1hKGIudGFyZ2V0KSksYj1iLmNsb3Nlc3QoXCI6dWktZmFuY3l0cmVlXCIpLGM9Yi5kYXRhKFwidWktZmFuY3l0cmVlXCIpfHxiLmRhdGEoXCJmYW5jeXRyZWVcIiksYz9jLnRyZWU6bnVsbCl9LGV2ZW50VG9TdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9YS53aGljaCxjPWEudHlwZSxkPVtdO3JldHVybiBhLmFsdEtleSYmZC5wdXNoKFwiYWx0XCIpLGEuY3RybEtleSYmZC5wdXNoKFwiY3RybFwiKSxhLm1ldGFLZXkmJmQucHVzaChcIm1ldGFcIiksYS5zaGlmdEtleSYmZC5wdXNoKFwic2hpZnRcIiksXCJjbGlja1wiPT09Y3x8XCJkYmxjbGlja1wiPT09Yz9kLnB1c2goRVthLmJ1dHRvbl0rYyk6Q1tiXXx8ZC5wdXNoKERbYl18fFN0cmluZy5mcm9tQ2hhckNvZGUoYikudG9Mb3dlckNhc2UoKSksZC5qb2luKFwiK1wiKX0saW5mbzpmdW5jdGlvbihiKXthLnVpLmZhbmN5dHJlZS5kZWJ1Z0xldmVsPj0xJiZmKFwiaW5mb1wiLGFyZ3VtZW50cyl9LGtleUV2ZW50VG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMud2FybihcImtleUV2ZW50VG9TdHJpbmcoKSBpcyBkZXByZWNhdGVkOiB1c2UgZXZlbnRUb1N0cmluZygpXCIpLHRoaXMuZXZlbnRUb1N0cmluZyhhKX0sb3ZlcnJpZGVNZXRob2Q6ZnVuY3Rpb24oYixjLGQpe3ZhciBlLGY9YltjXXx8YS5ub29wO2JbY109ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGU9dGhpcy5fc3VwZXIsdGhpcy5fc3VwZXI9ZixkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1maW5hbGx5e3RoaXMuX3N1cGVyPWV9fX0scGFyc2VIdG1sOmZ1bmN0aW9uKGIpe3ZhciBjLGUsZixnLGgsaSxqLGssbD1iLmZpbmQoXCI+bGlcIiksbT1bXTtyZXR1cm4gbC5lYWNoKGZ1bmN0aW9uKCl7dmFyIGwsbyxwPWEodGhpcykscT1wLmZpbmQoXCI+c3BhbjpmaXJzdFwiLHRoaXMpLHI9cS5sZW5ndGg/bnVsbDpwLmZpbmQoXCI+YTpmaXJzdFwiKSxzPXt0b29sdGlwOm51bGwsZGF0YTp7fX07Zm9yKHEubGVuZ3RoP3MudGl0bGU9cS5odG1sKCk6ciYmci5sZW5ndGg/KHMudGl0bGU9ci5odG1sKCkscy5kYXRhLmhyZWY9ci5hdHRyKFwiaHJlZlwiKSxzLmRhdGEudGFyZ2V0PXIuYXR0cihcInRhcmdldFwiKSxzLnRvb2x0aXA9ci5hdHRyKFwidGl0bGVcIikpOihzLnRpdGxlPXAuaHRtbCgpLGg9cy50aXRsZS5zZWFyY2goLzx1bC9pKSxoPj0wJiYocy50aXRsZT1zLnRpdGxlLnN1YnN0cmluZygwLGgpKSkscy50aXRsZT1hLnRyaW0ocy50aXRsZSksZz0wLGk9Ri5sZW5ndGg7ZzxpO2crKylzW0ZbZ11dPWQ7Zm9yKGM9dGhpcy5jbGFzc05hbWUuc3BsaXQoXCIgXCIpLGY9W10sZz0wLGk9Yy5sZW5ndGg7ZzxpO2crKyllPWNbZ10sR1tlXT9zW2VdPSEwOmYucHVzaChlKTtpZihzLmV4dHJhQ2xhc3Nlcz1mLmpvaW4oXCIgXCIpLGo9cC5hdHRyKFwidGl0bGVcIiksaiYmKHMudG9vbHRpcD1qKSxqPXAuYXR0cihcImlkXCIpLGomJihzLmtleT1qKSxsPW4ocCksbCYmIWEuaXNFbXB0eU9iamVjdChsKSl7Zm9yKG8gaW4gSilsLmhhc093blByb3BlcnR5KG8pJiYobFtKW29dXT1sW29dLGRlbGV0ZSBsW29dKTtmb3IoZz0wLGk9SC5sZW5ndGg7ZzxpO2crKylqPUhbZ10saz1sW2pdLG51bGwhPWsmJihkZWxldGUgbFtqXSxzW2pdPWspO2EuZXh0ZW5kKHMuZGF0YSxsKX1iPXAuZmluZChcIj51bDpmaXJzdFwiKSxiLmxlbmd0aD9zLmNoaWxkcmVuPWEudWkuZmFuY3l0cmVlLnBhcnNlSHRtbChiKTpzLmNoaWxkcmVuPXMubGF6eT9kOm51bGwsbS5wdXNoKHMpfSksbX0scmVnaXN0ZXJFeHRlbnNpb246ZnVuY3Rpb24oYil7ZShudWxsIT1iLm5hbWUsXCJleHRlbnNpb25zIG11c3QgaGF2ZSBhIGBuYW1lYCBwcm9wZXJ0eS5cIiksZShudWxsIT1iLnZlcnNpb24sXCJleHRlbnNpb25zIG11c3QgaGF2ZSBhIGB2ZXJzaW9uYCBwcm9wZXJ0eS5cIiksYS51aS5mYW5jeXRyZWUuX2V4dGVuc2lvbnNbYi5uYW1lXT1ifSx1bmVzY2FwZUh0bWw6ZnVuY3Rpb24oYSl7dmFyIGI9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBiLmlubmVySFRNTD1hLDA9PT1iLmNoaWxkTm9kZXMubGVuZ3RoP1wiXCI6Yi5jaGlsZE5vZGVzWzBdLm5vZGVWYWx1ZX0sd2FybjpmdW5jdGlvbihhKXtmKFwid2FyblwiLGFyZ3VtZW50cyl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLmNoaWxkY291bnRlci5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjthLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmNvdW50U2VsZWN0ZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLm9wdGlvbnM7cmV0dXJuIGIuZ2V0U2VsZWN0ZWROb2RlcyhhKS5sZW5ndGh9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLnVwZGF0ZUNvdW50ZXJzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWEoXCJzcGFuLmZhbmN5dHJlZS1jaGlsZGNvdW50ZXJcIixiLnNwYW4pLGQ9Yi50cmVlLm9wdGlvbnMuY2hpbGRjb3VudGVyLGU9Yi5jb3VudENoaWxkcmVuKGQuZGVlcCk7Yi5kYXRhLmNoaWxkQ291bnRlcj1lLCFlJiZkLmhpZGVaZXJvc3x8Yi5pc0V4cGFuZGVkKCkmJmQuaGlkZUV4cGFuZGVkP2MucmVtb3ZlKCk6KGMubGVuZ3RofHwoYz1hKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1jaGlsZGNvdW50ZXInLz5cIikuYXBwZW5kVG8oYShcInNwYW4uZmFuY3l0cmVlLWljb25cIixiLnNwYW4pKSksYy50ZXh0KGUpKSwhZC5kZWVwfHxiLmlzVG9wTGV2ZWwoKXx8Yi5pc1Jvb3QoKXx8Yi5wYXJlbnQudXBkYXRlQ291bnRlcnMoKX0sYS51aS5mYW5jeXRyZWUucHJvdG90eXBlLndpZGdldE1ldGhvZDE9ZnVuY3Rpb24oYSl7dGhpcy50cmVlO3JldHVybiBhfSxhLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImNoaWxkY291bnRlclwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOntkZWVwOiEwLGhpZGVaZXJvczohMCxoaWRlRXhwYW5kZWQ6ITF9LGZvbzo0MixfYXBwZW5kQ291bnRlcjpmdW5jdGlvbihhKXt9LHRyZWVJbml0OmZ1bmN0aW9uKGEpe2Eub3B0aW9ucyxhLm9wdGlvbnMuY2hpbGRjb3VudGVyO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSx0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWNoaWxkY291bnRlclwiKX0sdHJlZURlc3Ryb3k6ZnVuY3Rpb24oYSl7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlUmVuZGVyVGl0bGU6ZnVuY3Rpb24oYixjKXt2YXIgZD1iLm5vZGUsZT1iLm9wdGlvbnMuY2hpbGRjb3VudGVyLGY9bnVsbD09ZC5kYXRhLmNoaWxkQ291bnRlcj9kLmNvdW50Q2hpbGRyZW4oZS5kZWVwKTorZC5kYXRhLmNoaWxkQ291bnRlcjt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksIWYmJmUuaGlkZVplcm9zfHxkLmlzRXhwYW5kZWQoKSYmZS5oaWRlRXhwYW5kZWR8fGEoXCJzcGFuLmZhbmN5dHJlZS1pY29uXCIsZC5zcGFuKS5hcHBlbmQoYShcIjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtY2hpbGRjb3VudGVyJy8+XCIpLnRleHQoZikpfSxub2RlU2V0RXhwYW5kZWQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEudHJlZTthLm5vZGU7cmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKS5hbHdheXMoZnVuY3Rpb24oKXtkLm5vZGVSZW5kZXJUaXRsZShhKX0pfX0pfShqUXVlcnkpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLmNsb25lcy5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShiLGMpe2J8fChjPWM/XCI6IFwiK2M6XCJcIixhLmVycm9yKFwiQXNzZXJ0aW9uIGZhaWxlZFwiK2MpKX1mdW5jdGlvbiBmKGEsYil7dmFyIGM7Zm9yKGM9YS5sZW5ndGgtMTtjPj0wO2MtLSlpZihhW2NdPT09YilyZXR1cm4gYS5zcGxpY2UoYywxKSwhMDtyZXR1cm4hMX1mdW5jdGlvbiBnKGEsYixjKXtmb3IodmFyIGQsZSxmPTMmYS5sZW5ndGgsZz1hLmxlbmd0aC1mLGg9YyxpPTM0MzI5MTgzNTMsaj00NjE4NDU5MDcsaz0wO2s8ZzspZT0yNTUmYS5jaGFyQ29kZUF0KGspfCgyNTUmYS5jaGFyQ29kZUF0KCsraykpPDw4fCgyNTUmYS5jaGFyQ29kZUF0KCsraykpPDwxNnwoMjU1JmEuY2hhckNvZGVBdCgrK2spKTw8MjQsKytrLGU9KDY1NTM1JmUpKmkrKCgoZT4+PjE2KSppJjY1NTM1KTw8MTYpJjQyOTQ5NjcyOTUsZT1lPDwxNXxlPj4+MTcsZT0oNjU1MzUmZSkqaisoKChlPj4+MTYpKmomNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxoXj1lLGg9aDw8MTN8aD4+PjE5LGQ9NSooNjU1MzUmaCkrKCg1KihoPj4+MTYpJjY1NTM1KTw8MTYpJjQyOTQ5NjcyOTUsaD0oNjU1MzUmZCkrMjc0OTIrKCgoZD4+PjE2KSs1ODk2NCY2NTUzNSk8PDE2KTtzd2l0Y2goZT0wLGYpe2Nhc2UgMzplXj0oMjU1JmEuY2hhckNvZGVBdChrKzIpKTw8MTY7Y2FzZSAyOmVePSgyNTUmYS5jaGFyQ29kZUF0KGsrMSkpPDw4O2Nhc2UgMTplXj0yNTUmYS5jaGFyQ29kZUF0KGspLGU9KDY1NTM1JmUpKmkrKCgoZT4+PjE2KSppJjY1NTM1KTw8MTYpJjQyOTQ5NjcyOTUsZT1lPDwxNXxlPj4+MTcsZT0oNjU1MzUmZSkqaisoKChlPj4+MTYpKmomNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxoXj1lfXJldHVybiBoXj1hLmxlbmd0aCxoXj1oPj4+MTYsaD0yMjQ2ODIyNTA3Kig2NTUzNSZoKSsoKDIyNDY4MjI1MDcqKGg+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxoXj1oPj4+MTMsaD0zMjY2NDg5OTA5Kig2NTUzNSZoKSsoKDMyNjY0ODk5MDkqKGg+Pj4xNikmNjU1MzUpPDwxNikmNDI5NDk2NzI5NSxoXj1oPj4+MTYsYj8oXCIwMDAwMDAwXCIrKGg+Pj4wKS50b1N0cmluZygxNikpLnN1YnN0cigtOCk6aD4+PjB9ZnVuY3Rpb24gaChiKXt2YXIgYyxkPWEubWFwKGIuZ2V0UGFyZW50TGlzdCghMSwhMCksZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVmS2V5fHxhLmtleX0pO3JldHVybiBkPWQuam9pbihcIi9cIiksYz1cImlkX1wiK2coZCwhMCl9YS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZU5vZGVDbGFzcy5wcm90b3R5cGUuZ2V0Q2xvbmVMaXN0PWZ1bmN0aW9uKGIpe3ZhciBjLGQ9dGhpcy50cmVlLGU9ZC5yZWZNYXBbdGhpcy5yZWZLZXldfHxudWxsLGY9ZC5rZXlNYXA7cmV0dXJuIGUmJihjPXRoaXMua2V5LGI/ZT1hLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBmW2FdfSk6KGU9YS5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWM/bnVsbDpmW2FdfSksZS5sZW5ndGg8MSYmKGU9bnVsbCkpKSxlfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5pc0Nsb25lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWZLZXl8fG51bGwsYj1hJiZ0aGlzLnRyZWUucmVmTWFwW2FdfHxudWxsO3JldHVybiEhKGImJmIubGVuZ3RoPjEpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5yZVJlZ2lzdGVyPWZ1bmN0aW9uKGIsYyl7Yj1udWxsPT1iP251bGw6XCJcIitiLGM9bnVsbD09Yz9udWxsOlwiXCIrYzt2YXIgZD10aGlzLnRyZWUsZT10aGlzLmtleSxmPXRoaXMucmVmS2V5LGc9ZC5rZXlNYXAsaD1kLnJlZk1hcCxpPWhbZl18fG51bGwsaj0hMTtyZXR1cm4gbnVsbCE9YiYmYiE9PXRoaXMua2V5JiYoZ1tiXSYmYS5lcnJvcihcIltleHQtY2xvbmVzXSByZVJlZ2lzdGVyKFwiK2IrXCIpOiBhbHJlYWR5IGV4aXN0czogXCIrdGhpcyksZGVsZXRlIGdbZV0sZ1tiXT10aGlzLGkmJihoW2ZdPWEubWFwKGksZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1lP2I6YX0pKSx0aGlzLmtleT1iLGo9ITApLG51bGwhPWMmJmMhPT10aGlzLnJlZktleSYmKGkmJigxPT09aS5sZW5ndGg/ZGVsZXRlIGhbZl06aFtmXT1hLm1hcChpLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09ZT9udWxsOmF9KSksaFtjXT9oW2NdLmFwcGVuZChiKTpoW2NdPVt0aGlzLmtleV0sdGhpcy5yZWZLZXk9YyxqPSEwKSxqfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5zZXRSZWZLZXk9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVSZWdpc3RlcihudWxsLGEpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmdldE5vZGVzQnlSZWY9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmtleU1hcCxlPXRoaXMucmVmTWFwW2JdfHxudWxsO3JldHVybiBlJiYoZT1jP2EubWFwKGUsZnVuY3Rpb24oYSl7dmFyIGI9ZFthXTtyZXR1cm4gYi5pc0Rlc2NlbmRhbnRPZihjKT9iOm51bGx9KTphLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBkW2FdfSksZS5sZW5ndGg8MSYmKGU9bnVsbCkpLGV9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuY2hhbmdlUmVmS2V5PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMua2V5TWFwLGY9dGhpcy5yZWZNYXBbYV18fG51bGw7aWYoZil7Zm9yKGM9MDtjPGYubGVuZ3RoO2MrKylkPWVbZltjXV0sZC5yZWZLZXk9YjtkZWxldGUgdGhpcy5yZWZNYXBbYV0sdGhpcy5yZWZNYXBbYl09Zn19LGEudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwiY2xvbmVzXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2hpZ2hsaWdodEFjdGl2ZUNsb25lczohMCxoaWdobGlnaHRDbG9uZXM6ITF9LHRyZWVDcmVhdGU6ZnVuY3Rpb24oYSl7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGEudHJlZS5yZWZNYXA9e30sYS50cmVlLmtleU1hcD17fX0sdHJlZUluaXQ6ZnVuY3Rpb24oYSl7dGhpcy4kY29udGFpbmVyLmFkZENsYXNzKFwiZmFuY3l0cmVlLWV4dC1jbG9uZXNcIiksZShudWxsPT1hLm9wdGlvbnMuZGVmYXVsdEtleSksYS5vcHRpb25zLmRlZmF1bHRLZXk9ZnVuY3Rpb24oYSl7cmV0dXJuIGgoYSl9LHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX0sdHJlZUNsZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnRyZWUucmVmTWFwPXt9LGEudHJlZS5rZXlNYXA9e30sdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSx0cmVlUmVnaXN0ZXJOb2RlOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZyxoLGk9Yi50cmVlLGo9aS5rZXlNYXAsaz1pLnJlZk1hcCxsPWQua2V5LG09ZCYmbnVsbCE9ZC5yZWZLZXk/XCJcIitkLnJlZktleTpudWxsO3JldHVybiBkLmlzU3RhdHVzTm9kZSgpP3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKTooYz8obnVsbCE9altkLmtleV0mJmEuZXJyb3IoXCJjbG9uZXMudHJlZVJlZ2lzdGVyTm9kZTogbm9kZS5rZXkgYWxyZWFkeSBleGlzdHM6IFwiK2QpLGpbbF09ZCxtJiYoZz1rW21dLGc/KGcucHVzaChsKSwyPT09Zy5sZW5ndGgmJmIub3B0aW9ucy5jbG9uZXMuaGlnaGxpZ2h0Q2xvbmVzJiZqW2dbMF1dLnJlbmRlclN0YXR1cygpKTprW21dPVtsXSkpOihudWxsPT1qW2xdJiZhLmVycm9yKFwiY2xvbmVzLnRyZWVSZWdpc3Rlck5vZGU6IG5vZGUua2V5IG5vdCByZWdpc3RlcmVkOiBcIitkLmtleSksZGVsZXRlIGpbbF0sbSYmKGc9a1ttXSxnJiYoaD1nLmxlbmd0aCxoPD0xPyhlKDE9PT1oKSxlKGdbMF09PT1sKSxkZWxldGUga1ttXSk6KGYoZyxsKSwyPT09aCYmYi5vcHRpb25zLmNsb25lcy5oaWdobGlnaHRDbG9uZXMmJmpbZ1swXV0ucmVuZGVyU3RhdHVzKCkpKSkpLHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSl9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGMsZCxlPWIubm9kZTtyZXR1cm4gZD10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYi5vcHRpb25zLmNsb25lcy5oaWdobGlnaHRDbG9uZXMmJihjPWEoZVtiLnRyZWUuc3RhdHVzQ2xhc3NQcm9wTmFtZV0pLGMubGVuZ3RoJiZlLmlzQ2xvbmUoKSYmYy5hZGRDbGFzcyhcImZhbmN5dHJlZS1jbG9uZVwiKSksZH0sbm9kZVNldEFjdGl2ZTpmdW5jdGlvbihiLGMpe3ZhciBkLGU9Yi50cmVlLnN0YXR1c0NsYXNzUHJvcE5hbWUsZj1iLm5vZGU7cmV0dXJuIGQ9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGIub3B0aW9ucy5jbG9uZXMuaGlnaGxpZ2h0QWN0aXZlQ2xvbmVzJiZmLmlzQ2xvbmUoKSYmYS5lYWNoKGYuZ2V0Q2xvbmVMaXN0KCEwKSxmdW5jdGlvbihiLGQpe2EoZFtlXSkudG9nZ2xlQ2xhc3MoXCJmYW5jeXRyZWUtYWN0aXZlLWNsb25lXCIsYyE9PSExKX0pLGR9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLmRuZC5taW4uanMnICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZShhKXtyZXR1cm4gMD09PWE/XCJcIjphPjA/XCIrXCIrYTpcIlwiK2F9ZnVuY3Rpb24gZigpe2h8fChhLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcImNvbm5lY3RUb0ZhbmN5dHJlZVwiLHtzdGFydDpmdW5jdGlvbihiLGMpe3ZhciBkPWEodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKXx8YSh0aGlzKS5kYXRhKFwiZHJhZ2dhYmxlXCIpLGU9Yy5oZWxwZXIuZGF0YShcImZ0U291cmNlTm9kZVwiKXx8bnVsbDtpZihlKXJldHVybiBkLm9mZnNldC5jbGljay50b3A9LTIsZC5vZmZzZXQuY2xpY2subGVmdD0xNixlLnRyZWUuZXh0LmRuZC5fb25EcmFnRXZlbnQoXCJzdGFydFwiLGUsbnVsbCxiLGMsZCl9LGRyYWc6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZz1hKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIil8fGEodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKSxoPWMuaGVscGVyLmRhdGEoXCJmdFNvdXJjZU5vZGVcIil8fG51bGwsaT1jLmhlbHBlci5kYXRhKFwiZnRUYXJnZXROb2RlXCIpfHxudWxsLGo9YS51aS5mYW5jeXRyZWUuZ2V0Tm9kZShiLnRhcmdldCksaz1oJiZoLnRyZWUub3B0aW9ucy5kbmQ7cmV0dXJuIGIudGFyZ2V0JiYhaiYmKGU9YShiLnRhcmdldCkuY2xvc2VzdChcImRpdi5mYW5jeXRyZWUtZHJhZy1oZWxwZXIsI2ZhbmN5dHJlZS1kcm9wLW1hcmtlclwiKS5sZW5ndGg+MCk/KGY9aHx8aXx8YS51aS5mYW5jeXRyZWUsdm9pZCBmLmRlYnVnKFwiRHJhZyBldmVudCBvdmVyIGhlbHBlcjogaWdub3JlZC5cIikpOihjLmhlbHBlci5kYXRhKFwiZnRUYXJnZXROb2RlXCIsaiksayYmay51cGRhdGVIZWxwZXImJihkPWgudHJlZS5fbWFrZUhvb2tDb250ZXh0KGgsYix7b3RoZXJOb2RlOmosdWk6YyxkcmFnZ2FibGU6Zyxkcm9wTWFya2VyOmEoXCIjZmFuY3l0cmVlLWRyb3AtbWFya2VyXCIpfSksay51cGRhdGVIZWxwZXIuY2FsbChoLnRyZWUsaCxkKSksaSYmaSE9PWomJmkudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcImxlYXZlXCIsaSxoLGIsYyxnKSx2b2lkKGomJmoudHJlZS5vcHRpb25zLmRuZC5kcmFnRHJvcCYmKGo9PT1pP2oudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcIm92ZXJcIixqLGgsYixjLGcpOihqLnRyZWUuZXh0LmRuZC5fb25EcmFnRXZlbnQoXCJlbnRlclwiLGosaCxiLGMsZyksai50cmVlLmV4dC5kbmQuX29uRHJhZ0V2ZW50KFwib3ZlclwiLGosaCxiLGMsZykpKSkpfSxzdG9wOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZT1hKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIil8fGEodGhpcykuZGF0YShcImRyYWdnYWJsZVwiKSxmPWMuaGVscGVyLmRhdGEoXCJmdFNvdXJjZU5vZGVcIil8fG51bGwsZz1jLmhlbHBlci5kYXRhKFwiZnRUYXJnZXROb2RlXCIpfHxudWxsLGg9XCJtb3VzZXVwXCI9PT1iLnR5cGUmJjE9PT1iLndoaWNoO2h8fChkPWZ8fGd8fGEudWkuZmFuY3l0cmVlLGQuZGVidWcoXCJEcmFnIHdhcyBjYW5jZWxsZWRcIikpLGcmJihoJiZnLnRyZWUuZXh0LmRuZC5fb25EcmFnRXZlbnQoXCJkcm9wXCIsZyxmLGIsYyxlKSxnLnRyZWUuZXh0LmRuZC5fb25EcmFnRXZlbnQoXCJsZWF2ZVwiLGcsZixiLGMsZSkpLGYmJmYudHJlZS5leHQuZG5kLl9vbkRyYWdFdmVudChcInN0b3BcIixmLG51bGwsYixjLGUpfX0pLGg9ITApfWZ1bmN0aW9uIGcoYil7dmFyIGM9Yi5vcHRpb25zLmRuZHx8bnVsbCxkPWIub3B0aW9ucy5nbHlwaHx8bnVsbDtjJiZmKCksYyYmYy5kcmFnU3RhcnQmJmIud2lkZ2V0LmVsZW1lbnQuZHJhZ2dhYmxlKGEuZXh0ZW5kKHthZGRDbGFzc2VzOiExLGFwcGVuZFRvOmIuJGNvbnRhaW5lcixjb250YWlubWVudDohMSxkZWxheTowLGRpc3RhbmNlOjQscmV2ZXJ0OiExLHNjcm9sbDohMCxzY3JvbGxTcGVlZDo3LHNjcm9sbFNlbnNpdGl2aXR5OjEwLGNvbm5lY3RUb0ZhbmN5dHJlZTohMCxoZWxwZXI6ZnVuY3Rpb24oYil7dmFyIGMsZSxmLGc9YS51aS5mYW5jeXRyZWUuZ2V0Tm9kZShiLnRhcmdldCk7cmV0dXJuIGc/KGY9Zy50cmVlLm9wdGlvbnMuZG5kLGU9YShnLnNwYW4pLGM9YShcIjxkaXYgY2xhc3M9J2ZhbmN5dHJlZS1kcmFnLWhlbHBlcic+PHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1kcmFnLWhlbHBlci1pbWcnIC8+PC9kaXY+XCIpLmNzcyh7ekluZGV4OjMscG9zaXRpb246XCJyZWxhdGl2ZVwifSkuYXBwZW5kKGUuZmluZChcInNwYW4uZmFuY3l0cmVlLXRpdGxlXCIpLmNsb25lKCkpLGMuZGF0YShcImZ0U291cmNlTm9kZVwiLGcpLGQmJmMuZmluZChcIi5mYW5jeXRyZWUtZHJhZy1oZWxwZXItaW1nXCIpLmFkZENsYXNzKGQubWFwLmRyYWdIZWxwZXIpLGYuaW5pdEhlbHBlciYmZi5pbml0SGVscGVyLmNhbGwoZy50cmVlLGcse25vZGU6Zyx0cmVlOmcudHJlZSxvcmlnaW5hbEV2ZW50OmIsdWk6e2hlbHBlcjpjfX0pLGMpOlwiPGRpdj5FUlJPUj86IGhlbHBlciByZXF1ZXN0ZWQgYnV0IHNvdXJjZU5vZGUgbm90IGZvdW5kPC9kaXY+XCJ9LHN0YXJ0OmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5oZWxwZXIuZGF0YShcImZ0U291cmNlTm9kZVwiKTtyZXR1cm4hIWN9fSxiLm9wdGlvbnMuZG5kLmRyYWdnYWJsZSkpLGMmJmMuZHJhZ0Ryb3AmJmIud2lkZ2V0LmVsZW1lbnQuZHJvcHBhYmxlKGEuZXh0ZW5kKHthZGRDbGFzc2VzOiExLHRvbGVyYW5jZTpcImludGVyc2VjdFwiLGdyZWVkeTohMX0sYi5vcHRpb25zLmRuZC5kcm9wcGFibGUpKX12YXIgaD0hMSxpPVwiZmFuY3l0cmVlLWRyb3AtYWNjZXB0XCIsaj1cImZhbmN5dHJlZS1kcm9wLWFmdGVyXCIsaz1cImZhbmN5dHJlZS1kcm9wLWJlZm9yZVwiLGw9XCJmYW5jeXRyZWUtZHJvcC1vdmVyXCIsbT1cImZhbmN5dHJlZS1kcm9wLXJlamVjdFwiLG49XCJmYW5jeXRyZWUtZHJvcC10YXJnZXRcIjthLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImRuZFwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOnthdXRvRXhwYW5kTVM6MWUzLGRyYWdnYWJsZTpudWxsLGRyb3BwYWJsZTpudWxsLGZvY3VzT25DbGljazohMSxwcmV2ZW50Vm9pZE1vdmVzOiEwLHByZXZlbnRSZWN1cnNpdmVNb3ZlczohMCxzbWFydFJldmVydDohMCxkcmFnU3RhcnQ6bnVsbCxkcmFnU3RvcDpudWxsLGluaXRIZWxwZXI6bnVsbCx1cGRhdGVIZWxwZXI6bnVsbCxkcmFnRW50ZXI6bnVsbCxkcmFnT3ZlcjpudWxsLGRyYWdFeHBhbmQ6bnVsbCxkcmFnRHJvcDpudWxsLGRyYWdMZWF2ZTpudWxsfSx0cmVlSW5pdDpmdW5jdGlvbihiKXt2YXIgYz1iLnRyZWU7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGMub3B0aW9ucy5kbmQuZHJhZ1N0YXJ0JiZjLiRjb250YWluZXIub24oXCJtb3VzZWRvd25cIixmdW5jdGlvbihjKXtpZihiLm9wdGlvbnMuZG5kLmZvY3VzT25DbGljayl7dmFyIGQ9YS51aS5mYW5jeXRyZWUuZ2V0Tm9kZShjKTtkJiZkLmRlYnVnKFwiUmUtZW5hYmxlIGZvY3VzIHRoYXQgd2FzIHByZXZlbnRlZCBieSBqUXVlcnkgVUkgZHJhZ2dhYmxlLlwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShjLnRhcmdldCkuY2xvc2VzdChcIjp0YWJiYWJsZVwiKS5mb2N1cygpfSwxMCl9fSksZyhjKX0sX3NldERuZFN0YXR1czpmdW5jdGlvbihiLGMsZCxmLGcpe3ZhciBoLG89XCJjZW50ZXJcIixwPXRoaXMuX2xvY2FsLHE9dGhpcy5vcHRpb25zLmdseXBofHxudWxsLHI9Yj9hKGIuc3Bhbik6bnVsbCxzPWEoYy5zcGFuKSx0PXMuZmluZChcIj5zcGFuLmZhbmN5dHJlZS10aXRsZVwiKTtpZihwLiRkcm9wTWFya2VyfHwocC4kZHJvcE1hcmtlcj1hKFwiPGRpdiBpZD0nZmFuY3l0cmVlLWRyb3AtbWFya2VyJz48L2Rpdj5cIikuaGlkZSgpLmNzcyh7XCJ6LWluZGV4XCI6MWUzfSkucHJlcGVuZFRvKGEodGhpcy4kZGl2KS5wYXJlbnQoKSkscSYmcC4kZHJvcE1hcmtlci5hZGRDbGFzcyhxLm1hcC5kcm9wTWFya2VyKSksXCJhZnRlclwiPT09Znx8XCJiZWZvcmVcIj09PWZ8fFwib3ZlclwiPT09Zil7c3dpdGNoKGg9LTI0LGYpe2Nhc2VcImJlZm9yZVwiOm89XCJ0b3BcIixoLT0xNjticmVhaztjYXNlXCJhZnRlclwiOm89XCJib3R0b21cIixoLT0xNn1wLiRkcm9wTWFya2VyLnRvZ2dsZUNsYXNzKGosXCJhZnRlclwiPT09ZikudG9nZ2xlQ2xhc3MobCxcIm92ZXJcIj09PWYpLnRvZ2dsZUNsYXNzKGssXCJiZWZvcmVcIj09PWYpLnNob3coKS5wb3NpdGlvbihhLnVpLmZhbmN5dHJlZS5maXhQb3NpdGlvbk9wdGlvbnMoe215OlwibGVmdFwiK2UoaCkrXCIgY2VudGVyXCIsYXQ6XCJsZWZ0IFwiK28sb2Y6dH0pKX1lbHNlIHAuJGRyb3BNYXJrZXIuaGlkZSgpO3ImJnIudG9nZ2xlQ2xhc3MoaSxnPT09ITApLnRvZ2dsZUNsYXNzKG0sZz09PSExKSxzLnRvZ2dsZUNsYXNzKG4sXCJhZnRlclwiPT09Znx8XCJiZWZvcmVcIj09PWZ8fFwib3ZlclwiPT09ZikudG9nZ2xlQ2xhc3MoaixcImFmdGVyXCI9PT1mKS50b2dnbGVDbGFzcyhrLFwiYmVmb3JlXCI9PT1mKS50b2dnbGVDbGFzcyhpLGc9PT0hMCkudG9nZ2xlQ2xhc3MobSxnPT09ITEpLGQudG9nZ2xlQ2xhc3MoaSxnPT09ITApLnRvZ2dsZUNsYXNzKG0sZz09PSExKX0sX29uRHJhZ0V2ZW50OmZ1bmN0aW9uKGIsZSxmLGcsaCxpKXt2YXIgaixrLGwsbSxuLG8scCxxLHIscz10aGlzLm9wdGlvbnMsdD1zLmRuZCx1PXRoaXMuX21ha2VIb29rQ29udGV4dChlLGcse290aGVyTm9kZTpmLHVpOmgsZHJhZ2dhYmxlOml9KSx2PW51bGwsdz10aGlzLHg9YShlLnNwYW4pO3N3aXRjaCh0LnNtYXJ0UmV2ZXJ0JiYoaS5vcHRpb25zLnJldmVydD1cImludmFsaWRcIiksYil7Y2FzZVwic3RhcnRcIjplLmlzU3RhdHVzTm9kZSgpP3Y9ITE6dC5kcmFnU3RhcnQmJih2PXQuZHJhZ1N0YXJ0KGUsdSkpLHY9PT0hMT8odGhpcy5kZWJ1ZyhcInRyZWUuZHJhZ1N0YXJ0KCkgY2FuY2VsbGVkXCIpLGguaGVscGVyLnRyaWdnZXIoXCJtb3VzZXVwXCIpLmhpZGUoKSk6KHQuc21hcnRSZXZlcnQmJihtPWVbdS50cmVlLm5vZGVDb250YWluZXJBdHRyTmFtZV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbD1hKGkub3B0aW9ucy5hcHBlbmRUbylbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQ9TWF0aC5tYXgoMCxtLmxlZnQtbC5sZWZ0KSxpLm9yaWdpbmFsUG9zaXRpb24udG9wPU1hdGgubWF4KDAsbS50b3AtbC50b3ApKSx4LmFkZENsYXNzKFwiZmFuY3l0cmVlLWRyYWctc291cmNlXCIpLGEoYykub24oXCJrZXlkb3duLmZhbmN5dHJlZS1kbmQsbW91c2Vkb3duLmZhbmN5dHJlZS1kbmRcIixmdW5jdGlvbihiKXtcImtleWRvd25cIj09PWIudHlwZSYmYi53aGljaD09PWEudWkua2V5Q29kZS5FU0NBUEU/dy5leHQuZG5kLl9jYW5jZWxEcmFnKCk6XCJtb3VzZWRvd25cIj09PWIudHlwZSYmdy5leHQuZG5kLl9jYW5jZWxEcmFnKCl9KSk7YnJlYWs7Y2FzZVwiZW50ZXJcIjpyPSghdC5wcmV2ZW50UmVjdXJzaXZlTW92ZXN8fCFlLmlzRGVzY2VuZGFudE9mKGYpKSYmKHQuZHJhZ0VudGVyP3QuZHJhZ0VudGVyKGUsdSk6bnVsbCksdj0hIXImJihhLmlzQXJyYXkocik/e292ZXI6YS5pbkFycmF5KFwib3ZlclwiLHIpPj0wLGJlZm9yZTphLmluQXJyYXkoXCJiZWZvcmVcIixyKT49MCxhZnRlcjphLmluQXJyYXkoXCJhZnRlclwiLHIpPj0wfTp7b3ZlcjpyPT09ITB8fFwib3ZlclwiPT09cixiZWZvcmU6cj09PSEwfHxcImJlZm9yZVwiPT09cixhZnRlcjpyPT09ITB8fFwiYWZ0ZXJcIj09PXJ9KSxoLmhlbHBlci5kYXRhKFwiZW50ZXJSZXNwb25zZVwiLHYpO2JyZWFrO2Nhc2VcIm92ZXJcIjpwPWguaGVscGVyLmRhdGEoXCJlbnRlclJlc3BvbnNlXCIpLHE9bnVsbCxwPT09ITF8fChcInN0cmluZ1wiPT10eXBlb2YgcD9xPXA6KGs9eC5vZmZzZXQoKSxuPXt4OmcucGFnZVgtay5sZWZ0LHk6Zy5wYWdlWS1rLnRvcH0sbz17eDpuLngveC53aWR0aCgpLHk6bi55L3guaGVpZ2h0KCl9LHAuYWZ0ZXImJm8ueT4uNzU/cT1cImFmdGVyXCI6IXAub3ZlciYmcC5hZnRlciYmby55Pi41P3E9XCJhZnRlclwiOnAuYmVmb3JlJiZvLnk8PS4yNT9xPVwiYmVmb3JlXCI6IXAub3ZlciYmcC5iZWZvcmUmJm8ueTw9LjU/cT1cImJlZm9yZVwiOnAub3ZlciYmKHE9XCJvdmVyXCIpLHQucHJldmVudFZvaWRNb3ZlcyYmKGU9PT1mPyh0aGlzLmRlYnVnKFwiICAgIGRyb3Agb3ZlciBzb3VyY2Ugbm9kZSBwcmV2ZW50ZWRcIikscT1udWxsKTpcImJlZm9yZVwiPT09cSYmZiYmZT09PWYuZ2V0TmV4dFNpYmxpbmcoKT8odGhpcy5kZWJ1ZyhcIiAgICBkcm9wIGFmdGVyIHNvdXJjZSBub2RlIHByZXZlbnRlZFwiKSxxPW51bGwpOlwiYWZ0ZXJcIj09PXEmJmYmJmU9PT1mLmdldFByZXZTaWJsaW5nKCk/KHRoaXMuZGVidWcoXCIgICAgZHJvcCBiZWZvcmUgc291cmNlIG5vZGUgcHJldmVudGVkXCIpLHE9bnVsbCk6XCJvdmVyXCI9PT1xJiZmJiZmLnBhcmVudD09PWUmJmYuaXNMYXN0U2libGluZygpJiYodGhpcy5kZWJ1ZyhcIiAgICBkcm9wIGxhc3QgY2hpbGQgb3ZlciBvd24gcGFyZW50IHByZXZlbnRlZFwiKSxxPW51bGwpKSxoLmhlbHBlci5kYXRhKFwiaGl0TW9kZVwiLHEpKSksXCJiZWZvcmVcIj09PXF8fFwiYWZ0ZXJcIj09PXF8fCF0LmF1dG9FeHBhbmRNU3x8ZS5oYXNDaGlsZHJlbigpPT09ITF8fGUuZXhwYW5kZWR8fHQuZHJhZ0V4cGFuZCYmdC5kcmFnRXhwYW5kKGUsdSk9PT0hMXx8ZS5zY2hlZHVsZUFjdGlvbihcImV4cGFuZFwiLHQuYXV0b0V4cGFuZE1TKSxxJiZ0LmRyYWdPdmVyJiYodS5oaXRNb2RlPXEsdj10LmRyYWdPdmVyKGUsdSkpLGo9diE9PSExJiZudWxsIT09cSx0LnNtYXJ0UmV2ZXJ0JiYoaS5vcHRpb25zLnJldmVydD0haiksdGhpcy5fbG9jYWwuX3NldERuZFN0YXR1cyhmLGUsaC5oZWxwZXIscSxqKTticmVhaztjYXNlXCJkcm9wXCI6cT1oLmhlbHBlci5kYXRhKFwiaGl0TW9kZVwiKSxxJiZ0LmRyYWdEcm9wJiYodS5oaXRNb2RlPXEsdC5kcmFnRHJvcChlLHUpKTticmVhaztjYXNlXCJsZWF2ZVwiOmUuc2NoZWR1bGVBY3Rpb24oXCJjYW5jZWxcIiksaC5oZWxwZXIuZGF0YShcImVudGVyUmVzcG9uc2VcIixudWxsKSxoLmhlbHBlci5kYXRhKFwiaGl0TW9kZVwiLG51bGwpLHRoaXMuX2xvY2FsLl9zZXREbmRTdGF0dXMoZixlLGguaGVscGVyLFwib3V0XCIsZCksdC5kcmFnTGVhdmUmJnQuZHJhZ0xlYXZlKGUsdSk7YnJlYWs7Y2FzZVwic3RvcFwiOngucmVtb3ZlQ2xhc3MoXCJmYW5jeXRyZWUtZHJhZy1zb3VyY2VcIiksYShjKS5vZmYoXCIuZmFuY3l0cmVlLWRuZFwiKSx0LmRyYWdTdG9wJiZ0LmRyYWdTdG9wKGUsdSk7YnJlYWs7ZGVmYXVsdDphLmVycm9yKFwiVW5zdXBwb3J0ZWQgZHJhZyBldmVudDogXCIrYil9cmV0dXJuIHZ9LF9jYW5jZWxEcmFnOmZ1bmN0aW9uKCl7dmFyIGI9YS51aS5kZG1hbmFnZXIuY3VycmVudDtiJiZiLmNhbmNlbCgpfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcblxuLyohIEV4dGVuc2lvbiAnanF1ZXJ5LmZhbmN5dHJlZS5lZGl0Lm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjt2YXIgZT0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSksZj1hLnVpLmZhbmN5dHJlZS5lc2NhcGVIdG1sLGc9YS51aS5mYW5jeXRyZWUudW5lc2NhcGVIdG1sO2EudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmVkaXRTdGFydD1mdW5jdGlvbigpe3ZhciBiLGQ9dGhpcyxlPXRoaXMudHJlZSxmPWUuZXh0LmVkaXQsaD1lLm9wdGlvbnMuZWRpdCxpPWEoXCIuZmFuY3l0cmVlLXRpdGxlXCIsZC5zcGFuKSxqPXtub2RlOmQsdHJlZTplLG9wdGlvbnM6ZS5vcHRpb25zLGlzTmV3OmEoZFtlLnN0YXR1c0NsYXNzUHJvcE5hbWVdKS5oYXNDbGFzcyhcImZhbmN5dHJlZS1lZGl0LW5ld1wiKSxvcmdUaXRsZTpkLnRpdGxlLGlucHV0Om51bGwsZGlydHk6ITF9O3JldHVybiBoLmJlZm9yZUVkaXQuY2FsbChkLHt0eXBlOlwiYmVmb3JlRWRpdFwifSxqKSE9PSExJiYoYS51aS5mYW5jeXRyZWUuYXNzZXJ0KCFmLmN1cnJlbnROb2RlLFwicmVjdXJzaXZlIGVkaXRcIiksZi5jdXJyZW50Tm9kZT10aGlzLGYuZXZlbnREYXRhPWosZS53aWRnZXQuX3VuYmluZCgpLGEoYykub24oXCJtb3VzZWRvd24uZmFuY3l0cmVlLWVkaXRcIixmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5oYXNDbGFzcyhcImZhbmN5dHJlZS1lZGl0LWlucHV0XCIpfHxkLmVkaXRFbmQoITAsYil9KSxiPWEoXCI8aW5wdXQgLz5cIix7XCJjbGFzc1wiOlwiZmFuY3l0cmVlLWVkaXQtaW5wdXRcIix0eXBlOlwidGV4dFwiLHZhbHVlOmUub3B0aW9ucy5lc2NhcGVUaXRsZXM/ai5vcmdUaXRsZTpnKGoub3JnVGl0bGUpfSksZi5ldmVudERhdGEuaW5wdXQ9YixudWxsIT1oLmFkanVzdFdpZHRoT2ZzJiZiLndpZHRoKGkud2lkdGgoKStoLmFkanVzdFdpZHRoT2ZzKSxudWxsIT1oLmlucHV0Q3NzJiZiLmNzcyhoLmlucHV0Q3NzKSxpLmh0bWwoYiksYi5mb2N1cygpLmNoYW5nZShmdW5jdGlvbihhKXtiLmFkZENsYXNzKFwiZmFuY3l0cmVlLWVkaXQtZGlydHlcIil9KS5rZXlkb3duKGZ1bmN0aW9uKGIpe3N3aXRjaChiLndoaWNoKXtjYXNlIGEudWkua2V5Q29kZS5FU0NBUEU6ZC5lZGl0RW5kKCExLGIpO2JyZWFrO2Nhc2UgYS51aS5rZXlDb2RlLkVOVEVSOnJldHVybiBkLmVkaXRFbmQoITAsYiksITF9Yi5zdG9wUHJvcGFnYXRpb24oKX0pLmJsdXIoZnVuY3Rpb24oYSl7cmV0dXJuIGQuZWRpdEVuZCghMCxhKX0pLHZvaWQgaC5lZGl0LmNhbGwoZCx7dHlwZTpcImVkaXRcIn0saikpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5lZGl0RW5kPWZ1bmN0aW9uKGIsZCl7dmFyIGUsZz10aGlzLGg9dGhpcy50cmVlLGk9aC5leHQuZWRpdCxqPWkuZXZlbnREYXRhLGs9aC5vcHRpb25zLmVkaXQsbD1hKFwiLmZhbmN5dHJlZS10aXRsZVwiLGcuc3BhbiksbT1sLmZpbmQoXCJpbnB1dC5mYW5jeXRyZWUtZWRpdC1pbnB1dFwiKTtyZXR1cm4gay50cmltJiZtLnZhbChhLnRyaW0obS52YWwoKSkpLGU9bS52YWwoKSxqLmRpcnR5PWUhPT1nLnRpdGxlLGoub3JpZ2luYWxFdmVudD1kLGI9PT0hMT9qLnNhdmU9ITE6ai5pc05ldz9qLnNhdmU9XCJcIiE9PWU6ai5zYXZlPWouZGlydHkmJlwiXCIhPT1lLGsuYmVmb3JlQ2xvc2UuY2FsbChnLHt0eXBlOlwiYmVmb3JlQ2xvc2VcIn0saikhPT0hMSYmKCghai5zYXZlfHxrLnNhdmUuY2FsbChnLHt0eXBlOlwic2F2ZVwifSxqKSE9PSExKSYmKG0ucmVtb3ZlQ2xhc3MoXCJmYW5jeXRyZWUtZWRpdC1kaXJ0eVwiKS51bmJpbmQoKSxhKGMpLm9mZihcIi5mYW5jeXRyZWUtZWRpdFwiKSxqLnNhdmU/KGcuc2V0VGl0bGUoaC5vcHRpb25zLmVzY2FwZVRpdGxlcz9lOmYoZSkpLGcuc2V0Rm9jdXMoKSk6ai5pc05ldz8oZy5yZW1vdmUoKSxnPWoubm9kZT1udWxsLGkucmVsYXRlZE5vZGUuc2V0Rm9jdXMoKSk6KGcucmVuZGVyVGl0bGUoKSxnLnNldEZvY3VzKCkpLGkuZXZlbnREYXRhPW51bGwsaS5jdXJyZW50Tm9kZT1udWxsLGkucmVsYXRlZE5vZGU9bnVsbCxoLndpZGdldC5fYmluZCgpLGEoaC4kY29udGFpbmVyKS5mb2N1cygpLGouaW5wdXQ9bnVsbCxrLmNsb3NlLmNhbGwoZyx7dHlwZTpcImNsb3NlXCJ9LGopLCEwKSl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmVkaXRDcmVhdGVOb2RlPWZ1bmN0aW9uKGIsYyl7dmFyIGQsZT10aGlzLnRyZWUsZj10aGlzO3JldHVybiBiPWJ8fFwiY2hpbGRcIixudWxsPT1jP2M9e3RpdGxlOlwiXCJ9Olwic3RyaW5nXCI9PXR5cGVvZiBjP2M9e3RpdGxlOmN9OmEudWkuZmFuY3l0cmVlLmFzc2VydChhLmlzUGxhaW5PYmplY3QoYykpLFwiY2hpbGRcIiE9PWJ8fHRoaXMuaXNFeHBhbmRlZCgpfHx0aGlzLmhhc0NoaWxkcmVuKCk9PT0hMT8oZD10aGlzLmFkZE5vZGUoYyxiKSxkLm1hdGNoPSEwLGEoZFtlLnN0YXR1c0NsYXNzUHJvcE5hbWVdKS5yZW1vdmVDbGFzcyhcImZhbmN5dHJlZS1oaWRlXCIpLmFkZENsYXNzKFwiZmFuY3l0cmVlLW1hdGNoXCIpLHZvaWQgZC5tYWtlVmlzaWJsZSgpLmRvbmUoZnVuY3Rpb24oKXthKGRbZS5zdGF0dXNDbGFzc1Byb3BOYW1lXSkuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZWRpdC1uZXdcIiksZi50cmVlLmV4dC5lZGl0LnJlbGF0ZWROb2RlPWYsZC5lZGl0U3RhcnQoKX0pKTp2b2lkIHRoaXMuc2V0RXhwYW5kZWQoKS5kb25lKGZ1bmN0aW9uKCl7Zi5lZGl0Q3JlYXRlTm9kZShiLGMpfSl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuaXNFZGl0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0LmVkaXQ/dGhpcy5leHQuZWRpdC5jdXJyZW50Tm9kZTpudWxsfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlTm9kZUNsYXNzLnByb3RvdHlwZS5pc0VkaXRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMudHJlZS5leHQuZWRpdCYmdGhpcy50cmVlLmV4dC5lZGl0LmN1cnJlbnROb2RlPT09dGhpc30sYS51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe25hbWU6XCJlZGl0XCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2FkanVzdFdpZHRoT2ZzOjQsYWxsb3dFbXB0eTohMSxpbnB1dENzczp7bWluV2lkdGg6XCIzZW1cIn0sdHJpZ2dlclN0YXJ0OltcImYyXCIsXCJzaGlmdCtjbGlja1wiLFwibWFjK2VudGVyXCJdLHRyaW06ITAsYmVmb3JlQ2xvc2U6YS5ub29wLGJlZm9yZUVkaXQ6YS5ub29wLGNsb3NlOmEubm9vcCxlZGl0OmEubm9vcCxzYXZlOmEubm9vcH0sY3VycmVudE5vZGU6bnVsbCx0cmVlSW5pdDpmdW5jdGlvbihhKXt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksdGhpcy4kY29udGFpbmVyLmFkZENsYXNzKFwiZmFuY3l0cmVlLWV4dC1lZGl0XCIpfSxub2RlQ2xpY2s6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5BcnJheShcInNoaWZ0K2NsaWNrXCIsYi5vcHRpb25zLmVkaXQudHJpZ2dlclN0YXJ0KT49MCYmYi5vcmlnaW5hbEV2ZW50LnNoaWZ0S2V5PyhiLm5vZGUuZWRpdFN0YXJ0KCksITEpOnRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX0sbm9kZURibGNsaWNrOmZ1bmN0aW9uKGIpe3JldHVybiBhLmluQXJyYXkoXCJkYmxjbGlja1wiLGIub3B0aW9ucy5lZGl0LnRyaWdnZXJTdGFydCk+PTA/KGIubm9kZS5lZGl0U3RhcnQoKSwhMSk6dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlS2V5ZG93bjpmdW5jdGlvbihiKXtzd2l0Y2goYi5vcmlnaW5hbEV2ZW50LndoaWNoKXtjYXNlIDExMzppZihhLmluQXJyYXkoXCJmMlwiLGIub3B0aW9ucy5lZGl0LnRyaWdnZXJTdGFydCk+PTApcmV0dXJuIGIubm9kZS5lZGl0U3RhcnQoKSwhMTticmVhaztjYXNlIGEudWkua2V5Q29kZS5FTlRFUjppZihhLmluQXJyYXkoXCJtYWMrZW50ZXJcIixiLm9wdGlvbnMuZWRpdC50cmlnZ2VyU3RhcnQpPj0wJiZlKXJldHVybiBiLm5vZGUuZWRpdFN0YXJ0KCksITF9cmV0dXJuIHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuZmlsdGVyLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGEpe3JldHVybihhK1wiXCIpLnJlcGxhY2UoLyhbLj8qK1xcXlxcJFxcW1xcXVxcXFwoKXt9fC1dKS9nLFwiXFxcXCQxXCIpfWZ1bmN0aW9uIGYoYil7cmV0dXJuIGIuaW5kZXhPZihcIj5cIik+PTA/YShcIjxkaXYvPlwiKS5odG1sKGIpLnRleHQoKTpifXZhciBnPVwiX19ub3RfZm91bmRfX1wiLGg9YS51aS5mYW5jeXRyZWUuZXNjYXBlSHRtbDthLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLl9hcHBseUZpbHRlckltcGw9ZnVuY3Rpb24oYixjLGQpe3ZhciBpLGosayxsLG09MCxuPXRoaXMub3B0aW9ucyxvPW4uZXNjYXBlVGl0bGVzLHA9bi5hdXRvQ29sbGFwc2UscT1hLmV4dGVuZCh7fSxuLmZpbHRlcixkKSxyPVwiaGlkZVwiPT09cS5tb2RlLHM9ISFxLmxlYXZlc09ubHkmJiFjO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoaT1xLmZ1enp5P2Iuc3BsaXQoXCJcIikucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGErXCJbXlwiK2IrXCJdKlwiK2J9KTplKGIpLGs9bmV3IFJlZ0V4cChcIi4qXCIraStcIi4qXCIsXCJpXCIpLGw9bmV3IFJlZ0V4cChlKGIpLFwiZ2lcIiksYj1mdW5jdGlvbihhKXt2YXIgYixjPW8/YS50aXRsZTpmKGEudGl0bGUpLGQ9ISFrLnRlc3QoYyk7cmV0dXJuIGQmJnEuaGlnaGxpZ2h0JiYoYj1vP2goYS50aXRsZSk6YyxhLnRpdGxlV2l0aEhpZ2hsaWdodD1iLnJlcGxhY2UobCxmdW5jdGlvbihhKXtyZXR1cm5cIjxtYXJrPlwiK2ErXCI8L21hcms+XCJ9KSksZH0pLHRoaXMuZW5hYmxlRmlsdGVyPSEwLHRoaXMubGFzdEZpbHRlckFyZ3M9YXJndW1lbnRzLHRoaXMuJGRpdi5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtZmlsdGVyXCIpLHI/dGhpcy4kZGl2LmFkZENsYXNzKFwiZmFuY3l0cmVlLWV4dC1maWx0ZXItaGlkZVwiKTp0aGlzLiRkaXYuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWZpbHRlci1kaW1tXCIpLHRoaXMuJGRpdi50b2dnbGVDbGFzcyhcImZhbmN5dHJlZS1leHQtZmlsdGVyLWhpZGUtZXhwYW5kZXJzXCIsISFxLmhpZGVFeHBhbmRlcnMpLHRoaXMudmlzaXQoZnVuY3Rpb24oYSl7ZGVsZXRlIGEubWF0Y2gsZGVsZXRlIGEudGl0bGVXaXRoSGlnaGxpZ2h0LGEuc3ViTWF0Y2hDb3VudD0wfSksaj10aGlzLmdldFJvb3ROb2RlKCkuX2ZpbmREaXJlY3RDaGlsZChnKSxqJiZqLnJlbW92ZSgpLG4uYXV0b0NvbGxhcHNlPSExLHRoaXMudmlzaXQoZnVuY3Rpb24oYSl7aWYoIXN8fG51bGw9PWEuY2hpbGRyZW4pe3ZhciBkPWIoYSksZT0hMTtpZihcInNraXBcIj09PWQpcmV0dXJuIGEudmlzaXQoZnVuY3Rpb24oYSl7YS5tYXRjaD0hMX0sITApLFwic2tpcFwiO2R8fCFjJiZcImJyYW5jaFwiIT09ZHx8IWEucGFyZW50Lm1hdGNofHwoZD0hMCxlPSEwKSxkJiYobSsrLGEubWF0Y2g9ITAsYS52aXNpdFBhcmVudHMoZnVuY3Rpb24oYSl7YS5zdWJNYXRjaENvdW50Kz0xLCFxLmF1dG9FeHBhbmR8fGV8fGEuZXhwYW5kZWR8fChhLnNldEV4cGFuZGVkKCEwLHtub0FuaW1hdGlvbjohMCxub0V2ZW50czohMCxzY3JvbGxJbnRvVmlldzohMX0pLGEuX2ZpbHRlckF1dG9FeHBhbmRlZD0hMCl9KSl9fSksbi5hdXRvQ29sbGFwc2U9cCwwPT09bSYmcS5ub2RhdGEmJnImJihqPXEubm9kYXRhLGEuaXNGdW5jdGlvbihqKSYmKGo9aigpKSxqPT09ITA/aj17fTpcInN0cmluZ1wiPT10eXBlb2YgaiYmKGo9e3RpdGxlOmp9KSxqPWEuZXh0ZW5kKHtzdGF0dXNOb2RlVHlwZTpcIm5vZGF0YVwiLGtleTpnLHRpdGxlOnRoaXMub3B0aW9ucy5zdHJpbmdzLm5vRGF0YX0saiksdGhpcy5nZXRSb290Tm9kZSgpLmFkZE5vZGUoaikubWF0Y2g9ITApLHRoaXMucmVuZGVyKCksbX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZUNsYXNzLnByb3RvdHlwZS5maWx0ZXJOb2Rlcz1mdW5jdGlvbihhLGIpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmKGI9e2xlYXZlc09ubHk6Yn0sdGhpcy53YXJuKFwiRmFuY3l0cmVlLmZpbHRlck5vZGVzKCkgbGVhdmVzT25seSBvcHRpb24gaXMgZGVwcmVjYXRlZCBzaW5jZSAyLjkuMCAvIDIwMTUtMDQtMTkuIFVzZSBvcHRzLmxlYXZlc09ubHkgaW5zdGVhZC5cIikpLHRoaXMuX2FwcGx5RmlsdGVySW1wbChhLCExLGIpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmFwcGx5RmlsdGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndhcm4oXCJGYW5jeXRyZWUuYXBwbHlGaWx0ZXIoKSBpcyBkZXByZWNhdGVkIHNpbmNlIDIuMS4wIC8gMjAxNC0wNS0yOS4gVXNlIC5maWx0ZXJOb2RlcygpIGluc3RlYWQuXCIpLHRoaXMuZmlsdGVyTm9kZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmZpbHRlckJyYW5jaGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX2FwcGx5RmlsdGVySW1wbChhLCEwLGIpfSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmNsZWFyRmlsdGVyPWZ1bmN0aW9uKCl7dmFyIGIsYz10aGlzLmdldFJvb3ROb2RlKCkuX2ZpbmREaXJlY3RDaGlsZChnKSxkPXRoaXMub3B0aW9ucy5lc2NhcGVUaXRsZXMsZT10aGlzLm9wdGlvbnMuZW5oYW5jZVRpdGxlO2MmJmMucmVtb3ZlKCksdGhpcy52aXNpdChmdW5jdGlvbihjKXtjLm1hdGNoJiYoYj1hKFwiPnNwYW4uZmFuY3l0cmVlLXRpdGxlXCIsYy5zcGFuKSxkP2IudGV4dChjLnRpdGxlKTpiLmh0bWwoYy50aXRsZSksZSYmZSh7dHlwZTpcImVuaGFuY2VUaXRsZVwifSx7bm9kZTpjLCR0aXRsZTpifSkpLGRlbGV0ZSBjLm1hdGNoLGRlbGV0ZSBjLnN1Yk1hdGNoQ291bnQsZGVsZXRlIGMudGl0bGVXaXRoSGlnaGxpZ2h0LGMuJHN1Yk1hdGNoQmFkZ2UmJihjLiRzdWJNYXRjaEJhZGdlLnJlbW92ZSgpLGRlbGV0ZSBjLiRzdWJNYXRjaEJhZGdlKSxjLl9maWx0ZXJBdXRvRXhwYW5kZWQmJmMuZXhwYW5kZWQmJmMuc2V0RXhwYW5kZWQoITEse25vQW5pbWF0aW9uOiEwLG5vRXZlbnRzOiEwLHNjcm9sbEludG9WaWV3OiExfSksZGVsZXRlIGMuX2ZpbHRlckF1dG9FeHBhbmRlZH0pLHRoaXMuZW5hYmxlRmlsdGVyPSExLHRoaXMubGFzdEZpbHRlckFyZ3M9bnVsbCx0aGlzLiRkaXYucmVtb3ZlQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWZpbHRlciBmYW5jeXRyZWUtZXh0LWZpbHRlci1kaW1tIGZhbmN5dHJlZS1leHQtZmlsdGVyLWhpZGVcIiksdGhpcy5yZW5kZXIoKX0sYS51aS5mYW5jeXRyZWUuX0ZhbmN5dHJlZUNsYXNzLnByb3RvdHlwZS5pc0ZpbHRlckFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5lbmFibGVGaWx0ZXJ9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVOb2RlQ2xhc3MucHJvdG90eXBlLmlzTWF0Y2hlZD1mdW5jdGlvbigpe3JldHVybiEodGhpcy50cmVlLmVuYWJsZUZpbHRlciYmIXRoaXMubWF0Y2gpfSxhLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImZpbHRlclwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOnthdXRvQXBwbHk6ITAsYXV0b0V4cGFuZDohMSxjb3VudGVyOiEwLGZ1enp5OiExLGhpZGVFeHBhbmRlZENvdW50ZXI6ITAsaGlkZUV4cGFuZGVyczohMSxoaWdobGlnaHQ6ITAsbGVhdmVzT25seTohMSxub2RhdGE6ITAsbW9kZTpcImRpbW1cIn0sbm9kZUxvYWRDaGlsZHJlbjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cykuZG9uZShmdW5jdGlvbigpe2EudHJlZS5lbmFibGVGaWx0ZXImJmEudHJlZS5sYXN0RmlsdGVyQXJncyYmYS5vcHRpb25zLmZpbHRlci5hdXRvQXBwbHkmJmEudHJlZS5fYXBwbHlGaWx0ZXJJbXBsLmFwcGx5KGEudHJlZSxhLnRyZWUubGFzdEZpbHRlckFyZ3MpfSl9LG5vZGVTZXRFeHBhbmRlZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGRlbGV0ZSBhLm5vZGUuX2ZpbHRlckF1dG9FeHBhbmRlZCwhYiYmYS5vcHRpb25zLmZpbHRlci5oaWRlRXhwYW5kZWRDb3VudGVyJiZhLm5vZGUuJHN1Yk1hdGNoQmFkZ2UmJmEubm9kZS4kc3ViTWF0Y2hCYWRnZS5zaG93KCksdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlUmVuZGVyU3RhdHVzOmZ1bmN0aW9uKGIpe3ZhciBjLGQ9Yi5ub2RlLGU9Yi50cmVlLGY9Yi5vcHRpb25zLmZpbHRlcixnPWEoXCJzcGFuLmZhbmN5dHJlZS10aXRsZVwiLGQuc3BhbiksaD1hKGRbZS5zdGF0dXNDbGFzc1Byb3BOYW1lXSksaT1iLm9wdGlvbnMuZW5oYW5jZVRpdGxlLGo9Yi5vcHRpb25zLmVzY2FwZVRpdGxlcztyZXR1cm4gYz10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksaC5sZW5ndGgmJmUuZW5hYmxlRmlsdGVyPyhoLnRvZ2dsZUNsYXNzKFwiZmFuY3l0cmVlLW1hdGNoXCIsISFkLm1hdGNoKS50b2dnbGVDbGFzcyhcImZhbmN5dHJlZS1zdWJtYXRjaFwiLCEhZC5zdWJNYXRjaENvdW50KS50b2dnbGVDbGFzcyhcImZhbmN5dHJlZS1oaWRlXCIsIShkLm1hdGNofHxkLnN1Yk1hdGNoQ291bnQpKSwhZi5jb3VudGVyfHwhZC5zdWJNYXRjaENvdW50fHxkLmlzRXhwYW5kZWQoKSYmZi5oaWRlRXhwYW5kZWRDb3VudGVyP2QuJHN1Yk1hdGNoQmFkZ2UmJmQuJHN1Yk1hdGNoQmFkZ2UuaGlkZSgpOihkLiRzdWJNYXRjaEJhZGdlfHwoZC4kc3ViTWF0Y2hCYWRnZT1hKFwiPHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1jaGlsZGNvdW50ZXInLz5cIiksYShcInNwYW4uZmFuY3l0cmVlLWljb24sIHNwYW4uZmFuY3l0cmVlLWN1c3RvbS1pY29uXCIsZC5zcGFuKS5hcHBlbmQoZC4kc3ViTWF0Y2hCYWRnZSkpLGQuJHN1Yk1hdGNoQmFkZ2Uuc2hvdygpLnRleHQoZC5zdWJNYXRjaENvdW50KSksZC5pc0VkaXRpbmcmJmQuaXNFZGl0aW5nLmNhbGwoZCl8fChkLnRpdGxlV2l0aEhpZ2hsaWdodD9nLmh0bWwoZC50aXRsZVdpdGhIaWdobGlnaHQpOmo/Zy50ZXh0KGQudGl0bGUpOmcuaHRtbChkLnRpdGxlKSxpJiZpKHt0eXBlOlwiZW5oYW5jZVRpdGxlXCJ9LHtub2RlOmQsJHRpdGxlOmd9KSksYyk6Y319KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUuZ2x5cGgubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYS5tYXBbYl19YS51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe25hbWU6XCJnbHlwaFwiLHZlcnNpb246XCIyLjIxLjBcIixvcHRpb25zOnttYXA6e2NoZWNrYm94OlwiaWNvbi1jaGVjay1lbXB0eVwiLGNoZWNrYm94U2VsZWN0ZWQ6XCJpY29uLWNoZWNrXCIsY2hlY2tib3hVbmtub3duOlwiaWNvbi1jaGVjayBpY29uLW11dGVkXCIsZXJyb3I6XCJpY29uLWV4Y2xhbWF0aW9uLXNpZ25cIixleHBhbmRlckNsb3NlZDpcImljb24tY2FyZXQtcmlnaHRcIixleHBhbmRlckxhenk6XCJpY29uLWFuZ2xlLXJpZ2h0XCIsZXhwYW5kZXJPcGVuOlwiaWNvbi1jYXJldC1kb3duXCIsbm9kYXRhOlwiaWNvbi1tZWhcIixub0V4cGFuZGVyOlwiXCIsZHJhZ0hlbHBlcjpcImljb24tY2FyZXQtcmlnaHRcIixkcm9wTWFya2VyOlwiaWNvbi1jYXJldC1yaWdodFwiLGRvYzpcImljb24tZmlsZS1hbHRcIixkb2NPcGVuOlwiaWNvbi1maWxlLWFsdFwiLGxvYWRpbmc6XCJpY29uLXJlZnJlc2ggaWNvbi1zcGluXCIsZm9sZGVyOlwiaWNvbi1mb2xkZXItY2xvc2UtYWx0XCIsZm9sZGVyT3BlbjpcImljb24tZm9sZGVyLW9wZW4tYWx0XCJ9fSx0cmVlSW5pdDpmdW5jdGlvbihhKXt2YXIgYj1hLnRyZWU7dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGIuJGNvbnRhaW5lci5hZGRDbGFzcyhcImZhbmN5dHJlZS1leHQtZ2x5cGhcIil9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGMsZCxmLGc9Yi5ub2RlLGg9YShnLnNwYW4pLGk9Yi5vcHRpb25zLmdseXBoLGo9aS5tYXA7cmV0dXJuIGQ9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGcuaXNSb290KCk/ZDooZj1oLmNoaWxkcmVuKFwic3Bhbi5mYW5jeXRyZWUtZXhwYW5kZXJcIikuZ2V0KDApLGYmJihjPWcuZXhwYW5kZWQmJmcuaGFzQ2hpbGRyZW4oKT9cImV4cGFuZGVyT3BlblwiOmcuaXNVbmRlZmluZWQoKT9cImV4cGFuZGVyTGF6eVwiOmcuaGFzQ2hpbGRyZW4oKT9cImV4cGFuZGVyQ2xvc2VkXCI6XCJub0V4cGFuZGVyXCIsZi5jbGFzc05hbWU9XCJmYW5jeXRyZWUtZXhwYW5kZXIgXCIraltjXSksZj1nLnRyP2EoXCJ0ZFwiLGcudHIpLmZpbmQoXCJzcGFuLmZhbmN5dHJlZS1jaGVja2JveFwiKS5nZXQoMCk6aC5jaGlsZHJlbihcInNwYW4uZmFuY3l0cmVlLWNoZWNrYm94XCIpLmdldCgwKSxmJiYoYz1nLnNlbGVjdGVkP1wiY2hlY2tib3hTZWxlY3RlZFwiOmcucGFydHNlbD9cImNoZWNrYm94VW5rbm93blwiOlwiY2hlY2tib3hcIixmLmNsYXNzTmFtZT1cImZhbmN5dHJlZS1jaGVja2JveCBcIitqW2NdKSxmPWguY2hpbGRyZW4oXCJzcGFuLmZhbmN5dHJlZS1pY29uXCIpLmdldCgwKSxmJiYoYz1nLnN0YXR1c05vZGVUeXBlP2UoaSxnLnN0YXR1c05vZGVUeXBlKTpnLmZvbGRlcj9nLmV4cGFuZGVkJiZnLmhhc0NoaWxkcmVuKCk/ZShpLFwiZm9sZGVyT3BlblwiKTplKGksXCJmb2xkZXJcIik6Zy5leHBhbmRlZD9lKGksXCJkb2NPcGVuXCIpOmUoaSxcImRvY1wiKSxmLmNsYXNzTmFtZT1cImZhbmN5dHJlZS1pY29uIFwiK2MpLGQpfSxub2RlU2V0U3RhdHVzOmZ1bmN0aW9uKGIsYyxkLGYpe3ZhciBnLGgsaT1iLm9wdGlvbnMuZ2x5cGgsaj1iLm5vZGU7cmV0dXJuIGc9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLFwiZXJyb3JcIiE9PWMmJlwibG9hZGluZ1wiIT09YyYmXCJub2RhdGFcIiE9PWN8fChqLnBhcmVudD8oaD1hKFwic3Bhbi5mYW5jeXRyZWUtZXhwYW5kZXJcIixqLnNwYW4pLmdldCgwKSxoJiYoaC5jbGFzc05hbWU9XCJmYW5jeXRyZWUtZXhwYW5kZXIgXCIrZShpLGMpKSk6KGg9YShcIi5mYW5jeXRyZWUtc3RhdHVzbm9kZS1cIitjLGpbdGhpcy5ub2RlQ29udGFpbmVyQXR0ck5hbWVdKS5maW5kKFwic3Bhbi5mYW5jeXRyZWUtaWNvblwiKS5nZXQoMCksaCYmKGguY2xhc3NOYW1lPVwiZmFuY3l0cmVlLWljb24gXCIrZShpLGMpKSkpLGd9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLmdyaWRuYXYubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYixjKXt2YXIgZCxlPWMuZ2V0KDApLGY9MDtyZXR1cm4gYi5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PWUmJihkPWEodGhpcykucHJvcChcImNvbHNwYW5cIiksdm9pZChmKz1kP2Q6MSkpfSksZn1mdW5jdGlvbiBmKGIsYyl7dmFyIGQsZT1udWxsLGY9MDtyZXR1cm4gYi5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXtyZXR1cm4gZj49Yz8oZT1hKHRoaXMpLCExKTooZD1hKHRoaXMpLnByb3AoXCJjb2xzcGFuXCIpLHZvaWQoZis9ZD9kOjEpKX0pLGV9ZnVuY3Rpb24gZyhhLGIpe3ZhciBjLGQsZz1hLmNsb3Nlc3QoXCJ0ZFwiKSxpPW51bGw7c3dpdGNoKGIpe2Nhc2UgaC5MRUZUOmk9Zy5wcmV2KCk7YnJlYWs7Y2FzZSBoLlJJR0hUOmk9Zy5uZXh0KCk7YnJlYWs7Y2FzZSBoLlVQOmNhc2UgaC5ET1dOOmZvcihjPWcucGFyZW50KCksZD1lKGMsZyk7Oyl7aWYoYz1iPT09aC5VUD9jLnByZXYoKTpjLm5leHQoKSwhYy5sZW5ndGgpYnJlYWs7aWYoIWMuaXMoXCI6aGlkZGVuXCIpJiYoaT1mKGMsZCksaSYmaS5maW5kKFwiOmlucHV0LGFcIikubGVuZ3RoKSlicmVha319cmV0dXJuIGl9dmFyIGg9YS51aS5rZXlDb2RlLGk9e3RleHQ6W2guVVAsaC5ET1dOXSxjaGVja2JveDpbaC5VUCxoLkRPV04saC5MRUZULGguUklHSFRdLGxpbms6W2guVVAsaC5ET1dOLGguTEVGVCxoLlJJR0hUXSxyYWRpb2J1dHRvbjpbaC5VUCxoLkRPV04saC5MRUZULGguUklHSFRdLFwic2VsZWN0LW9uZVwiOltoLkxFRlQsaC5SSUdIVF0sXCJzZWxlY3QtbXVsdGlwbGVcIjpbaC5MRUZULGguUklHSFRdfTthLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcImdyaWRuYXZcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7YXV0b2ZvY3VzSW5wdXQ6ITEsaGFuZGxlQ3Vyc29yS2V5czohMH0sdHJlZUluaXQ6ZnVuY3Rpb24oYil7dGhpcy5fcmVxdWlyZUV4dGVuc2lvbihcInRhYmxlXCIsITAsITApLHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSx0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LWdyaWRuYXZcIiksdGhpcy4kY29udGFpbmVyLm9uKFwiZm9jdXNpblwiLGZ1bmN0aW9uKGMpe3ZhciBkLGU9YS51aS5mYW5jeXRyZWUuZ2V0Tm9kZShjLnRhcmdldCk7ZSYmIWUuaXNBY3RpdmUoKSYmKGQ9Yi50cmVlLl9tYWtlSG9va0NvbnRleHQoZSxjKSxiLnRyZWUuX2NhbGxIb29rKFwibm9kZVNldEFjdGl2ZVwiLGQsITApKX0pfSxub2RlU2V0QWN0aXZlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZT1iLm9wdGlvbnMuZ3JpZG5hdixmPWIubm9kZSxnPWIub3JpZ2luYWxFdmVudHx8e30saD1hKGcudGFyZ2V0KS5pcyhcIjppbnB1dFwiKTtjPWMhPT0hMSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksYyYmKGIub3B0aW9ucy50aXRsZXNUYWJiYWJsZT8oaHx8KGEoZi5zcGFuKS5maW5kKFwic3Bhbi5mYW5jeXRyZWUtdGl0bGVcIikuZm9jdXMoKSxmLnNldEZvY3VzKCkpLGIudHJlZS4kY29udGFpbmVyLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikpOmUuYXV0b2ZvY3VzSW5wdXQmJiFoJiYoZD1hKGYudHJ8fGYuc3BhbiksZC5maW5kKFwiOmlucHV0OmVuYWJsZWQ6Zmlyc3RcIikuZm9jdXMoKSkpfSxub2RlS2V5ZG93bjpmdW5jdGlvbihiKXt2YXIgYyxkLGUsZj1iLm9wdGlvbnMuZ3JpZG5hdixoPWIub3JpZ2luYWxFdmVudCxqPWEoaC50YXJnZXQpO3JldHVybiBqLmlzKFwiOmlucHV0OmVuYWJsZWRcIik/Yz1qLnByb3AoXCJ0eXBlXCIpOmouaXMoXCJhXCIpJiYoYz1cImxpbmtcIiksYyYmZi5oYW5kbGVDdXJzb3JLZXlzPyhkPWlbY10sIShkJiZhLmluQXJyYXkoaC53aGljaCxkKT49MCYmKGU9ZyhqLGgud2hpY2gpLGUmJmUubGVuZ3RoKSl8fChlLmZpbmQoXCI6aW5wdXQ6ZW5hYmxlZCxhXCIpLmZvY3VzKCksITEpKTp0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLnBlcnNpc3QubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYixjLGQsZixnKXt2YXIgaCxpLGosbCxtPSExLG49W10sbz1bXTtmb3IoZD1kfHxbXSxnPWd8fGEuRGVmZXJyZWQoKSxoPTAsaj1kLmxlbmd0aDtoPGo7aCsrKWk9ZFtoXSxsPWIuZ2V0Tm9kZUJ5S2V5KGkpLGw/ZiYmbC5pc1VuZGVmaW5lZCgpPyhtPSEwLGIuZGVidWcoXCJfbG9hZExhenlOb2RlczogXCIrbCtcIiBpcyBsYXp5OiBsb2FkaW5nLi4uXCIpLFwiZXhwYW5kXCI9PT1mP24ucHVzaChsLnNldEV4cGFuZGVkKCkpOm4ucHVzaChsLmxvYWQoKSkpOihiLmRlYnVnKFwiX2xvYWRMYXp5Tm9kZXM6IFwiK2wrXCIgYWxyZWFkeSBsb2FkZWQuXCIpLGwuc2V0RXhwYW5kZWQoKSk6KG8ucHVzaChpKSxiLmRlYnVnKFwiX2xvYWRMYXp5Tm9kZXM6IFwiK2wrXCIgd2FzIG5vdCB5ZXQgZm91bmQuXCIpKTtyZXR1cm4gYS53aGVuLmFwcGx5KGEsbikuYWx3YXlzKGZ1bmN0aW9uKCl7aWYobSYmby5sZW5ndGg+MCllKGIsYyxvLGYsZyk7ZWxzZXtpZihvLmxlbmd0aClmb3IoYi53YXJuKFwiX2xvYWRMYXp5Tm9kZXM6IGNvdWxkIG5vdCBsb2FkIHRob3NlIGtleXM6IFwiLG8pLGg9MCxqPW8ubGVuZ3RoO2g8ajtoKyspaT1kW2hdLGMuX2FwcGVuZEtleShrLGRbaF0sITEpO2cucmVzb2x2ZSgpfX0pLGd9dmFyIGYsZyxoLGk9YS51aS5mYW5jeXRyZWUuYXNzZXJ0LGo9XCJhY3RpdmVcIixrPVwiZXhwYW5kZWRcIixsPVwiZm9jdXNcIixtPVwic2VsZWN0ZWRcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBDb29raWVzPyhoPUNvb2tpZXMuc2V0LGY9Q29va2llcy5nZXQsZz1Db29raWVzLnJlbW92ZSk6KGg9Zj1hLmNvb2tpZSxnPWEucmVtb3ZlQ29va2llKSxhLnVpLmZhbmN5dHJlZS5fRmFuY3l0cmVlQ2xhc3MucHJvdG90eXBlLmNsZWFyQ29va2llcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmV4dC5wZXJzaXN0LGM9Yi5jb29raWVQcmVmaXg7YT1hfHxcImFjdGl2ZSBleHBhbmRlZCBmb2N1cyBzZWxlY3RlZFwiLGEuaW5kZXhPZihqKT49MCYmYi5fZGF0YShjK2osbnVsbCksYS5pbmRleE9mKGspPj0wJiZiLl9kYXRhKGMrayxudWxsKSxhLmluZGV4T2YobCk+PTAmJmIuX2RhdGEoYytsLG51bGwpLGEuaW5kZXhPZihtKT49MCYmYi5fZGF0YShjK20sbnVsbCl9LGEudWkuZmFuY3l0cmVlLl9GYW5jeXRyZWVDbGFzcy5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGE9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dC5wZXJzaXN0LGI9YS5jb29raWVQcmVmaXgsYz1hLmNvb2tpZURlbGltaXRlcixkPXt9O3JldHVybiBkW2pdPWEuX2RhdGEoYitqKSxkW2tdPShhLl9kYXRhKGIrayl8fFwiXCIpLnNwbGl0KGMpLGRbbV09KGEuX2RhdGEoYittKXx8XCJcIikuc3BsaXQoYyksZFtsXT1hLl9kYXRhKGIrbCksZH0sYS51aS5mYW5jeXRyZWUucmVnaXN0ZXJFeHRlbnNpb24oe25hbWU6XCJwZXJzaXN0XCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2Nvb2tpZURlbGltaXRlcjpcIn5cIixjb29raWVQcmVmaXg6ZCxjb29raWU6e3JhdzohMSxleHBpcmVzOlwiXCIscGF0aDpcIlwiLGRvbWFpbjpcIlwiLHNlY3VyZTohMX0sZXhwYW5kTGF6eTohMSxmaXJlQWN0aXZhdGU6ITAsb3ZlcnJpZGVTb3VyY2U6ITAsc3RvcmU6XCJhdXRvXCIsdHlwZXM6XCJhY3RpdmUgZXhwYW5kZWQgZm9jdXMgc2VsZWN0ZWRcIn0sX2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9sb2NhbC5sb2NhbFN0b3JhZ2U7cmV0dXJuIGI9PT1kP2M/Yy5nZXRJdGVtKGEpOmYoYSk6dm9pZChudWxsPT09Yj9jP2MucmVtb3ZlSXRlbShhKTpnKGEpOmM/Yy5zZXRJdGVtKGEsYik6aChhLGIsdGhpcy5vcHRpb25zLnBlcnNpc3QuY29va2llKSl9LF9hcHBlbmRLZXk6ZnVuY3Rpb24oYixjLGQpe2M9XCJcIitjO3ZhciBlPXRoaXMuX2xvY2FsLGY9dGhpcy5vcHRpb25zLnBlcnNpc3QsZz1mLmNvb2tpZURlbGltaXRlcixoPWUuY29va2llUHJlZml4K2IsaT1lLl9kYXRhKGgpLGo9aT9pLnNwbGl0KGcpOltdLGs9YS5pbkFycmF5KGMsaik7az49MCYmai5zcGxpY2UoaywxKSxkJiZqLnB1c2goYyksZS5fZGF0YShoLGouam9pbihnKSl9LHRyZWVJbml0OmZ1bmN0aW9uKGMpe3ZhciBnPWMudHJlZSxoPWMub3B0aW9ucyxuPXRoaXMuX2xvY2FsLG89dGhpcy5vcHRpb25zLnBlcnNpc3Q7cmV0dXJuIGkoXCJhdXRvXCIhPT1vLnN0b3JlJiZcImNvb2tpZVwiIT09by5zdG9yZXx8ZixcIk1pc3NpbmcgcmVxdWlyZWQgcGx1Z2luIGZvciAncGVyc2lzdCcgZXh0ZW5zaW9uOiBqcy5jb29raWUuanMgb3IganF1ZXJ5LmNvb2tpZS5qc1wiKSxuLmNvb2tpZVByZWZpeD1vLmNvb2tpZVByZWZpeHx8XCJmYW5jeXRyZWUtXCIrZy5faWQrXCItXCIsbi5zdG9yZUFjdGl2ZT1vLnR5cGVzLmluZGV4T2Yoaik+PTAsbi5zdG9yZUV4cGFuZGVkPW8udHlwZXMuaW5kZXhPZihrKT49MCxuLnN0b3JlU2VsZWN0ZWQ9by50eXBlcy5pbmRleE9mKG0pPj0wLG4uc3RvcmVGb2N1cz1vLnR5cGVzLmluZGV4T2YobCk+PTAsXCJjb29raWVcIiE9PW8uc3RvcmUmJmIubG9jYWxTdG9yYWdlP24ubG9jYWxTdG9yYWdlPVwibG9jYWxcIj09PW8uc3RvcmU/Yi5sb2NhbFN0b3JhZ2U6Yi5zZXNzaW9uU3RvcmFnZTpuLmxvY2FsU3RvcmFnZT1udWxsLGcuJGRpdi5iaW5kKFwiZmFuY3l0cmVlaW5pdFwiLGZ1bmN0aW9uKGIpe2lmKGcuX3RyaWdnZXJUcmVlRXZlbnQoXCJiZWZvcmVSZXN0b3JlXCIsbnVsbCx7fSkhPT0hMSl7dmFyIGMsZixpLHAscSxyPW4uX2RhdGEobi5jb29raWVQcmVmaXgrbCkscz1vLmZpcmVBY3RpdmF0ZT09PSExO2M9bi5fZGF0YShuLmNvb2tpZVByZWZpeCtrKSxwPWMmJmMuc3BsaXQoby5jb29raWVEZWxpbWl0ZXIpLGY9bi5zdG9yZUV4cGFuZGVkP2UoZyxuLHAsISFvLmV4cGFuZExhenkmJlwiZXhwYW5kXCIsbnVsbCk6KG5ldyBhLkRlZmVycmVkKS5yZXNvbHZlKCksZi5kb25lKGZ1bmN0aW9uKCl7aWYobi5zdG9yZVNlbGVjdGVkKXtpZihjPW4uX2RhdGEobi5jb29raWVQcmVmaXgrbSkpZm9yKHA9Yy5zcGxpdChvLmNvb2tpZURlbGltaXRlciksaT0wO2k8cC5sZW5ndGg7aSsrKXE9Zy5nZXROb2RlQnlLZXkocFtpXSkscT8ocS5zZWxlY3RlZD09PWR8fG8ub3ZlcnJpZGVTb3VyY2UmJnEuc2VsZWN0ZWQ9PT0hMSkmJihxLnNlbGVjdGVkPSEwLHEucmVuZGVyU3RhdHVzKCkpOm4uX2FwcGVuZEtleShtLHBbaV0sITEpOzM9PT1nLm9wdGlvbnMuc2VsZWN0TW9kZSYmZy52aXNpdChmdW5jdGlvbihhKXtpZihhLnNlbGVjdGVkKXJldHVybiBhLmZpeFNlbGVjdGlvbjNBZnRlckNsaWNrKCksXCJza2lwXCJ9KX1uLnN0b3JlQWN0aXZlJiYoYz1uLl9kYXRhKG4uY29va2llUHJlZml4K2opLCFjfHwhaC5wZXJzaXN0Lm92ZXJyaWRlU291cmNlJiZnLmFjdGl2ZU5vZGV8fChxPWcuZ2V0Tm9kZUJ5S2V5KGMpLHEmJihxLmRlYnVnKFwicGVyc2lzdDogc2V0IGFjdGl2ZVwiLGMpLHEuc2V0QWN0aXZlKCEwLHtub0ZvY3VzOiEwLG5vRXZlbnRzOnN9KSkpKSxuLnN0b3JlRm9jdXMmJnImJihxPWcuZ2V0Tm9kZUJ5S2V5KHIpLHEmJihnLm9wdGlvbnMudGl0bGVzVGFiYmFibGU/YShxLnNwYW4pLmZpbmQoXCIuZmFuY3l0cmVlLXRpdGxlXCIpLmZvY3VzKCk6YShnLiRjb250YWluZXIpLmZvY3VzKCkpKSxnLl90cmlnZ2VyVHJlZUV2ZW50KFwicmVzdG9yZVwiLG51bGwse30pfSl9fSksdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlU2V0QWN0aXZlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuX2xvY2FsO3JldHVybiBiPWIhPT0hMSxkPXRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxlLnN0b3JlQWN0aXZlJiZlLl9kYXRhKGUuY29va2llUHJlZml4K2osdGhpcy5hY3RpdmVOb2RlP3RoaXMuYWN0aXZlTm9kZS5rZXk6bnVsbCksZH0sbm9kZVNldEV4cGFuZGVkOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWEubm9kZSxmPXRoaXMuX2xvY2FsO3JldHVybiBiPWIhPT0hMSxkPXRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxmLnN0b3JlRXhwYW5kZWQmJmYuX2FwcGVuZEtleShrLGUua2V5LGIpLGR9LG5vZGVTZXRGb2N1czpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5fbG9jYWw7cmV0dXJuIGI9YiE9PSExLGM9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGQuc3RvcmVGb2N1cyYmZC5fZGF0YShkLmNvb2tpZVByZWZpeCtsLHRoaXMuZm9jdXNOb2RlP3RoaXMuZm9jdXNOb2RlLmtleTpudWxsKSxjfSxub2RlU2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGY9Yi50cmVlLGc9Yi5ub2RlLGg9dGhpcy5fbG9jYWw7cmV0dXJuIGM9YyE9PSExLGQ9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGguc3RvcmVTZWxlY3RlZCYmKDM9PT1mLm9wdGlvbnMuc2VsZWN0TW9kZT8oZT1hLm1hcChmLmdldFNlbGVjdGVkTm9kZXMoITApLGZ1bmN0aW9uKGEpe3JldHVybiBhLmtleX0pLGU9ZS5qb2luKGIub3B0aW9ucy5wZXJzaXN0LmNvb2tpZURlbGltaXRlciksaC5fZGF0YShoLmNvb2tpZVByZWZpeCttLGUpKTpoLl9hcHBlbmRLZXkobSxnLmtleSxnLnNlbGVjdGVkKSksZH19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XG5cbi8qISBFeHRlbnNpb24gJ2pxdWVyeS5mYW5jeXRyZWUudGFibGUubWluLmpzJyAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUoYixjKXtjPWN8fFwiXCIsYnx8YS5lcnJvcihcIkFzc2VydGlvbiBmYWlsZWQgXCIrYyl9ZnVuY3Rpb24gZihhLGIpe2EuaW5zZXJ0QmVmb3JlKGIsYS5maXJzdENoaWxkKX1mdW5jdGlvbiBnKGEsYil7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLGEubmV4dFNpYmxpbmcpfWZ1bmN0aW9uIGgoYSxiKXthLnZpc2l0KGZ1bmN0aW9uKGEpe3ZhciBjPWEudHI7aWYoYyYmKGMuc3R5bGUuZGlzcGxheT1hLmhpZGV8fCFiP1wibm9uZVwiOlwiXCIpLCFhLmV4cGFuZGVkKXJldHVyblwic2tpcFwifSl9ZnVuY3Rpb24gaShiKXt2YXIgYyxkLGYsZz1iLnBhcmVudCxoPWc/Zy5jaGlsZHJlbjpudWxsO2lmKGgmJmgubGVuZ3RoPjEmJmhbMF0hPT1iKWZvcihjPWEuaW5BcnJheShiLGgpLGY9aFtjLTFdLGUoZi50cik7Zi5jaGlsZHJlbiYmKGQ9Zi5jaGlsZHJlbltmLmNoaWxkcmVuLmxlbmd0aC0xXSxkLnRyKTspZj1kO2Vsc2UgZj1nO3JldHVybiBmfWEudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtuYW1lOlwidGFibGVcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7Y2hlY2tib3hDb2x1bW5JZHg6bnVsbCxpbmRlbnRhdGlvbjoxNixub2RlQ29sdW1uSWR4OjB9LHRyZWVJbml0OmZ1bmN0aW9uKGIpe3ZhciBkLGYsZyxoLGksaj1iLnRyZWUsaz1iLm9wdGlvbnMsbD1rLnRhYmxlLG09ai53aWRnZXQuZWxlbWVudDtpZihudWxsIT1sLmN1c3RvbVN0YXR1cyYmKG51bGwhPWsucmVuZGVyU3RhdHVzQ29sdW1ucz9hLmVycm9yKFwiVGhlICdjdXN0b21TdGF0dXMnIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE1LjAuIFVzZSAncmVuZGVyU3RhdHVzQ29sdW1ucycgb25seSBpbnN0ZWFkLlwiKTooai53YXJuKFwiVGhlICdjdXN0b21TdGF0dXMnIG9wdGlvbiBpcyBkZXByZWNhdGVkIHNpbmNlIHYyLjE1LjAuIFVzZSAncmVuZGVyU3RhdHVzQ29sdW1ucycgaW5zdGVhZC5cIiksay5yZW5kZXJTdGF0dXNDb2x1bW5zPWwuY3VzdG9tU3RhdHVzKSksay5yZW5kZXJTdGF0dXNDb2x1bW5zJiZrLnJlbmRlclN0YXR1c0NvbHVtbnM9PT0hMCYmKGsucmVuZGVyU3RhdHVzQ29sdW1ucz1rLnJlbmRlckNvbHVtbnMpLG0uYWRkQ2xhc3MoXCJmYW5jeXRyZWUtY29udGFpbmVyIGZhbmN5dHJlZS1leHQtdGFibGVcIiksai50Ym9keT1tLmZpbmQoXCI+dGJvZHlcIilbMF0saT1hKGoudGJvZHkpLGY9YShcInRoZWFkID50cjpsYXN0ID50aFwiLG0pLmxlbmd0aCxoPWkuY2hpbGRyZW4oXCJ0cjpmaXJzdFwiKSxoLmxlbmd0aClnPWguY2hpbGRyZW4oXCJ0ZFwiKS5sZW5ndGgsZiYmZyE9PWYmJihqLndhcm4oXCJDb2x1bW4gY291bnQgbWlzbWF0Y2ggYmV0d2VlbiB0aGVhZCAoXCIrZitcIikgYW5kIHRib2R5IChcIitnK1wiKTogdXNpbmcgdGJvZHkuXCIpLGY9ZyksaD1oLmNsb25lKCk7ZWxzZSBmb3IoZShmPj0xLFwiTmVlZCBlaXRoZXIgPHRoZWFkPiBvciA8dGJvZHk+IHdpdGggPHRkPiBlbGVtZW50cyB0byBkZXRlcm1pbmUgY29sdW1uIGNvdW50LlwiKSxoPWEoXCI8dHIgLz5cIiksZD0wO2Q8ZjtkKyspaC5hcHBlbmQoXCI8dGQgLz5cIik7aC5maW5kKFwiPnRkXCIpLmVxKGwubm9kZUNvbHVtbklkeCkuaHRtbChcIjxzcGFuIGNsYXNzPSdmYW5jeXRyZWUtbm9kZScgLz5cIiksay5hcmlhJiYoaC5hdHRyKFwicm9sZVwiLFwicm93XCIpLGguZmluZChcInRkXCIpLmF0dHIoXCJyb2xlXCIsXCJncmlkY2VsbFwiKSksai5yb3dGcmFnbWVudD1jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxqLnJvd0ZyYWdtZW50LmFwcGVuZENoaWxkKGguZ2V0KDApKSxpLmVtcHR5KCksai5zdGF0dXNDbGFzc1Byb3BOYW1lPVwidHJcIixqLmFyaWFQcm9wTmFtZT1cInRyXCIsdGhpcy5ub2RlQ29udGFpbmVyQXR0ck5hbWU9XCJ0clwiLGouJGNvbnRhaW5lcj1tLHRoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxhKGoucm9vdE5vZGUudWwpLnJlbW92ZSgpLGoucm9vdE5vZGUudWw9bnVsbCx0aGlzLiRjb250YWluZXIuYXR0cihcInRhYmluZGV4XCIsay50YWJpbmRleCksay5hcmlhJiZqLiRjb250YWluZXIuYXR0cihcInJvbGVcIixcInRyZWVncmlkXCIpLmF0dHIoXCJhcmlhLXJlYWRvbmx5XCIsITApfSxub2RlUmVtb3ZlQ2hpbGRNYXJrdXA6ZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlO2MudmlzaXQoZnVuY3Rpb24oYil7Yi50ciYmKGEoYi50cikucmVtb3ZlKCksYi50cj1udWxsKX0pfSxub2RlUmVtb3ZlTWFya3VwOmZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZTtjLnRyJiYoYShjLnRyKS5yZW1vdmUoKSxjLnRyPW51bGwpLHRoaXMubm9kZVJlbW92ZUNoaWxkTWFya3VwKGIpfSxub2RlUmVuZGVyOmZ1bmN0aW9uKGIsYyxkLGosayl7dmFyIGwsbSxuLG8scCxxLHIscyx0PWIudHJlZSx1PWIubm9kZSx2PWIub3B0aW9ucyx3PSF1LnBhcmVudDtpZih0Ll9lbmFibGVVcGRhdGUhPT0hMSl7aWYoa3x8KGIuaGFzQ29sbGFwc2VkUGFyZW50cz11LnBhcmVudCYmIXUucGFyZW50LmV4cGFuZGVkKSwhdylpZih1LnRyJiZjJiZ0aGlzLm5vZGVSZW1vdmVNYXJrdXAoYiksdS50ciljP3RoaXMubm9kZVJlbmRlclRpdGxlKGIpOnRoaXMubm9kZVJlbmRlclN0YXR1cyhiKTtlbHNle2lmKGIuaGFzQ29sbGFwc2VkUGFyZW50cyYmIWQpcmV0dXJuIHZvaWQgdS5kZWJ1ZyhcIm5vZGVSZW5kZXIgaWdub3JlZCBkdWUgdG8gdW5yZW5kZXJlZCBwYXJlbnRcIik7cD10LnJvd0ZyYWdtZW50LmZpcnN0Q2hpbGQuY2xvbmVOb2RlKCEwKSxxPWkodSksZShxKSxqPT09ITAmJms/cC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiOmQmJmIuaGFzQ29sbGFwc2VkUGFyZW50cyYmKHAuc3R5bGUuZGlzcGxheT1cIm5vbmVcIikscS50cj9nKHEudHIscCk6KGUoIXEucGFyZW50LFwicHJldi4gcm93IG11c3QgaGF2ZSBhIHRyLCBvciBiZSBzeXN0ZW0gcm9vdFwiKSxmKHQudGJvZHkscCkpLHUudHI9cCx1LmtleSYmdi5nZW5lcmF0ZUlkcyYmKHUudHIuaWQ9di5pZFByZWZpeCt1LmtleSksdS50ci5mdG5vZGU9dSx2LmFyaWEmJmEodS50cikuYXR0cihcImFyaWEtbGFiZWxsZWRieVwiLFwiZnRhbF9cIit1LmtleSksdS5zcGFuPWEoXCJzcGFuLmZhbmN5dHJlZS1ub2RlXCIsdS50cikuZ2V0KDApLHRoaXMubm9kZVJlbmRlclRpdGxlKGIpLHYuY3JlYXRlTm9kZSYmdi5jcmVhdGVOb2RlLmNhbGwodCx7dHlwZTpcImNyZWF0ZU5vZGVcIn0sYil9aWYodi5yZW5kZXJOb2RlJiZ2LnJlbmRlck5vZGUuY2FsbCh0LHt0eXBlOlwicmVuZGVyTm9kZVwifSxiKSxsPXUuY2hpbGRyZW4sbCYmKHd8fGR8fHUuZXhwYW5kZWQpKWZvcihuPTAsbz1sLmxlbmd0aDtuPG87bisrKXM9YS5leHRlbmQoe30sYix7bm9kZTpsW25dfSkscy5oYXNDb2xsYXBzZWRQYXJlbnRzPXMuaGFzQ29sbGFwc2VkUGFyZW50c3x8IXUuZXhwYW5kZWQsdGhpcy5ub2RlUmVuZGVyKHMsYyxkLGosITApO2wmJiFrJiYocj11LnRyfHxudWxsLG09dC50Ym9keS5maXJzdENoaWxkLHUudmlzaXQoZnVuY3Rpb24oYSl7aWYoYS50cil7aWYoYS5wYXJlbnQuZXhwYW5kZWR8fFwibm9uZVwiPT09YS50ci5zdHlsZS5kaXNwbGF5fHwoYS50ci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGgoYSwhMSkpLGEudHIucHJldmlvdXNTaWJsaW5nIT09cil7dS5kZWJ1ZyhcIl9maXhPcmRlcjogbWlzbWF0Y2ggYXQgbm9kZTogXCIrYSk7dmFyIGI9cj9yLm5leHRTaWJsaW5nOm07dC50Ym9keS5pbnNlcnRCZWZvcmUoYS50cixiKX1yPWEudHJ9fSkpfX0sbm9kZVJlbmRlclRpdGxlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZSxmPWIubm9kZSxnPWIub3B0aW9ucyxoPWYuaXNTdGF0dXNOb2RlKCk7cmV0dXJuIGU9dGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpLGYuaXNSb290Tm9kZSgpP2U6KGcuY2hlY2tib3gmJiFoJiZudWxsIT1nLnRhYmxlLmNoZWNrYm94Q29sdW1uSWR4JiYoZD1hKFwic3Bhbi5mYW5jeXRyZWUtY2hlY2tib3hcIixmLnNwYW4pLGEoZi50cikuZmluZChcInRkXCIpLmVxKCtnLnRhYmxlLmNoZWNrYm94Q29sdW1uSWR4KS5odG1sKGQpKSx0aGlzLm5vZGVSZW5kZXJTdGF0dXMoYiksaD9nLnJlbmRlclN0YXR1c0NvbHVtbnMmJmcucmVuZGVyU3RhdHVzQ29sdW1ucy5jYWxsKGIudHJlZSx7dHlwZTpcInJlbmRlclN0YXR1c0NvbHVtbnNcIn0sYik6Zy5yZW5kZXJDb2x1bW5zJiZnLnJlbmRlckNvbHVtbnMuY2FsbChiLnRyZWUse3R5cGU6XCJyZW5kZXJDb2x1bW5zXCJ9LGIpLGUpfSxub2RlUmVuZGVyU3RhdHVzOmZ1bmN0aW9uKGIpe3ZhciBjLGQ9Yi5ub2RlLGU9Yi5vcHRpb25zO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxhKGQudHIpLnJlbW92ZUNsYXNzKFwiZmFuY3l0cmVlLW5vZGVcIiksYz0oZC5nZXRMZXZlbCgpLTEpKmUudGFibGUuaW5kZW50YXRpb24sYShkLnNwYW4pLmNzcyh7cGFkZGluZ0xlZnQ6YytcInB4XCJ9KX0sbm9kZVNldEV4cGFuZGVkOmZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGEpe2goYi5ub2RlLGMpLGE/YyYmYi5vcHRpb25zLmF1dG9TY3JvbGwmJiFkLm5vQW5pbWF0aW9uJiZiLm5vZGUuaGFzQ2hpbGRyZW4oKT9iLm5vZGUuZ2V0TGFzdENoaWxkKCkuc2Nyb2xsSW50b1ZpZXcoITAse3RvcE5vZGU6Yi5ub2RlfSkuYWx3YXlzKGZ1bmN0aW9uKCl7ZC5ub0V2ZW50c3x8Yi50cmVlLl90cmlnZ2VyTm9kZUV2ZW50KGM/XCJleHBhbmRcIjpcImNvbGxhcHNlXCIsYiksZi5yZXNvbHZlV2l0aChiLm5vZGUpfSk6KGQubm9FdmVudHN8fGIudHJlZS5fdHJpZ2dlck5vZGVFdmVudChjP1wiZXhwYW5kXCI6XCJjb2xsYXBzZVwiLGIpLGYucmVzb2x2ZVdpdGgoYi5ub2RlKSk6KGQubm9FdmVudHN8fGIudHJlZS5fdHJpZ2dlck5vZGVFdmVudChjP1wiZXhwYW5kXCI6XCJjb2xsYXBzZVwiLGIpLGYucmVqZWN0V2l0aChiLm5vZGUpKX1pZihjPWMhPT0hMSxiLm5vZGUuZXhwYW5kZWQmJmN8fCFiLm5vZGUuZXhwYW5kZWQmJiFjKXJldHVybiB0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyk7dmFyIGY9bmV3IGEuRGVmZXJyZWQsZz1hLmV4dGVuZCh7fSxkLHtub0V2ZW50czohMCxub0FuaW1hdGlvbjohMH0pO3JldHVybiBkPWR8fHt9LHRoaXMuX3N1cGVyKGIsYyxnKS5kb25lKGZ1bmN0aW9uKCl7ZSghMCl9KS5mYWlsKGZ1bmN0aW9uKCl7ZSghMSl9KSxmLnByb21pc2UoKX0sbm9kZVNldFN0YXR1czpmdW5jdGlvbihiLGMsZCxlKXtpZihcIm9rXCI9PT1jKXt2YXIgZj1iLm5vZGUsZz1mLmNoaWxkcmVuP2YuY2hpbGRyZW5bMF06bnVsbDtnJiZnLmlzU3RhdHVzTm9kZSgpJiZhKGcudHIpLnJlbW92ZSgpfXJldHVybiB0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LHRyZWVDbGVhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub2RlUmVtb3ZlQ2hpbGRNYXJrdXAodGhpcy5fbWFrZUhvb2tDb250ZXh0KHRoaXMucm9vdE5vZGUpKSx0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyl9LHRyZWVEZXN0cm95OmZ1bmN0aW9uKGEpe3RoaXMuJGNvbnRhaW5lci5maW5kKFwidGJvZHlcIikuZW1wdHkoKSx0aGlzLiRzb3VyY2UmJnRoaXMuJHNvdXJjZS5yZW1vdmVDbGFzcyhcInVpLWhlbHBlci1oaWRkZW5cIil9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xuXG4vKiEgRXh0ZW5zaW9uICdqcXVlcnkuZmFuY3l0cmVlLnRoZW1lcm9sbGVyLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjthLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcInRoZW1lcm9sbGVyXCIsdmVyc2lvbjpcIjIuMjEuMFwiLG9wdGlvbnM6e2FjdGl2ZUNsYXNzOlwidWktc3RhdGUtYWN0aXZlXCIsYWRkQ2xhc3M6XCJ1aS1jb3JuZXItYWxsXCIsZm9jdXNDbGFzczpcInVpLXN0YXRlLWZvY3VzXCIsaG92ZXJDbGFzczpcInVpLXN0YXRlLWhvdmVyXCIsc2VsZWN0ZWRDbGFzczpcInVpLXN0YXRlLWhpZ2hsaWdodFwifSx0cmVlSW5pdDpmdW5jdGlvbihiKXt2YXIgYz1iLndpZGdldC5lbGVtZW50LGQ9Yi5vcHRpb25zLnRoZW1lcm9sbGVyO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxcIlRBQkxFXCI9PT1jWzBdLm5vZGVOYW1lPyhjLmFkZENsYXNzKFwidWktd2lkZ2V0IHVpLWNvcm5lci1hbGxcIiksYy5maW5kKFwiPnRoZWFkIHRyXCIpLmFkZENsYXNzKFwidWktd2lkZ2V0LWhlYWRlclwiKSxjLmZpbmQoXCI+dGJvZHlcIikuYWRkQ2xhc3MoXCJ1aS13aWRnZXQtY29uZW50XCIpKTpjLmFkZENsYXNzKFwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIiksYy5kZWxlZ2F0ZShcIi5mYW5jeXRyZWUtbm9kZVwiLFwibW91c2VlbnRlciBtb3VzZWxlYXZlXCIsZnVuY3Rpb24oYil7dmFyIGM9YS51aS5mYW5jeXRyZWUuZ2V0Tm9kZShiLnRhcmdldCksZT1cIm1vdXNlZW50ZXJcIj09PWIudHlwZTthKGMudHI/Yy50cjpjLnNwYW4pLnRvZ2dsZUNsYXNzKGQuaG92ZXJDbGFzcytcIiBcIitkLmFkZENsYXNzLGUpfSl9LHRyZWVEZXN0cm95OmZ1bmN0aW9uKGEpe3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxhLndpZGdldC5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIil9LG5vZGVSZW5kZXJTdGF0dXM6ZnVuY3Rpb24oYil7dmFyIGM9e30sZD1iLm5vZGUsZT1hKGQudHI/ZC50cjpkLnNwYW4pLGY9Yi5vcHRpb25zLnRoZW1lcm9sbGVyO3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSxjW2YuYWN0aXZlQ2xhc3NdPSExLGNbZi5mb2N1c0NsYXNzXT0hMSxjW2Yuc2VsZWN0ZWRDbGFzc109ITEsZC5pc0FjdGl2ZSgpJiYoY1tmLmFjdGl2ZUNsYXNzXT0hMCksZC5oYXNGb2N1cygpJiYoY1tmLmZvY3VzQ2xhc3NdPSEwKSxkLmlzU2VsZWN0ZWQoKSYmIWQuaXNBY3RpdmUoKSYmKGNbZi5zZWxlY3RlZENsYXNzXT0hMCksZS50b2dnbGVDbGFzcyhmLmFjdGl2ZUNsYXNzLGNbZi5hY3RpdmVDbGFzc10pLGUudG9nZ2xlQ2xhc3MoZi5mb2N1c0NsYXNzLGNbZi5mb2N1c0NsYXNzXSksZS50b2dnbGVDbGFzcyhmLnNlbGVjdGVkQ2xhc3MsY1tmLnNlbGVjdGVkQ2xhc3NdKSxlLmFkZENsYXNzKGYuYWRkQ2xhc3MpfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcblxuLyohIEV4dGVuc2lvbiAnanF1ZXJ5LmZhbmN5dHJlZS53aWRlLm1pbi5qcycgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGIsYyl7Yj1cImZhbmN5dHJlZS1zdHlsZS1cIitiO3ZhciBkPWEoXCIjXCIrYik7aWYoIWMpcmV0dXJuIGQucmVtb3ZlKCksbnVsbDtkLmxlbmd0aHx8KGQ9YShcIjxzdHlsZSAvPlwiKS5hdHRyKFwiaWRcIixiKS5hZGRDbGFzcyhcImZhbmN5dHJlZS1zdHlsZVwiKS5wcm9wKFwidHlwZVwiLFwidGV4dC9jc3NcIikuYXBwZW5kVG8oXCJoZWFkXCIpKTt0cnl7ZC5odG1sKGMpfWNhdGNoKGUpe2RbMF0uc3R5bGVTaGVldC5jc3NUZXh0PWN9cmV0dXJuIGR9ZnVuY3Rpb24gZihhLGIsYyxkLGUpe3ZhciBmLGc9XCIjXCIrYStcIiBzcGFuLmZhbmN5dHJlZS1sZXZlbC1cIixoPVtdO2ZvcihmPTA7ZjxiO2YrKyloLnB1c2goZysoZisxKStcIiBzcGFuLmZhbmN5dHJlZS10aXRsZSB7IHBhZGRpbmctbGVmdDogXCIrKGYqYytkKStlK1wiOyB9XCIpO3JldHVybiBoLnB1c2goXCIjXCIrYStcIiBkaXYudWktZWZmZWN0cy13cmFwcGVyIHVsIGxpIHNwYW4uZmFuY3l0cmVlLXRpdGxlIHsgcGFkZGluZy1sZWZ0OiAzcHg7IHBvc2l0aW9uOiBzdGF0aWM7IHdpZHRoOiBhdXRvOyB9XCIpLGguam9pbihcIlxcblwiKX12YXIgZz0vXihbKy1dPyg/OlxcZCt8XFxkKlxcLlxcZCspKShbYS16XSp8JSkkLzthLnVpLmZhbmN5dHJlZS5yZWdpc3RlckV4dGVuc2lvbih7bmFtZTpcIndpZGVcIix2ZXJzaW9uOlwiMi4yMS4wXCIsb3B0aW9uczp7aWNvbldpZHRoOm51bGwsaWNvblNwYWNpbmc6bnVsbCxsZXZlbE9mczpudWxsfSx0cmVlQ3JlYXRlOmZ1bmN0aW9uKGIpe3RoaXMuX3N1cGVyQXBwbHkoYXJndW1lbnRzKSx0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoXCJmYW5jeXRyZWUtZXh0LXdpZGVcIik7dmFyIGMsZCxoLGksaixrPWIub3B0aW9ucy53aWRlLGw9YShcIjxsaSBpZD0nZmFuY3l0cmVlVGVtcCc+PHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS1ub2RlJz48c3BhbiBjbGFzcz0nZmFuY3l0cmVlLWljb24nIC8+PHNwYW4gY2xhc3M9J2ZhbmN5dHJlZS10aXRsZScgLz48L3NwYW4+PHVsIC8+XCIpLmFwcGVuZFRvKGIudHJlZS4kY29udGFpbmVyKSxtPWwuZmluZChcIi5mYW5jeXRyZWUtaWNvblwiKSxuPWwuZmluZChcInVsXCIpLG89ay5pY29uU3BhY2luZ3x8bS5jc3MoXCJtYXJnaW4tbGVmdFwiKSxwPWsuaWNvbldpZHRofHxtLmNzcyhcIndpZHRoXCIpLHE9ay5sZXZlbE9mc3x8bi5jc3MoXCJwYWRkaW5nLWxlZnRcIik7bC5yZW1vdmUoKSxoPW8ubWF0Y2goZylbMl0sbz1wYXJzZUZsb2F0KG8sMTApLGk9cC5tYXRjaChnKVsyXSxwPXBhcnNlRmxvYXQocCwxMCksaj1xLm1hdGNoKGcpWzJdLGg9PT1pJiZqPT09aXx8YS5lcnJvcihcImljb25XaWR0aCwgaWNvblNwYWNpbmcsIGFuZCBsZXZlbE9mcyBtdXN0IGhhdmUgdGhlIHNhbWUgY3NzIG1lYXN1cmUgdW5pdFwiKSx0aGlzLl9sb2NhbC5tZWFzdXJlVW5pdD1pLHRoaXMuX2xvY2FsLmxldmVsT2ZzPXBhcnNlRmxvYXQocSksdGhpcy5fbG9jYWwubGluZU9mcz0oMSsoYi5vcHRpb25zLmNoZWNrYm94PzE6MCkrKGIub3B0aW9ucy5pY29uPT09ITE/MDoxKSkqKHArbykrbyx0aGlzLl9sb2NhbC5tYXhEZXB0aD0xMCxjPXRoaXMuJGNvbnRhaW5lci51bmlxdWVJZCgpLmF0dHIoXCJpZFwiKSxkPWYoYyx0aGlzLl9sb2NhbC5tYXhEZXB0aCx0aGlzLl9sb2NhbC5sZXZlbE9mcyx0aGlzLl9sb2NhbC5saW5lT2ZzLHRoaXMuX2xvY2FsLm1lYXN1cmVVbml0KSxlKGMsZCl9LHRyZWVEZXN0cm95OmZ1bmN0aW9uKGEpe3JldHVybiBlKHRoaXMuJGNvbnRhaW5lci5hdHRyKFwiaWRcIiksbnVsbCksdGhpcy5fc3VwZXJBcHBseShhcmd1bWVudHMpfSxub2RlUmVuZGVyU3RhdHVzOmZ1bmN0aW9uKGIpe3ZhciBjLGQsZyxoPWIubm9kZSxpPWguZ2V0TGV2ZWwoKTtyZXR1cm4gZz10aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksaT50aGlzLl9sb2NhbC5tYXhEZXB0aCYmKGM9dGhpcy4kY29udGFpbmVyLmF0dHIoXCJpZFwiKSx0aGlzLl9sb2NhbC5tYXhEZXB0aCo9MixoLmRlYnVnKFwiRGVmaW5lIGdsb2JhbCBleHQtd2lkZSBjc3MgdXAgdG8gbGV2ZWwgXCIrdGhpcy5fbG9jYWwubWF4RGVwdGgpLGQ9ZihjLHRoaXMuX2xvY2FsLm1heERlcHRoLHRoaXMuX2xvY2FsLmxldmVsT2ZzLHRoaXMuX2xvY2FsLmxpbmVPZnMsdGhpcy5fbG9jYWwubWVhc3VyZVVuaXQpLGUoYyxkKSksYShoLnNwYW4pLmFkZENsYXNzKFwiZmFuY3l0cmVlLWxldmVsLVwiK2kpLGd9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xufSkpO1xuIiwiLyoqIVxuICoganF1ZXJ5LmZhbmN5dHJlZS5jb250ZXh0bWVudS5qc1xuICogM3JkIHBhcnR5IGpRdWVyeSBDb250ZXh0IG1lbnUgZXh0ZW5zaW9uIGZvciBqUXVlcnkgRmFuY3l0cmVlXG4gKlxuICogQXV0aG9yczogUm9kbmV5IFJlaG0sIEFkZHkgT3NtYW5pIChwYXRjaGVzIGZvciBGRilcbiAqIFdlYjogaHR0cDovL21lZGlhbGl6ZS5naXRodWIuY29tL2pRdWVyeS1jb250ZXh0TWVudS9cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIsIE1hcnRpbiBXZW5kdCAoaHR0cDovL3d3V2VuZHQuZGUpXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cbiAqIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9mYW5jeXRyZWUvd2lraS9MaWNlbnNlSW5mZVxuICovXG4oZnVuY3Rpb24oJCwgZG9jdW1lbnQpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIGluaXRDb250ZXh0TWVudSA9IGZ1bmN0aW9uKHRyZWUsIHNlbGVjdG9yLCBtZW51LCBhY3Rpb25zKSB7XG5cdFx0dHJlZS4kY29udGFpbmVyLm9uKFwibW91c2Vkb3duLmNvbnRleHRNZW51XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHR2YXIgbm9kZSA9ICQudWkuZmFuY3l0cmVlLmdldE5vZGUoZXZlbnQpO1xuXG5cdFx0XHRpZihub2RlKSB7XG4gICAgICAgICQuY29udGV4dE1lbnUoXCJkZXN0cm95XCIsIFwiLlwiICsgc2VsZWN0b3IpO1xuXG5cdFx0XHRcdG5vZGUuc2V0Rm9jdXModHJ1ZSk7XG5cdFx0XHRcdG5vZGUuc2V0QWN0aXZlKHRydWUpO1xuXG5cdFx0XHRcdCQuY29udGV4dE1lbnUoe1xuXHRcdFx0XHRcdHNlbGVjdG9yOiBcIi5cIiArIHNlbGVjdG9yLFxuXHRcdFx0XHRcdGJ1aWxkOiBmdW5jdGlvbigkdHJpZ2dlciwgZSkge1xuXHRcdFx0XHRcdFx0bm9kZSA9ICQudWkuZmFuY3l0cmVlLmdldE5vZGUoJHRyaWdnZXIpO1xuXG5cdFx0XHRcdFx0XHR2YXIgbWVudUl0ZW1zID0geyB9O1xuXHRcdFx0XHRcdFx0aWYoJC5pc0Z1bmN0aW9uKG1lbnUpKSB7XG5cdFx0XHRcdFx0XHRcdG1lbnVJdGVtcyA9IG1lbnUobm9kZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoJC5pc1BsYWluT2JqZWN0KG1lbnUpKSB7XG5cdFx0XHRcdFx0XHRcdG1lbnVJdGVtcyA9IG1lbnU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrOiBmdW5jdGlvbihhY3Rpb24sIG9wdGlvbnMpIHtcblx0XHRcdFx0XHRcdFx0XHRpZigkLmlzRnVuY3Rpb24oYWN0aW9ucykpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGFjdGlvbnMobm9kZSwgYWN0aW9uLCBvcHRpb25zKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYoJC5pc1BsYWluT2JqZWN0KGFjdGlvbnMpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZihhY3Rpb25zLmhhc093blByb3BlcnR5KGFjdGlvbikgJiYgJC5pc0Z1bmN0aW9uKGFjdGlvbnNbYWN0aW9uXSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWN0aW9uc1thY3Rpb25dKG5vZGUsIG9wdGlvbnMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0aXRlbXM6IG1lbnVJdGVtc1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdCQudWkuZmFuY3l0cmVlLnJlZ2lzdGVyRXh0ZW5zaW9uKHtcblx0XHRuYW1lOiBcImNvbnRleHRNZW51XCIsXG5cdFx0dmVyc2lvbjogXCIxLjBcIixcblx0XHRjb250ZXh0TWVudToge1xuICAgICAgc2VsZWN0b3I6IFwiZmFuY3l0cmVlLXRpdGxlXCIsXG5cdFx0XHRtZW51OiB7fSxcblx0XHRcdGFjdGlvbnM6IHt9XG5cdFx0fSxcblx0XHR0cmVlSW5pdDogZnVuY3Rpb24oY3R4KSB7XG5cdFx0XHR0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyk7XG5cdFx0XHRpbml0Q29udGV4dE1lbnUoY3R4LnRyZWUsXG4gICAgICAgICAgICAgICAgICAgICAgY3R4Lm9wdGlvbnMuY29udGV4dE1lbnUuc2VsZWN0b3IgfHwgXCJmYW5jeXRyZWUtdGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICBjdHgub3B0aW9ucy5jb250ZXh0TWVudS5tZW51LFxuICAgICAgICAgICAgICAgICAgICAgIGN0eC5vcHRpb25zLmNvbnRleHRNZW51LmFjdGlvbnMpO1xuXHRcdH1cblx0fSk7XG59KGpRdWVyeSwgZG9jdW1lbnQpKTtcbiIsIiQoZnVuY3Rpb24oKSB7XG5cdCQkLnV0aWwubG9hZFN0eWxlKCd0cmVlL2JyYWluanMtdHJlZS5jc3MnKVxufSlcblxuXG4kJC5jb250cm9sLnJlZ2lzdGVyQ29udHJvbCgnYnJhaW5qcy50cmVlJywge1xuXHRwcm9wczoge1xuXHRcdHNvdXJjZTogW10sXG5cdFx0Y29udGV4dE1lbnU6IG51bGwsXG5cdFx0b3B0aW9uczoge31cblx0fSxcblx0aW5pdDogZnVuY3Rpb24oZWx0KSB7XG5cblx0XHRsZXQgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLnByb3BzLm9wdGlvbnMpXG5cdFx0Y29uc29sZS5sb2coJ29wdGlvbnMnLCBvcHRpb25zKVxuXG5cdFx0b3B0aW9ucy5zb3VyY2UgPSB0aGlzLnByb3BzLnNvdXJjZVxuXHRcdG9wdGlvbnMuZXh0ZW5zaW9ucyA9IFtdXG5cdFx0b3B0aW9ucy5hY3RpdmF0ZSA9IGZ1bmN0aW9uKGV2LCBkYXRhKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdhY3RpdmF0ZScsIGRhdGEubm9kZS50aXRsZSlcblx0XHRcdGVsdC50cmlnZ2VyKCd0cmVlYWN0aXZhdGUnKVxuXHRcdH1cblxuXHRcdGlmICh0aGlzLnByb3BzLmNvbnRleHRNZW51ICE9IG51bGwpIHtcblx0XHRcdG9wdGlvbnMuZXh0ZW5zaW9ucy5wdXNoKCdjb250ZXh0TWVudScpXG5cblx0XHRcdG9wdGlvbnMuY29udGV4dE1lbnUgPSB7XG5cdFx0XHRcdGFjdGlvbnM6IChub2RlLCBhY3Rpb24pID0+IHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCdjb250ZXh0TWVudUFjdGlvbicsIG5vZGUsIGFjdGlvbilcblx0XHRcdFx0XHRub2RlID0gdGhpcy5nZXRBY3RpdmVOb2RlKClcblx0XHRcdFx0XHRlbHQudHJpZ2dlcigndHJlZWNvbnRleHRtZW51Jywge2FjdGlvbiwgbm9kZX0pXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG1lbnU6IHRoaXMucHJvcHMuY29udGV4dE1lbnVcblx0XHRcdH1cblx0XHR9XG5cblxuXHRcdGVsdC5mYW5jeXRyZWUob3B0aW9ucylcblxuXG5cdFx0dGhpcy5nZXRBY3RpdmVOb2RlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZWx0LmZhbmN5dHJlZSgnZ2V0QWN0aXZlTm9kZScpXG5cdFx0fVxuXG5cdFx0dGhpcy5nZXRSb290Tm9kZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGVsdC5mYW5jeXRyZWUoJ2dldFJvb3ROb2RlJylcblx0XHR9XG5cblx0fVxufSk7XG4iXX0=
